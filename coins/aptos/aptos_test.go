package aptos

import (
	ed255192 "crypto/ed25519"
	"encoding/hex"
	"encoding/json"
	"fmt"
	"github.com/okx/go-wallet-sdk/coins/aptos/aptos_types"
	"github.com/okx/go-wallet-sdk/coins/aptos/bcs"
	"github.com/okx/go-wallet-sdk/coins/aptos/serde"
	v2 "github.com/okx/go-wallet-sdk/coins/aptos/v2"
	bcs2 "github.com/okx/go-wallet-sdk/coins/aptos/v2/bcs"
	"github.com/okx/go-wallet-sdk/crypto/ed25519"
	"github.com/okx/go-wallet-sdk/util"
	"math/big"
	"strconv"
	"strings"
	"testing"

	"github.com/stretchr/testify/assert"
	"github.com/stretchr/testify/require"
)

const TYPED_SCRIPT_TEST =
// eslint-disable-next-line max-len
"a11ceb0b060000000701000202020603080c04140405181a07321b084d2000000001040100010002030101000003040501000002010203060c0305010b0001090001090002060c0302050b000109000004636f696e04436f696e087769746864726177076465706f736974000000000000000000000000000000000000000000000000000000000000000101000001080b000b0138000c030b020b03380102"

func TestSignSimpleTxWithFeePayer(t *testing.T) {
	rawTx := `0x986d10e6ffde60518ab0664f70339196f914f96255f31a1c6b226670c73d3f9229000000000000000200000000000000000000000000000000000000000000000000000000000000010d6170746f735f6163636f756e740e7472616e736665725f636f696e73010700000000000000000000000000000000000000000000000000000000000000010a6170746f735f636f696e094170746f73436f696e0002200163f9f9f773f3b0e788559d9efcbe547889500d0891fe024e782c7224defd0108e80300000000000010270000000000006400000000000000035bdf6e0000000002010e0b96a300ba50c10777901fb7437391b5d5ddb627f482b33b47d29202d0e0ff`
	res, err := SignSimpleTx(rawTx, "c8c57b624a07f298b62ee55b7cb4186129b45d22746b03fb4b8522514cbb7618")
	assert.Nil(t, err)
	expected := `{"rawTxn":"0x986d10e6ffde60518ab0664f70339196f914f96255f31a1c6b226670c73d3f9229000000000000000200000000000000000000000000000000000000000000000000000000000000010d6170746f735f6163636f756e740e7472616e736665725f636f696e73010700000000000000000000000000000000000000000000000000000000000000010a6170746f735f636f696e094170746f73436f696e0002200163f9f9f773f3b0e788559d9efcbe547889500d0891fe024e782c7224defd0108e80300000000000010270000000000006400000000000000035bdf6e0000000002010e0b96a300ba50c10777901fb7437391b5d5ddb627f482b33b47d29202d0e0ff","accAuthenticator":"00205c8c683ba086152c9d0d18a7f14411773e0d0e21a5a0dd6b8742b57f204124a5402e6c7b99a1bb3e7e08c43d25f8479f7e9e2353cb0c4d9ad0be9c5e8700d6fc8dad69ad6a16b685eb08265f904a48a27e090dc55096fff9cf0698509c78669c07"}`
	assert.Equal(t, expected, res)
}
func TestSignSimpleTx(t *testing.T) {
	rawTx := `0x0552e93408c5536749bbb2c494d6063010564950bda2cb7ca7914cf54383f870010000000000000000bf01a11ceb0b060000000701000402040a030e0c041a04051e20073e30086e2000000001010204010001000308000104030401000105050601000002010203060c0305010b0001080101080102060c03010b0001090002050b00010900000a6170746f735f636f696e04636f696e04436f696e094170746f73436f696e087769746864726177076465706f7369740000000000000000000000000000000000000000000000000000000000000001000001080b000b0138000c030b020b03380102000201010000000000000003005081ec35e92c741f52150098985ba1f9464382c69a4cfa440195cdc28f88890100000000000000010000000000000001000000000000000200`
	res, err := SignSimpleTx(rawTx, "fbfdf86582998a7cf3b56f4a9026d3190e539d74fa27ddec23698f13a27c9ed7")
	assert.Nil(t, err)
	expected := `{"txHash":"0xc8eb0d88423d52a1e0e4a6bdd68ed36da38b3376413b5a855f7def64079b462b","rawTxn":"0552e93408c5536749bbb2c494d6063010564950bda2cb7ca7914cf54383f870010000000000000000bf01a11ceb0b060000000701000402040a030e0c041a04051e20073e30086e2000000001010204010001000308000104030401000105050601000002010203060c0305010b0001080101080102060c03010b0001090002050b00010900000a6170746f735f636f696e04636f696e04436f696e094170746f73436f696e087769746864726177076465706f7369740000000000000000000000000000000000000000000000000000000000000001000001080b000b0138000c030b020b03380102000201010000000000000003005081ec35e92c741f52150098985ba1f9464382c69a4cfa440195cdc28f8889010000000000000001000000000000000100000000000000020020a6084a32f84d8da8851aa2503222b8a6f5ea8d6d907f68d9a3e146da83725b05405b33d54ca18f498b7a83a946c2dfe94e306413154f12a9abca2a6c86ebfc902068234ab661dd7900c32396d942b993329eee936d2653fa88e324e8202e14520a","accAuthenticator":"0020a6084a32f84d8da8851aa2503222b8a6f5ea8d6d907f68d9a3e146da83725b05405b33d54ca18f498b7a83a946c2dfe94e306413154f12a9abca2a6c86ebfc902068234ab661dd7900c32396d942b993329eee936d2653fa88e324e8202e14520a"}`
	assert.Equal(t, expected, res)
}

func TestSignMultiAgentTx(t *testing.T) {
	rawTx := `0x07897a0496703c27954fa3cc8310f134dd1f7621edf5e88b5bf436e4af70cfc6a50100000000000000c401a11ceb0b0700000a0601000203020605080d071525083a40107a1f010200030201000104060c060c05030003060c0503083c53454c463e5f30046d61696e0d6170746f735f6163636f756e74087472616e73666572ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000114636f6d70696c6174696f6e5f6d65746164617461090003322e3003322e31000001070b000b01010b020b0311000200020307897a0496703c27954fa3cc8310f134dd1f7621edf5e88b5bf436e4af70cfc6010100000000000000400d03000000000064000000000000007a5351680000000001010b6c915bb78c6a98d094661a1fccdffb16f73b48a003aa860feae1684bab8cb300`
	res, err := SignMultiAgentTx(rawTx, "c8c57b624a07f298b62ee55b7cb4186129b45d22746b03fb4b8522514cbb7618")
	assert.Nil(t, err)
	expected := `{"rawTxn":"0x07897a0496703c27954fa3cc8310f134dd1f7621edf5e88b5bf436e4af70cfc6a50100000000000000c401a11ceb0b0700000a0601000203020605080d071525083a40107a1f010200030201000104060c060c05030003060c0503083c53454c463e5f30046d61696e0d6170746f735f6163636f756e74087472616e73666572ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000114636f6d70696c6174696f6e5f6d65746164617461090003322e3003322e31000001070b000b01010b020b0311000200020307897a0496703c27954fa3cc8310f134dd1f7621edf5e88b5bf436e4af70cfc6010100000000000000400d03000000000064000000000000007a5351680000000001010b6c915bb78c6a98d094661a1fccdffb16f73b48a003aa860feae1684bab8cb300","accAuthenticator":"00205c8c683ba086152c9d0d18a7f14411773e0d0e21a5a0dd6b8742b57f204124a540d26d124310dd5b8f5a377614028a58171fa43494ea6dfa3eadb11c1e0d42c4e1980ecd735e150ee4b8faaa6ab0d0d2912c9eafc1869bbab64af96b5fba0c850d"}`
	assert.Equal(t, expected, res)
}
func TestPayloadFromJsonAndAbiV2(t *testing.T) {
	payload := `{"arguments":["0x00","0x2acddad65c27c6e5b568b398f0d1d01ebb8b55466461bbd51c1e42763a92fdfe","1","1",["2","1"],[[["40"],["19"]],[["23"]],[[]]],[[["2"],["1"]],[["0"]],[[]]],[[["false"],["true"]],[["false"]],[[]]],[["2","4"],["4"],["4"]],[[["0xd8a280a4e308f72547a02a48b2ec0cb661dc72ed10565f116a6c7059ada9aa6e"],["0x0"]],[["0x0"]],[["0x0"]]],[["0x81214a80d82035a190fcb76b6ff3c0145161c3a9f33d137f2bbaee4cfec8a387","0xf599112bc3a5b6092469890d6a2f353f485a6193c9d36626b480704467d3f4c8"],["0xa"],["0x2ebb2ccac5e027a87fa0e2e5f656a3a4238d6a48d93ec9b610d570fc0aa0df12"]],[["0xa","0xa"],["0xf599112bc3a5b6092469890d6a2f353f485a6193c9d36626b480704467d3f4c8"],["0x2ebb2ccac5e027a87fa0e2e5f656a3a4238d6a48d93ec9b610d570fc0aa0df12"]],"0x00",[[["10000"],["10000"]],[["10000"]],[[]]],"0x0101080e87010000000000","0xf599112bc3a5b6092469890d6a2f353f485a6193c9d36626b480704467d3f4c8",["1409"],"139708","11000010000000000","0x90c588d22ee7dd42d55d73e63b50f0f9dfe7113952374040ae8c4adfd137176d"],"function":"0x1c3206329806286fd2223647c9f9b130e66baeb6d7224a18c1f642ffe48f3b4c::panora_swap::router_entry","type":"entry_function_payload","type_arguments":["0x1::string::String","0x1::aptos_coin::AptosCoin","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::string::String","0x1::aptos_coin::AptosCoin","0x4e1854f6d332c9525e258fb6e66f84b6af8aba687bbcb832a24768c4e175feec::abtc::ABTC"]}`
	abiStr := `[{"abi":{"address":"0x1c3206329806286fd2223647c9f9b130e66baeb6d7224a18c1f642ffe48f3b4c","name":"panora_swap","friends":[],"exposed_functions":[{"name":"init_resources_and_events","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[],"params":["&signer"],"return":[]},{"name":"multisig_router_entry","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]}],"params":["&signer","address","u64","u8","vector<u8>","vector<vector<vector<u8>>>","vector<vector<vector<u64>>>","vector<vector<vector<bool>>>","vector<vector<u8>>","vector<vector<vector<address>>>","vector<vector<address>>","vector<vector<address>>","0x1::option::Option<vector<vector<vector<vector<vector<u8>>>>>>","vector<vector<vector<u64>>>","0x1::option::Option<vector<vector<vector<u8>>>>","address","vector<u64>","u64","u64","address"],"return":[]},{"name":"router","visibility":"public","is_entry":false,"is_view":false,"generic_type_params":[{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]}],"params":["address","0x1::option::Option<0x1::coin::Coin<T0>>","0x1::option::Option<0x1::fungible_asset::FungibleAsset>","u64","u8","vector<u8>","vector<vector<vector<u8>>>","vector<vector<vector<u64>>>","vector<vector<vector<bool>>>","vector<vector<u8>>","vector<vector<vector<address>>>","vector<vector<address>>","vector<vector<address>>","0x1::option::Option<vector<vector<vector<vector<vector<u8>>>>>>","vector<vector<vector<u64>>>","0x1::option::Option<vector<vector<vector<u8>>>>","address","vector<u64>","u64","u64","address"],"return":["0x1::option::Option<0x1::coin::Coin<T0>>","0x1::option::Option<0x1::fungible_asset::FungibleAsset>","0x1::option::Option<0x1::coin::Coin<T31>>","0x1::option::Option<0x1::fungible_asset::FungibleAsset>"]},{"name":"router_entry","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]}],"params":["&signer","0x1::option::Option<signer>","address","u64","u8","vector<u8>","vector<vector<vector<u8>>>","vector<vector<vector<u64>>>","vector<vector<vector<bool>>>","vector<vector<u8>>","vector<vector<vector<address>>>","vector<vector<address>>","vector<vector<address>>","0x1::option::Option<vector<vector<vector<vector<vector<u8>>>>>>","vector<vector<vector<u64>>>","0x1::option::Option<vector<vector<vector<u8>>>>","address","vector<u64>","u64","u64","address"],"return":[]},{"name":"swap_exact_in","visibility":"public","is_entry":false,"is_view":false,"generic_type_params":[{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]}],"params":["address","0x1::option::Option<0x1::coin::Coin<T0>>","0x1::option::Option<0x1::fungible_asset::FungibleAsset>","u64","u8","vector<u8>","vector<address>","vector<vector<u8>>","vector<vector<u64>>","vector<vector<bool>>","vector<u8>","vector<address>","vector<vector<u8>>","vector<vector<u64>>","vector<vector<bool>>","vector<u8>","vector<address>","vector<vector<u8>>","vector<vector<u64>>","vector<vector<bool>>","vector<u8>","vector<address>","address","vector<u64>","vector<vector<u64>>","vector<vector<u64>>","vector<vector<u64>>","u64","u64","address"],"return":["0x1::option::Option<0x1::coin::Coin<T31>>","0x1::option::Option<0x1::fungible_asset::FungibleAsset>"]},{"name":"swap_exact_in_entry","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]},{"constraints":[]}],"params":["&signer","address","u64","u8","vector<u8>","vector<address>","vector<vector<u8>>","vector<vector<u64>>","vector<vector<bool>>","vector<u8>","vector<address>","vector<vector<u8>>","vector<vector<u64>>","vector<vector<bool>>","vector<u8>","vector<address>","vector<vector<u8>>","vector<vector<u64>>","vector<vector<bool>>","vector<u8>","vector<address>","address","vector<u64>","vector<vector<u64>>","vector<vector<u64>>","vector<vector<u64>>","u64","u64","address"],"return":[]}],"structs":[{"name":"EventStore1","is_native":false,"is_event":false,"abilities":["key"],"generic_type_params":[],"fields":[{"name":"swap_step_events","type":"0x1::event::EventHandle<0x1c3206329806286fd2223647c9f9b130e66baeb6d7224a18c1f642ffe48f3b4c::panora_swap::PanoraSwapSummaryEvent>"}]},{"name":"PanoraSwapSummaryEvent","is_native":false,"is_event":false,"abilities":["drop","store"],"generic_type_params":[],"fields":[{"name":"input_token_address","type":"0x1::string::String"},{"name":"output_token_address","type":"0x1::string::String"},{"name":"input_token_amount","type":"u64"},{"name":"output_token_amount","type":"u64"},{"name":"time_stamp","type":"u64"},{"name":"integrator_address","type":"address"},{"name":"user_address","type":"address"},{"name":"function_id","type":"u64"},{"name":"platform_id","type":"u64"}]}]}}]`
	res, err := PayloadFromJsonAndAbiV2(payload, abiStr, v2.CompatibilityMode(true))
	assert.Nil(t, err)
	fmt.Println(res)
}

func TestScriptPayloadFromJsonAndAbi(t *testing.T) {
	if false {
		sc := &v2.TransactionPayload{}
		rawHex := "0x009f01a11ceb0b060000000701000202020603080c04140405181a07321b084d2000000001040100010002030101000003040501000002010203060c0305010b0001090001090002060c0302050b000109000004636f696e04436f696e087769746864726177076465706f736974000000000000000000000000000000000000000000000000000000000000000101000001080b000b0138000c030b020b03380102010700000000000000000000000000000000000000000000000000000000000000010a6170746f735f636f696e094170746f73436f696e00020351bb7b2c0350c4d234ed3a3b7f416a16f69b85b94965653cfdb55eeb4e7865ac013200000000000000"
		payloadBytes := util.RemoveZeroHex(rawHex)
		sc.UnmarshalBCS(bcs2.NewDeserializer(payloadBytes))
		var ser = &bcs2.Serializer{}
		sc.MarshalBCS(ser)
		assert.Nil(t, ser.Error())
		assert.Equal(t, rawHex, "0x"+hex.EncodeToString(ser.ToBytes()))
		return
	}

	payload := `{"type":"entry_function_payload","function":"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::coin_bridge::send_coin_from","type_arguments":["0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT"],"arguments":["109","0x000000000000000000000000fe8dc6394501a35ad1c4833f40f382e55dada4f3","10000","1498477","0",false,"0x000100000000000249f0",[]]}`
	abiStr := `[{"bytecode":"0xa11ceb0b0600000005010002020218071a30084a200a6a1e00000001000000020000000300000004000000050000000600000561737365740442555344045553444304555344440455534454045742544304574554480b64756d6d795f6669656c64f22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa00020107010102010701020201070103020107010402010701050201070100","abi":{"address":"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa","name":"asset","friends":[],"exposed_functions":[],"structs":[{"name":"BUSD","is_native":false,"is_event":false,"abilities":[],"generic_type_params":[],"fields":[{"name":"dummy_field","type":"bool"}]},{"name":"USDC","is_native":false,"is_event":false,"abilities":[],"generic_type_params":[],"fields":[{"name":"dummy_field","type":"bool"}]},{"name":"USDD","is_native":false,"is_event":false,"abilities":[],"generic_type_params":[],"fields":[{"name":"dummy_field","type":"bool"}]},{"name":"USDT","is_native":false,"is_event":false,"abilities":[],"generic_type_params":[],"fields":[{"name":"dummy_field","type":"bool"}]},{"name":"WBTC","is_native":false,"is_event":false,"abilities":[],"generic_type_params":[],"fields":[{"name":"dummy_field","type":"bool"}]},{"name":"WETH","is_native":false,"is_event":false,"abilities":[],"generic_type_params":[],"fields":[{"name":"dummy_field","type":"bool"}]}]}},{"bytecode":"0xa11ceb0b060000000e010008020806030e21052f2507549d0108f1014006b1022c10dd02350a92030d0b9f03020ca103f5010d96050a0ea0050a0faa05020001010201030104000508010001000600010100000702010100000803010100030e010300020f080300011003030002060c0300030103030103030303060c01090001070b000109000203070b000109000203030b636f696e5f627269646765076c696d69746572056572726f72066d61746836340974696d657374616d70074c696d697465720d72656769737465725f636f696e0b7365745f6c696d697465720a7472795f696e7365727407656e61626c65640674305f7365630a77696e646f775f7365630673756d5f7364066361705f73640b6e6f775f7365636f6e647303706f770c6f75745f6f665f72616e6765f22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa0000000000000000000000000000000000000000000000000000000000000001030800000000000000000520f22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa126170746f733a3a6d657461646174615f76312101000000000000000014454252494447455f4341505f4f564552464c4f5700000000020509010a030b030c030d03000500030000040f0b000c0411030c020b010c030b04080b020640380000000000000600000000000000000b0339003f00020103000100061007013c000c030b000a033600150b010a033601150b020b03360215020203000100074d07013c000c020a0237001420040b0b02010211030a02370314170a023702141a0c010a010600000000000000002404380a023703140a023702140a0118160a023603150a0106400000000000000026042e0600000000000000000a0236041505380a023704140602000000000000000b0111041a0a023604150a023704140b00160a023604150a023704140b02370114250449054c0700110527020000000400020001000300050105020503050405000000","abi":{"address":"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa","name":"limiter","friends":["0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::coin_bridge"],"exposed_functions":[{"name":"register_coin","visibility":"friend","is_entry":false,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["&signer","u64"],"return":[]},{"name":"set_limiter","visibility":"friend","is_entry":false,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["bool","u64","u64"],"return":[]},{"name":"try_insert","visibility":"friend","is_entry":false,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["u64"],"return":[]}],"structs":[{"name":"Limiter","is_native":false,"is_event":false,"abilities":["key"],"generic_type_params":[{"constraints":[]}],"fields":[{"name":"enabled","type":"bool"},{"name":"t0_sec","type":"u64"},{"name":"window_sec","type":"u64"},{"name":"sum_sd","type":"u64"},{"name":"cap_sd","type":"u64"}]}]}},{"bytecode":"0xa11ceb0b060000000e01002a022a6a039401800404940572058606a90507af0b9e0e08cd196006ad1aa70210d41cde040ab221a0010bd222020cd422ef0f0dc332260ee9320e0000010101020103010401050106010701080109010a010b010c010d020e020f0210021102120213001400150000001606000017080100010018080000190800001a0800001b0800001c0300001d0600001e0600001f0600042504010001042905010001042a05010001042b050100010c3307000a360700033a0800133d00000b4b0402030100010657040106010e5b050100010020000001000021000001000022010000002302000100002403040000260500010000270600000028070800002c02090100002d000a0100002e000b0100002f02000000300c0b010000310d0e0000320f00010000340f10000035110d0000371200010000380e0e010000390d0e00003b13140100003c15000100003e16170100003f16170100004006000000411800010000420600010000431900010000441a1b010005660e0e0005670e0e000c68001e01000b69200b0203000b6a20210203000f6b2200000d6c240b0100056d0e0e00096e022600046f260b010004700200010005710e0e000b72282902030004732a1b010004740500010006752c00010612762e000012772f300101117803230005790e0e00117a030e00047b310e0100047c1b000100127d330000117e350000117f3600001180013700000e8101023d01000f82013e0001001082010200000b8301003f020304018401024201061285010e00001086014600000e32470e01000b87012848020300078801082600028901260b000b8a014948020302028b01050001000d8c011c3001000e354b0d00058d010e0e00048e014d4c0100088f010d0e0014371a000100049001001b01000491011a1b01001492010e000100049301520001001094012708000f950153540100049601561b0100149701570001000b980149000203020b990149000203000a1c1f1c201f211f2323001c011c261c271c202729272a1c2b1c2c2b2e23321c331c213a383c393c3b1f3b403c413c433c2b3f3c203a403a4327441c2c432140451e481c3b3a3b274a1c4b4e171c334e121c4c1c1c501c4e161c0550054e4d1c4e1c503c2c41511c521c531f543a54404b1c000203060a0201060c01060a02030a020a020302050b0b01090002060c01040a020a020301010a02030b0c0109000b0d0109000b0e010900020a030a03010102030a02020303010303030a020a02010a080f0403010a020a0205060c081008100203070b0b010900030a020b0b010811010a020a02010b0b01081109060c030a02030303010a020a02080b0b010900030a020b0b0108110b0b010812010a020a02020b0b0108110b0b01081204060c01030304060c030a020102060c03010b0b01090001090002080f06080401080f02080f0102060b13020900090109000106090105050303060a0203010201060a09000403070b020109000b0b01090005010502050302070b13020900090109000109010203060b0c01090001080102070b140109000900050a020a02030a020a0202060a020303060a09000303010a090001060b0b0109000107080402060c0503020a020202070a020202070a020a0202070a020301060b0201090005060b020109000306030608090a0302030809010b15010800010800010b1501090002060c0b15010900010b130209000901020807080f01080a010b14010900010808010608090f0101010103030703070b020109000b0b010900060806050a020708090a02010305030a0204030a020a02060b150109000107090103070b130209000901090009010208070a0206050303010a020a02030b0d0109000b0e0109000b0c01090005060c081008100201010812070b0b0109000b0b0108110b0b01081103050b0b0108120b0b010812010811090303070b020109000a020608060b0b0108110a020708090b0b010812020b0b010900060b0d01090008030a020a020b0b0108110b0b0108120a020a02060b1501090003030b0b0108110b0b01081203030b0b0109000302070b0b010900030301030302070b0201090008090b636f696e5f627269646765076163636f756e740d6170746f735f6163636f756e740a6170746f735f636f696e04636f696e056572726f72056576656e740866726f6d5f626373066d6174683634067369676e657206737472696e67057461626c6509747970655f696e666f06766563746f7208656e64706f696e74056c7a6170700672656d6f7465057365726465057574696c73037a726f076c696d697465720842726964676555410a436c61696d4576656e7409436f696e53746f72650d436f696e5479706553746f726506436f6e6669670a4576656e7453746f72650c4c7a4361706162696c69747904506174680c526563656976654576656e740a52656d6f7465436f696e0953656e644576656e74166173736572745f726567697374657265645f636f696e0f6173736572745f756e70617573656414636865636b5f616461707465725f706172616d730a636c61696d5f636f696e166465636f64655f726563656976655f7061796c6f616404436f696e166465706f7369745f636f696e5f69665f6e65656465641c656e61626c655f637573746f6d5f616461707465725f706172616d7313656e636f64655f73656e645f7061796c6f61640e4d696e744361706162696c6974790e4275726e4361706162696c69747910467265657a654361706162696c697479156765745f636f696e5f6361706162696c69746965730b6765745f74766c735f7364136861735f636f696e5f726567697374657265640b696e69745f6d6f64756c651469735f76616c69645f72656d6f74655f636f696e056c643273640a6c7a5f726563656976650854797065496e666f106c7a5f726563656976655f74797065730971756f74655f66656506537472696e670d72656769737465725f636f696e0e72656d6f76655f647573745f6c64057364326c64094170746f73436f696e0973656e645f636f696e0e73656e645f636f696e5f66726f6d035a524f1273656e645f636f696e5f696e7465726e616c1273656e645f636f696e5f776974685f7a726f107365745f676c6f62616c5f70617573650f7365745f6c696d697465725f636170097365745f70617573650f7365745f72656d6f74655f636f696e1777697468647261775f636f696e5f69665f6e65656465640b64756d6d795f6669656c6409636f696e5f7479706508726563656976657209616d6f756e745f6c640a6c643273645f726174650c72656d6f74655f636f696e73055461626c650d72656d6f74655f636861696e7310636c61696d61626c655f616d745f6c64086d696e745f636170086275726e5f6361700a667265657a655f6361700b747970655f6c6f6f6b75700574797065730d7061757365645f676c6f62616c0c7061757365645f636f696e7315637573746f6d5f616461707465725f706172616d730b73656e645f6576656e74730b4576656e7448616e646c650e726563656976655f6576656e74730c636c61696d5f6576656e7473036361700c55614361706162696c6974790f72656d6f74655f636861696e5f69641072656d6f74655f636f696e5f616464720c7372635f636861696e5f696407737461736865640e72656d6f74655f616464726573730674766c5f73640b756e777261707061626c650c6473745f636861696e5f69640c6473745f726563656976657206756e77726170117065726d697373696f6e5f64656e6965640b756e617661696c61626c6507747970655f6f6608636f6e7461696e7306626f72726f77106173736572745f6761735f6c696d69740869735f656d70747910696e76616c69645f617267756d656e740a616464726573735f6f661569735f6163636f756e745f72656769737465726564087265676973746572096e6f745f666f756e640672656d6f7665046d696e74076465706f7369740a656d69745f6576656e740d6173736572745f6c656e6774680c766563746f725f736c6963650e646573657269616c697a655f75380761626f727465640f646573657269616c697a655f7536340576616c75650c64657374726f795f7a65726f0d6173736572745f7369676e65720c73657269616c697a655f75381073657269616c697a655f766563746f720d73657269616c697a655f7536340b72656769737465725f756104696e6974036e6577106e65775f6576656e745f68616e646c650a6173736572745f7531360d6173736572745f72656d6f74650a626f72726f775f6d75740a746f5f616464726573732163616e5f726563656976655f6469726563745f636f696e5f7472616e736665727317626f72726f775f6d75745f776974685f64656661756c740d6465706f7369745f636f696e730973696e676c65746f6e0e616c72656164795f6578697374730a696e697469616c697a6503706f77047a65726f0877697468647261770a7472795f696e73657274046275726e036765740d73656e645f776974685f7a726f07657874726163740b7365745f6c696d697465720675707365727403616464f22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa000000000000000000000000000000000000000000000000000000000000000154ad3d30af77b60d939ae356e6606de9a4da67583f02b962d2d3f2e481484e900308040000000000000003080100000000000000030806000000000000000308070000000000000003080d0000000000000003080800000000000000030805000000000000000308030000000000000003080a000000000000000308090000000000000003080b000000000000000308020000000000000003080c000000000000000308000000000000000002010002010103084a000000000000000201060520f22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa052000000000000000000000000000000000000000000000000000000000000000000520000000000000000000000000000000000000000000000000000000000000000105200000000000000000000000000000000000000000000000000000000000000003126170746f733a3a6d657461646174615f7631c9040e000000000000000019454252494447455f554e524547495354455245445f434f494e0001000000000000001b454252494447455f434f494e5f414c52454144595f4558495354530002000000000000001d454252494447455f52454d4f54455f434f494e5f4e4f545f464f554e4400030000000000000019454252494447455f494e56414c49445f434f494e5f5459504500040000000000000020454252494447455f434c41494d41424c455f434f494e5f4e4f545f464f554e440005000000000000001d454252494447455f494e56414c49445f434f494e5f444543494d414c530006000000000000001c454252494447455f434f494e5f4e4f545f554e575241505041424c450007000000000000001e454252494447455f494e53554646494349454e545f4c495155494449545900080000000000000017454252494447455f494e56414c49445f4144445245535300090000000000000016454252494447455f494e56414c49445f5349474e4552000a000000000000001b454252494447455f494e56414c49445f5041434b45545f54595045000b000000000000000e454252494447455f504155534544000c000000000000001e454252494447455f53454e44494e475f414d4f554e545f544f4f5f464557000d000000000000001e454252494447455f494e56414c49445f414441505445525f504152414d530000040971756f74655f6665650101000b6765745f74766c735f7364010100106c7a5f726563656976655f7479706573010100136861735f636f696e5f72656769737465726564010100000201450101020346080f4705480302020749034a0b13020308094c0a034d0b130205034e0b0c0109004f0b0d010900500b0e010900030202510b13020807080f520a080f0402035301540b1302080f015501050203560b1401080a580b14010808590b140108010602015a0b150108000702025c035d0a0208020546080f5e03470548035f01090203600a02610362010a020546080f6303640a0248036501021c000000000007380004030506070d111d270201000001041d2407122b040c010a01100014200409050e0b0101070a111e2738010c000a0110010a00380204210b0110010b0038031420041d0520070a111e2705230b0101020200000104001507122b04100214040d07120b00070f340b01060000000000000000112205140b0138040411051407041124270203010403020405253c380538060a0011250c040a04380720040c0b003808050e0b000107123c000c020a0237000a0438090417051c0b020107001128270a0236000a04380a0c010a01060000000000000000240426052b0b020107001128270a010b023701380b0c030a040b03380c07122a050f0538010b040b011201380d02040000002d290a00064900000000000000112d0a00060000000000000000060100000000000000380e0c010e01112f070e21040e05130b000107081130270a00060100000000000000062100000000000000380e0c050a00062100000000000000064100000000000000380e0c040b00064100000000000000064900000000000000380e0c020e0211310c030b050b040b030205000000000c0e01380f0600000000000000002404090b000b01380c050b0b013810020601040104320b0b000712113407122a040c020b010b020f0215020700000034220e00062000000000000000112d0e01062000000000000000112d402300000000000000000c050d05070f11350d050b0011360d050b0111360d050b0211370b03041931010c04051b31000c040b040c060d050b0611350b0502080100010238110b0007121134380507123d000c010a013701140a013702140b013703140209010001023929380507123d000c00400e00000000000000000c040600000000000000000c010a010a003704410e230424050f0a0037040a01420e0c020a0037050b021438110c030d040b03100a14440e0b01060100000000000000160c0105080b003704140b04020a010000000307123b00020b0000003b210a0038120c010a000a0138130a00113a0a000b0112062d060a000938140912042d040a003815401e000000000000000012032d030a000a0038160a0038170b00381812052d05020c01000102440c07123d0037050b0038110c020b010b02100b1421020d00000000040b000b011a020e01040402040506459301380538060a00113d07120a000a01113e07122b060c0c0a000b010a020b0c100c3819010e0211040c080c0e0c1007123c000c0a0a0a37050a00381a042005250b0a01070b1128270a0a36050a00381b0c0f0b100a0f100b1421043105380b0f010b0a0107071124270a0f100a140a08160b0f0f0a150b080a0a37061411130c070b0e11410c0d0a0d0713210450080c0305540a0d0714210c030b030459080c04055d0a0d0715210c040b040462080c06056f0a0d380720046b0a0d1142200c05056d090c050b050c060b060c110a110480010b0a36000a0d060000000000000000381c0c090a09140a07160b09150588010a070b0a3701380b0c0b0a0d0b0b381d07122a050f0e38010b000b0d0b070b111208381e020f010001034a110e02110401010c040b000b0412070c0307122b03100f0b03381f1438200210010000000807120b0007100b010b020b0311460211010401034c370a00071211343800200407050c0b0001070111472707110a0325041105160b000107061124270a000b010b020a030838210c070c060c0507122a030f103801441e0a00060a000000000000000b030711173411493822400e000000000000000038230b070b050b0639003f000b000b043824021201000102380d07123d000c010b000a013706141a0b0137061418021300000000040b000b0118021401000402040506170f0b000b010b020b0338250b040b050b0638260c080c070b0838270b070215010404020405064f240b0338280c0c0a000b0c38290c090a000b04382a0c0a0a000b05382b0c0e0b090b010b020b0a0b0e0b060b070b08382c0c0f0c0b0b0011250c0d0a0d0b0b382d0b0d0b0f382e021600000402040506518101380538060a01113d0e02062000000000000000112d07123c000c0a0a0a37050a01381a041005150b0a01070b1128270e00380f0c080a080a0a370614110d0c090a0906000000000000000024042305280b0a01070c1124270a09382f0a0a36050a01381b0c0f0a0f100a140a09260436053d0b0f010b0a0107031124270a0f100a140a09170a0f0f0a150b000b0a370238300a010e0611020a0504580a0f101114045305580b0f0107021124270b0f100b140a020b090a0511070c0e07122b060c0c07120a01114f0c0b0a010b0b0b0e0b030b040b060b070b0c100c38310c100c0d0107122a050f1238010b010b020b080b05120a38320b0d0b10021701000402040506551e0e00380f0c080e00380f38280c0a0a080a0a2404140d000b080b0a1738330c0907120b09380c0b000b010b020b030b040b050b060b07382c021801040104320b0b000712113407122a040c020b010b020f0015021901040000090b000712113438050b010b020b033834021a01040104000b0b0007121134380507122a040f0138010b013835021b0104020203582f0b00071211340a01113d0e02062000000000000000112d380507123c000c040a0437050a01381a20041305180b040107011124270a020600000000000000000b0312090c050a0436050a010b0538360b0436040a01440e07122a030f0f0b010b02120738013837021c0000001b0f0a010600000000000000002404090b000b0138290c02050d0b000138380c020b02020400040104020203020405020205020602020201090109000600020005010300030109020500031c041c061c071c081c091c0d1c00","abi":{"address":"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa","name":"coin_bridge","friends":[],"exposed_functions":[{"name":"claim_coin","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["&signer"],"return":[]},{"name":"enable_custom_adapter_params","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[],"params":["&signer","bool"],"return":[]},{"name":"get_coin_capabilities","visibility":"public","is_entry":false,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["&signer"],"return":["0x1::coin::MintCapability<T0>","0x1::coin::BurnCapability<T0>","0x1::coin::FreezeCapability<T0>"]},{"name":"get_tvls_sd","visibility":"public","is_entry":false,"is_view":true,"generic_type_params":[{"constraints":[]}],"params":[],"return":["vector<u64>","vector<u64>"]},{"name":"has_coin_registered","visibility":"public","is_entry":false,"is_view":true,"generic_type_params":[{"constraints":[]}],"params":[],"return":["bool"]},{"name":"is_valid_remote_coin","visibility":"public","is_entry":false,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["u64","vector<u8>"],"return":["bool"]},{"name":"lz_receive","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["u64","vector<u8>","vector<u8>"],"return":[]},{"name":"lz_receive_types","visibility":"public","is_entry":false,"is_view":true,"generic_type_params":[],"params":["u64","vector<u8>","vector<u8>"],"return":["vector<0x1::type_info::TypeInfo>"]},{"name":"quote_fee","visibility":"public","is_entry":false,"is_view":true,"generic_type_params":[],"params":["u64","bool","vector<u8>","vector<u8>"],"return":["u64","u64"]},{"name":"register_coin","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["&signer","0x1::string::String","0x1::string::String","u8","u64"],"return":[]},{"name":"remove_dust_ld","visibility":"public","is_entry":false,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["u64"],"return":["u64"]},{"name":"send_coin","visibility":"public","is_entry":false,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["0x1::coin::Coin<T0>","u64","vector<u8>","0x1::coin::Coin<0x1::aptos_coin::AptosCoin>","bool","vector<u8>","vector<u8>"],"return":["0x1::coin::Coin<0x1::aptos_coin::AptosCoin>"]},{"name":"send_coin_from","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["&signer","u64","vector<u8>","u64","u64","u64","bool","vector<u8>","vector<u8>"],"return":[]},{"name":"send_coin_with_zro","visibility":"public","is_entry":false,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["0x1::coin::Coin<T0>","u64","vector<u8>","0x1::coin::Coin<0x1::aptos_coin::AptosCoin>","0x1::coin::Coin<0x54ad3d30af77b60d939ae356e6606de9a4da67583f02b962d2d3f2e481484e90::zro::ZRO>","bool","vector<u8>","vector<u8>"],"return":["0x1::coin::Coin<0x1::aptos_coin::AptosCoin>","0x1::coin::Coin<0x54ad3d30af77b60d939ae356e6606de9a4da67583f02b962d2d3f2e481484e90::zro::ZRO>"]},{"name":"set_global_pause","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[],"params":["&signer","bool"],"return":[]},{"name":"set_limiter_cap","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["&signer","bool","u64","u64"],"return":[]},{"name":"set_pause","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["&signer","bool"],"return":[]},{"name":"set_remote_coin","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["&signer","u64","vector<u8>","bool"],"return":[]}],"structs":[{"name":"BridgeUA","is_native":false,"is_event":false,"abilities":[],"generic_type_params":[],"fields":[{"name":"dummy_field","type":"bool"}]},{"name":"ClaimEvent","is_native":false,"is_event":false,"abilities":["drop","store"],"generic_type_params":[],"fields":[{"name":"coin_type","type":"0x1::type_info::TypeInfo"},{"name":"receiver","type":"address"},{"name":"amount_ld","type":"u64"}]},{"name":"CoinStore","is_native":false,"is_event":false,"abilities":["key"],"generic_type_params":[{"constraints":[]}],"fields":[{"name":"ld2sd_rate","type":"u64"},{"name":"remote_coins","type":"0x1::table::Table<u64, 0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::coin_bridge::RemoteCoin>"},{"name":"remote_chains","type":"vector<u64>"},{"name":"claimable_amt_ld","type":"0x1::table::Table<address, u64>"},{"name":"mint_cap","type":"0x1::coin::MintCapability<T0>"},{"name":"burn_cap","type":"0x1::coin::BurnCapability<T0>"},{"name":"freeze_cap","type":"0x1::coin::FreezeCapability<T0>"}]},{"name":"CoinTypeStore","is_native":false,"is_event":false,"abilities":["key"],"generic_type_params":[],"fields":[{"name":"type_lookup","type":"0x1::table::Table<0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::coin_bridge::Path, 0x1::type_info::TypeInfo>"},{"name":"types","type":"vector<0x1::type_info::TypeInfo>"}]},{"name":"Config","is_native":false,"is_event":false,"abilities":["key"],"generic_type_params":[],"fields":[{"name":"paused_global","type":"bool"},{"name":"paused_coins","type":"0x1::table::Table<0x1::type_info::TypeInfo, bool>"},{"name":"custom_adapter_params","type":"bool"}]},{"name":"EventStore","is_native":false,"is_event":false,"abilities":["key"],"generic_type_params":[],"fields":[{"name":"send_events","type":"0x1::event::EventHandle<0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::coin_bridge::SendEvent>"},{"name":"receive_events","type":"0x1::event::EventHandle<0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::coin_bridge::ReceiveEvent>"},{"name":"claim_events","type":"0x1::event::EventHandle<0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::coin_bridge::ClaimEvent>"}]},{"name":"LzCapability","is_native":false,"is_event":false,"abilities":["key"],"generic_type_params":[],"fields":[{"name":"cap","type":"0x54ad3d30af77b60d939ae356e6606de9a4da67583f02b962d2d3f2e481484e90::endpoint::UaCapability<0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::coin_bridge::BridgeUA>"}]},{"name":"Path","is_native":false,"is_event":false,"abilities":["copy","drop"],"generic_type_params":[],"fields":[{"name":"remote_chain_id","type":"u64"},{"name":"remote_coin_addr","type":"vector<u8>"}]},{"name":"ReceiveEvent","is_native":false,"is_event":false,"abilities":["drop","store"],"generic_type_params":[],"fields":[{"name":"coin_type","type":"0x1::type_info::TypeInfo"},{"name":"src_chain_id","type":"u64"},{"name":"receiver","type":"address"},{"name":"amount_ld","type":"u64"},{"name":"stashed","type":"bool"}]},{"name":"RemoteCoin","is_native":false,"is_event":false,"abilities":["drop","store"],"generic_type_params":[],"fields":[{"name":"remote_address","type":"vector<u8>"},{"name":"tvl_sd","type":"u64"},{"name":"unwrappable","type":"bool"}]},{"name":"SendEvent","is_native":false,"is_event":false,"abilities":["drop","store"],"generic_type_params":[],"fields":[{"name":"coin_type","type":"0x1::type_info::TypeInfo"},{"name":"dst_chain_id","type":"u64"},{"name":"dst_receiver","type":"vector<u8>"},{"name":"amount_ld","type":"u64"},{"name":"unwrap","type":"bool"}]}]}}]`
	p, err := PayloadFromJsonAndAbi(payload, abiStr)
	assert.Nil(t, err)
	data, err := p.BcsSerialize()
	assert.Nil(t, err)
	expected := `02f22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa0b636f696e5f6272696467650e73656e645f636f696e5f66726f6d0107f22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa05617373657404555344540008086d000000000000002120000000000000000000000000fe8dc6394501a35ad1c4833f40f382e55dada4f3081027000000000000086ddd16000000000008000000000000000001000b0a000100000000000249f00100`
	assert.Equal(t, expected, hex.EncodeToString(data))

	//checkPayloadFromJsonAndAbiV2(t, payload, abiStr, expected)
}

const TransferScript = "0xa11ceb0b0700000a0701000a020a0a03141a042e040532240756870108dd01200000000100020003000403050701000102060b0003070304010801000803060001010903050001040a07050108010002030204060c050503010b000108010108010105010b0001090000010104060c0b000109000503076163636f756e740d6170746f735f6163636f756e740e66756e6769626c655f6173736574066f626a656374167072696d6172795f66756e6769626c655f73746f7265064f626a656374084d6574616461746111616464726573735f746f5f6f626a656374096578697374735f61740e6372656174655f6163636f756e74087472616e7366657200000000000000000000000000000000000000000000000000000000000000010000010f0b0138000c040a0211012004090a0211020b000b040b020b03380102"

func TestBuildScriptPayloadSerialized(t *testing.T) {
	scriptCode := `a11ceb0b060000000701000402040a030e0c041a04051e20073e30086e2000000001010204010001000308000104030401000105050601000002010203060c0305010b0001080101080102060c03010b0001090002050b00010900000a6170746f735f636f696e04636f696e04436f696e094170746f73436f696e087769746864726177076465706f7369740000000000000000000000000000000000000000000000000000000000000001000001080b000b0138000c030b020b03380102`
	var param = &ScriptParam{
		Code:     scriptCode,
		ArgTypes: []string{},
		Args:     []string{"010100000000000000", "030163f9f9f773f3b0e788559d9efcbe547889500d0891fe024e782c7224defd01"},
	}
	data, err := json.Marshal(param)
	assert.NoError(t, err)
	res, err := BuildScriptPayload(string(data))
	assert.NoError(t, err)
	data, err = bcs2.Serialize(res)
	assert.NoError(t, err)
	expected := `00bf01a11ceb0b060000000701000402040a030e0c041a04051e20073e30086e2000000001010204010001000308000104030401000105050601000002010203060c0305010b0001080101080102060c03010b0001090002050b00010900000a6170746f735f636f696e04636f696e04436f696e094170746f73436f696e087769746864726177076465706f7369740000000000000000000000000000000000000000000000000000000000000001000001080b000b0138000c030b020b033801020002010100000000000000030163f9f9f773f3b0e788559d9efcbe547889500d0891fe024e782c7224defd01`
	assert.Equal(t, expected, hex.EncodeToString(data))
}

func TestTransferWithFeePayer(t *testing.T) {
	from := "0xedc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28"
	to := "0xedc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28"
	amount := 1000
	sequenceNumber := 16
	maxGasAmount := 10000
	gasUnitPrice := 100
	expirationTimestampSecs := 1800312272 /*time.Now().Unix() + 300*/
	chainId := 2
	seedHex := "a4d06f3f5a1585cf171b4982003306b4eef0670a2eb5d5483427e2c22b602c9e"
	_, err := TransferWithFeePayer(from, uint64(sequenceNumber), uint64(maxGasAmount), uint64(gasUnitPrice), uint64(expirationTimestampSecs), uint8(chainId),
		to, uint64(amount), seedHex, v2.AccountZero.String())
	require.NoError(t, err)
}

func TestValidateContractAddress(t *testing.T) {
	assert.True(t, ValidateContractAddress("0x13d9d0cdc02debb99f7d8da33f19a0decbecaf4deb3312212b5db8e076739cc0::APSTONK::APSTONK"))
	assert.True(t, ValidateContractAddress("0x61d2c22a6cb7831bee0f48363b0eec92369357aece0d1142062f7d5d85c7bef8::lp_coin::LP<0x2bc0a49d3fdb0b0719cd34206f14e99e54d277e006e8204087d5eee87bd62049::APSO::Coin, 0x1::aptos_coin::AptosCoin, 0x163df34fccbf003ce219d3f1d9e70d140b60622cb9dd47599c25fb2f797ba6e::curves::Uncorrelated>"))
	assert.True(t, ValidateContractAddress("0"))
	assert.True(t, ValidateContractAddress("0x"))
	assert.True(t, ValidateContractAddress("0x0"))
	assert.True(t, ValidateContractAddress("0X61D2C22A6CB7831BEE0F48363B0EEC92369357AECE0D1142062F7D5D85C7BEF8"))
	assert.True(t, ValidateContractAddress("0X0"))
	assert.True(t, !ValidateContractAddress("0xg"))
}

func TestAddress2(t *testing.T) {
	addr := ShortenAddress("0x00000000000000000123")
	assert.Equal(t, "0x123", addr)
	addr = ExpandAddress(addr)
	assert.Equal(t, "0x0000000000000000000000000000000000000000000000000000000000000123", addr)
}

func TestAddress(t *testing.T) {
	addr := NewAddress("a4d06f3f5a1585cf171b4982003306b4eef0670a2eb5d5483427e2c22b602c9e", false)
	addr2 := NewAddress("a4d06f3f5a1585cf171b4982003306b4eef0670a2eb5d5483427e2c22b602c9e", true)

	ret := ValidateAddress(addr2, false)
	assert.True(t, ret)

	addr = ExpandAddress(addr)

	ret = ValidateAddress(addr, false)
	assert.True(t, ret)
}

func TestValidateAddress(t *testing.T) {
	ret := ValidateAddress("0xedc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28", false)
	assert.True(t, ret)

	ret = ValidateAddress("0xdc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28", false)
	assert.True(t, ret)

	ret = ValidateAddress("0xc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28", false)
	assert.False(t, ret)

	ret = ValidateAddress("0x0edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28", false)
	assert.True(t, ret)

	ret = ValidateAddress("0edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28", false)
	assert.True(t, ret)

	ret = ValidateAddress("edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28", false)
	assert.False(t, ret)

	ret = ValidateAddress("0edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd2k", false)
	assert.False(t, ret)

	ret = ValidateAddress(strings.ToUpper("0edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28"), false)
	assert.True(t, ret)
}

func TestTransfer(t *testing.T) {
	from := "0xedc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28"
	to := "0xedc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28"
	amount := 1000
	sequenceNumber := 1
	maxGasAmount := 10000
	gasUnitPrice := 100
	expirationTimestampSecs := 1700312272 /*time.Now().Unix() + 300*/
	chainId := 2
	seedHex := "a4d06f3f5a1585cf171b4982003306b4eef0670a2eb5d5483427e2c22b602c9e"
	data, err := Transfer(from, uint64(sequenceNumber), uint64(maxGasAmount), uint64(gasUnitPrice), uint64(expirationTimestampSecs), uint8(chainId),
		to, uint64(amount), seedHex)
	require.NoError(t, err)
	expected := "0edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd2801000000000000000200000000000000000000000000000000000000000000000000000000000000010d6170746f735f6163636f756e74087472616e736665720002200edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd2808e80300000000000010270000000000006400000000000000d0b4586500000000020020d2e3180441b6f4c21f836ee9096e8acfa3321e820242d0c36278309807c5563e40cc3d302c2f6d73b4d7e7d834c2036e6661d26655249643477258026ea28f9f9f4bf34661de14d78eef84a8e3ab847fc7bf51dbd6118f49e4ab5b487737468d0f"
	require.Equal(t, expected, data)
	hash := GetTransactionHash("8e6d339ff6096080a4d91c291b297d3814ff9daa34e0f5562d4e7d442cafecdc03000000000000000200000000000000000000000000000000000000000000000000000000000000010d6170746f735f6163636f756e74087472616e736665720002200163f9f9f773f3b0e788559d9efcbe547889500d0891fe024e782c7224defd0108e80300000000000010270000000000000100000000000000256c196300000000190020312a81c872aad3a910157ca7b05e70fe2e62aed55b4a14ad033db4556c1547dc401e3bfcb995b1a6ece6b89723721795fd1f46de7593e0f212625431cd727bee04256d03ccf140b16c7db484682f23d2b2620393bf480e0cabcce60f90d463440a")
	require.Equal(t, "0x504274d32b1da79753430ac1db83748a3a866bc57c46868db1ca794eb5d910e8", hash)
}

func TestCoinTransfer(t *testing.T) {
	from := "0xedc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28"
	to := "0xedc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28"
	amount := 1000
	sequenceNumber := 3
	maxGasAmount := 10000
	gasUnitPrice := 100
	expirationTimestampSecs := 1700312272
	chainId := 2
	seedHex := "a4d06f3f5a1585cf171b4982003306b4eef0670a2eb5d5483427e2c22b602c9e"
	payload, err := CoinTransferPayload(to, uint64(amount), "0xcb95e54bf4baa46bfc6748ef979edca6199a923df3d0757d896a7dc93514a19b::moon_coin::MoonCoin")
	require.NoError(t, err)
	data, err := BuildSignedTransaction(from, uint64(sequenceNumber), uint64(maxGasAmount), uint64(gasUnitPrice), uint64(expirationTimestampSecs), uint8(chainId), payload, seedHex)
	require.NoError(t, err)
	expected := "0edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28030000000000000002000000000000000000000000000000000000000000000000000000000000000104636f696e087472616e736665720107cb95e54bf4baa46bfc6748ef979edca6199a923df3d0757d896a7dc93514a19b096d6f6f6e5f636f696e084d6f6f6e436f696e0002200edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd2808e80300000000000010270000000000006400000000000000d0b4586500000000020020d2e3180441b6f4c21f836ee9096e8acfa3321e820242d0c36278309807c5563e40ce1369df58e3cca1f9219c722f0e64fa03e4c4ace1e046e8e80841988bf52d38ab68d5954f17e59ea78f8710d536b61ea38b18887e463d335ad6dcc6d3e56b04"
	require.Equal(t, expected, data)
}

func TestCoinRegister(t *testing.T) {
	from := "0xedc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28"
	to := "0xedc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28"
	amount := 1000
	sequenceNumber := 2
	maxGasAmount := 10000
	gasUnitPrice := 100
	expirationTimestampSecs := 1700312272
	chainId := 2
	seedHex := "a4d06f3f5a1585cf171b4982003306b4eef0670a2eb5d5483427e2c22b602c9e"
	payload, err := CoinTransferPayload(to, uint64(amount), "0x3::moon_coin::MoonCoin")
	require.NoError(t, err)
	data, err := BuildSignedTransaction(from, uint64(sequenceNumber), uint64(maxGasAmount), uint64(gasUnitPrice), uint64(expirationTimestampSecs), uint8(chainId), payload, seedHex)
	require.NoError(t, err)
	expected := "0edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28020000000000000002000000000000000000000000000000000000000000000000000000000000000104636f696e087472616e7366657201070000000000000000000000000000000000000000000000000000000000000003096d6f6f6e5f636f696e084d6f6f6e436f696e0002200edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd2808e80300000000000010270000000000006400000000000000d0b4586500000000020020d2e3180441b6f4c21f836ee9096e8acfa3321e820242d0c36278309807c5563e404b7c0645a3e3518744e4d75ec0a4b15e8d282bb450d39fc104d261f8823c001c3f8f447dad8093f53d6d374f137b71924f2378b1f87527ef2d9546f6f8fa5a04"
	require.Equal(t, expected, data)
}

func TestPayloadFromJsonAndAbi(t *testing.T) {

	//payload := "{\"function\":\"0xbbefaf1bea0f833d47381c990017326aa363478a1e5f9351b62635a0b15da794::router::bridgeTo\",\"type_arguments\":[\"0xbc954a7df993344c9fec9aaccdf96673a897025119fc38a8e0f637598496b47a::test_mint_weth_coin::TestMintCoin\"],\"arguments\":[1,\"1000000\",\"5\",\"0xf9ac85635c0fa7b6317b48dc19613e9e4356c469\",\"1765394084113\"],\"type\":\"entry_function_payload\"}"
	payload := "{\"function\":\"0xbbefaf1bea0f833d47381c990017326aa363478a1e5f9351b62635a0b15da794::router::bridgeTo\",\"type_arguments\":[\"0xbc954a7df993344c9fec9aaccdf96673a897025119fc38a8e0f637598496b47a::test_mint_weth_coin::TestMintCoin\"],\"arguments\":[1,\"1000000\",\"5\",\"0xf9ac85635c0fa7b6317b48dc19613e9e4356c469\",\"1765394084113\"],\"type\":\"entry_function_payload\"}"
	abi := "[{\"bytecode\":\"\",\"abi\":{\"address\":\"0xbbefaf1bea0f833d47381c990017326aa363478a1e5f9351b62635a0b15da794\",\"name\":\"router\",\"friends\":[],\"exposed_functions\":[{\"name\":\"bridgeTo\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"u8\",\"u64\",\"u64\",\"vector<u8>\",\"u64\"],\"return\":[]}],\"structs\":[]}}]"

	p, err := PayloadFromJsonAndAbi(payload, abi)
	require.NoError(t, err)
	bytes, _ := p.BcsSerialize()
	expected := "02bbefaf1bea0f833d47381c990017326aa363478a1e5f9351b62635a0b15da79406726f7574657208627269646765546f0107bc954a7df993344c9fec9aaccdf96673a897025119fc38a8e0f637598496b47a13746573745f6d696e745f776574685f636f696e0c546573744d696e74436f696e000501010840420f00000000000805000000000000001514f9ac85635c0fa7b6317b48dc19613e9e4356c4690811f1af099b010000"
	require.Equal(t, expected, hex.EncodeToString(bytes))

	//todo, it can not success, but old can success
	//checkPayloadFromJsonAndAbiV2(t, payload, abi, expected)
}

func TestAbi2(t *testing.T) {
	payload := "{\"function\":\"0xcb95e54bf4baa46bfc6748ef979edca6199a923df3d0757d896a7dc93514a19b::aggregator::unxswap\",\"type_arguments\":[\"0x1::aptos_coin::AptosCoin\",\"0x43417434fd869edee76cca2a4d2301e528a1551b1d719b75c350c3c97d15b8b9::coins::BTC\",\"0x43417434fd869edee76cca2a4d2301e528a1551b1d719b75c350c3c97d15b8b9::coins::USDT\",\"0x1::aptos_coin::AptosCoin\",\"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12::curves::Uncorrelated\",\"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12::curves::Uncorrelated\",\"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12::curves::Uncorrelated\"],\"arguments\":[\"1000000\",\"0\",\"0x030303\",[\"0\",\"0\",\"0\"],[true,false,true]],\"type\":\"entry_function_payload\"}"
	abi := "[{\"bytecode\":\"\",\"abi\":{\"address\":\"0xcb95e54bf4baa46bfc6748ef979edca6199a923df3d0757d896a7dc93514a19b\",\"name\":\"aggregator\",\"friends\":[],\"exposed_functions\":[{\"name\":\"get_intermediate_output\",\"visibility\":\"public\",\"is_entry\":false,\"generic_type_params\":[{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]}],\"params\":[\"&signer\",\"u8\",\"u64\",\"bool\",\"0x1::coin::Coin<T0>\"],\"return\":[\"0x1::option::Option<0x1::coin::Coin<T0>>\",\"0x1::coin::Coin<T1>\"]},{\"name\":\"init_router\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[],\"params\":[\"&signer\"],\"return\":[]},{\"name\":\"one_step_internal\",\"visibility\":\"public\",\"is_entry\":false,\"generic_type_params\":[{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]}],\"params\":[\"&signer\",\"u8\",\"u64\",\"bool\",\"0x1::coin::Coin<T0>\"],\"return\":[\"0x1::option::Option<0x1::coin::Coin<T0>>\",\"0x1::coin::Coin<T1>\"]},{\"name\":\"public_unxswap\",\"visibility\":\"public\",\"is_entry\":false,\"generic_type_params\":[{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]}],\"params\":[\"&signer\",\"u64\",\"u64\",\"vector<u8>\",\"vector<u64>\",\"vector<bool>\"],\"return\":[\"u64\"]},{\"name\":\"three_step_direct\",\"visibility\":\"public\",\"is_entry\":false,\"generic_type_params\":[{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]}],\"params\":[\"&signer\",\"u8\",\"u64\",\"bool\",\"u8\",\"u64\",\"bool\",\"u8\",\"u64\",\"bool\",\"0x1::coin::Coin<T0>\"],\"return\":[\"0x1::option::Option<0x1::coin::Coin<T0>>\",\"0x1::option::Option<0x1::coin::Coin<T1>>\",\"0x1::option::Option<0x1::coin::Coin<T2>>\",\"0x1::coin::Coin<T3>\"]},{\"name\":\"two_step_direct\",\"visibility\":\"public\",\"is_entry\":false,\"generic_type_params\":[{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]}],\"params\":[\"&signer\",\"u8\",\"u64\",\"bool\",\"u8\",\"u64\",\"bool\",\"0x1::coin::Coin<T0>\"],\"return\":[\"0x1::option::Option<0x1::coin::Coin<T0>>\",\"0x1::option::Option<0x1::coin::Coin<T1>>\",\"0x1::coin::Coin<T2>\"]},{\"name\":\"unxswap\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]},{\"constraints\":[]}],\"params\":[\"&signer\",\"u64\",\"u64\",\"vector<u8>\",\"vector<u64>\",\"vector<bool>\"],\"return\":[]}],\"structs\":[{\"name\":\"EventEntity\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"swap_step_events\",\"type\":\"0x1::event::EventHandle<0xcb95e54bf4baa46bfc6748ef979edca6199a923df3d0757d896a7dc93514a19b::aggregator::SwapHipEvent>\"}]},{\"name\":\"Hip\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"dex_type\",\"type\":\"u8\"},{\"name\":\"pool_type\",\"type\":\"u64\"},{\"name\":\"is_x_to_y\",\"type\":\"bool\"}]},{\"name\":\"SwapHipEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"dex_type\",\"type\":\"u8\"},{\"name\":\"pool_type\",\"type\":\"u64\"},{\"name\":\"x_type_info\",\"type\":\"0x1::type_info::TypeInfo\"},{\"name\":\"y_type_info\",\"type\":\"0x1::type_info::TypeInfo\"},{\"name\":\"input_amount\",\"type\":\"u64\"},{\"name\":\"output_amount\",\"type\":\"u64\"},{\"name\":\"time_stamp\",\"type\":\"u64\"}]}]}}]"

	p, err := PayloadFromJsonAndAbi(payload, abi)
	require.NoError(t, err)
	bytes, _ := p.BcsSerialize()
	expected := "02cb95e54bf4baa46bfc6748ef979edca6199a923df3d0757d896a7dc93514a19b0a61676772656761746f7207756e7873776170070700000000000000000000000000000000000000000000000000000000000000010a6170746f735f636f696e094170746f73436f696e000743417434fd869edee76cca2a4d2301e528a1551b1d719b75c350c3c97d15b8b905636f696e7303425443000743417434fd869edee76cca2a4d2301e528a1551b1d719b75c350c3c97d15b8b905636f696e730455534454000700000000000000000000000000000000000000000000000000000000000000010a6170746f735f636f696e094170746f73436f696e0007190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12066375727665730c556e636f7272656c617465640007190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12066375727665730c556e636f7272656c617465640007190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12066375727665730c556e636f7272656c6174656400050840420f0000000000080000000000000000040303030319030000000000000000000000000000000000000000000000000403010001"
	require.Equal(t, expected, hex.EncodeToString(bytes))

	//todo, it can not success, but old can success
	//p2, err := PayloadFromJsonAndAbiV2(payload, abi)
	//assert.Nil(t, err)
	//p2Data, err := bcs2.Serialize(p2)
	//assert.Nil(t, err)
	//assert.Equal(t, expected, hex.EncodeToString(p2Data))
}

func TestEncode(t *testing.T) {
	ii := big.Int{}
	ii.SetString("123", 10)
	low := big.Int{}
	a := big.NewInt(0).Exp(big.NewInt(2), big.NewInt(64), nil)
	low.And(&ii, a.Sub(a, big.NewInt(1)))
	high := big.Int{}
	high.Rsh(&ii, 64)

	iii := serde.Uint128{
		High: high.Uint64(),
		Low:  low.Uint64(),
	}
	bytes, _ := aptos_types.BcsSerializeU128(iii)
	expected := "7b000000000000000000000000000000"
	assert.Equal(t, expected, hex.EncodeToString(bytes))
}

func TestRegisterCoin(t *testing.T) {
	from := "0xedc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28"
	sequenceNumber := uint64(2)
	maxGasAmount := uint64(10000)
	gasUnitPrice := uint64(100)
	expirationTimestampSecs := uint64(1700312272)
	chainId := uint8(2)
	seedHex := "a4d06f3f5a1585cf171b4982003306b4eef0670a2eb5d5483427e2c22b602c9e"
	tyArg := "0xcb95e54bf4baa46bfc6748ef979edca6199a923df3d0757d896a7dc93514a19b::moon_coin::MoonCoin"
	payload, err := CoinRegisterPayload(tyArg)
	require.NoError(t, err)
	tx, err := BuildSignedTransaction(from, sequenceNumber, maxGasAmount, gasUnitPrice, expirationTimestampSecs, chainId, payload, seedHex)
	require.NoError(t, err)
	expected := "0edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd2802000000000000000200000000000000000000000000000000000000000000000000000000000000010c6d616e616765645f636f696e0872656769737465720107cb95e54bf4baa46bfc6748ef979edca6199a923df3d0757d896a7dc93514a19b096d6f6f6e5f636f696e084d6f6f6e436f696e000010270000000000006400000000000000d0b4586500000000020020d2e3180441b6f4c21f836ee9096e8acfa3321e820242d0c36278309807c5563e408612ebe9a5ccf64e3f086f1987383dbe64022715982126e516bcb63439a314fc926f3176c66d723cea7a47f588ce0d1195ff30ebd85db8c86e41c45525c05d0f"
	require.Equal(t, expected, tx)
}

func TestBcsSerialize_TransactionPayload(t *testing.T) {
	// 0x3::moon_coin::MoonCoin  addresshex + module + struct
	tyArg := "0x5e603a89cf690d7134cf2f24fdb16ba90c4f5686333721c12e835fb6c76bc7ba::moon_coin::MoonCoin"
	p1, err := CoinRegisterPayload(tyArg)
	require.NoError(t, err)
	p2, err := CoinBurnPayload(1, tyArg)
	require.NoError(t, err)
	p3, err := CoinMintPayload("0x8e6d339ff6096080a4d91c291b297d3814ff9daa34e0f5562d4e7d442cafecdc", 1, tyArg)
	require.NoError(t, err)
	p4, err := CoinTransferPayload("0x8e6d339ff6096080a4d91c291b297d3814ff9daa34e0f5562d4e7d442cafecdc", 1, tyArg)
	require.NoError(t, err)
	p5 := OfferNFTTokenPayload(
		"0xedc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28",
		"0xedc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28",
		"collect_test",
		"nft_test",
		1,
		1,
	)
	p6 := ClaimNFTTokenPayload(
		"0xedc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28",
		"0xedc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28",
		"collect_test",
		"nft_test",
		1,
	)
	pb1, _ := p1.BcsSerialize()
	pb2, _ := p2.BcsSerialize()
	pb3, _ := p3.BcsSerialize()
	pb4, _ := p4.BcsSerialize()
	pb5, _ := p5.BcsSerialize()
	pb6, _ := p6.BcsSerialize()
	e1 := "0200000000000000000000000000000000000000000000000000000000000000010c6d616e616765645f636f696e08726567697374657201075e603a89cf690d7134cf2f24fdb16ba90c4f5686333721c12e835fb6c76bc7ba096d6f6f6e5f636f696e084d6f6f6e436f696e0000"
	e2 := "0200000000000000000000000000000000000000000000000000000000000000010c6d616e616765645f636f696e046275726e01075e603a89cf690d7134cf2f24fdb16ba90c4f5686333721c12e835fb6c76bc7ba096d6f6f6e5f636f696e084d6f6f6e436f696e0001080100000000000000"
	e3 := "0200000000000000000000000000000000000000000000000000000000000000010c6d616e616765645f636f696e046d696e7401075e603a89cf690d7134cf2f24fdb16ba90c4f5686333721c12e835fb6c76bc7ba096d6f6f6e5f636f696e084d6f6f6e436f696e0002208e6d339ff6096080a4d91c291b297d3814ff9daa34e0f5562d4e7d442cafecdc080100000000000000"
	e4 := "02000000000000000000000000000000000000000000000000000000000000000104636f696e087472616e7366657201075e603a89cf690d7134cf2f24fdb16ba90c4f5686333721c12e835fb6c76bc7ba096d6f6f6e5f636f696e084d6f6f6e436f696e0002208e6d339ff6096080a4d91c291b297d3814ff9daa34e0f5562d4e7d442cafecdc080100000000000000"
	e5 := "0200000000000000000000000000000000000000000000000000000000000000030f746f6b656e5f7472616e73666572730c6f666665725f7363726970740006200edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28200edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd280d0c636f6c6c6563745f7465737409086e66745f74657374080100000000000000080100000000000000"
	e6 := "0200000000000000000000000000000000000000000000000000000000000000030f746f6b656e5f7472616e73666572730c636c61696d5f7363726970740005200edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28200edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd280d0c636f6c6c6563745f7465737409086e66745f74657374080100000000000000"

	require.Equal(t, e1, hex.EncodeToString(pb1))
	require.Equal(t, e2, hex.EncodeToString(pb2))
	require.Equal(t, e3, hex.EncodeToString(pb3))
	require.Equal(t, e4, hex.EncodeToString(pb4))
	require.Equal(t, e5, hex.EncodeToString(pb5))
	require.Equal(t, e6, hex.EncodeToString(pb6))
}

func TestPayloadFromJsonAndAbi_Dex(t *testing.T) {
	from := "0xedc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28"
	sequenceNumber := 3
	maxGasAmount := 10000
	gasUnitPrice := 100
	expirationTimestampSecs := 1700312272
	chainId := 2
	seedHex := "a4d06f3f5a1585cf171b4982003306b4eef0670a2eb5d5483427e2c22b602c9e"
	payload := "{\"function\":\"0x1::managed_coin::register\",\"arguments\":[],\"type\":\"entry_function_payload\",\"type_arguments\":[\"\"]}"
	abi := "[{\"abi\":{\"address\":\"0x1\",\"name\":\"managed_coin\",\"friends\":[],\"exposed_functions\":[{\"name\":\"register\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\"],\"return\":[]}],\"structs\":[{\"name\":\"Capabilities\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"burn_cap\",\"type\":\"0x1::coin::BurnCapability<T0>\"},{\"name\":\"freeze_cap\",\"type\":\"0x1::coin::FreezeCapability<T0>\"},{\"name\":\"mint_cap\",\"type\":\"0x1::coin::MintCapability<T0>\"}]}]}}\n]"
	abiPayload, err := PayloadFromJsonAndAbi(payload, abi)

	require.NoError(t, err)
	data, err := BuildSignedTransaction(from, uint64(sequenceNumber), uint64(maxGasAmount), uint64(gasUnitPrice), uint64(expirationTimestampSecs), uint8(chainId), abiPayload, seedHex)
	require.NoError(t, err)
	expected := "0edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd2803000000000000000200000000000000000000000000000000000000000000000000000000000000010c6d616e616765645f636f696e087265676973746572000010270000000000006400000000000000d0b4586500000000020020d2e3180441b6f4c21f836ee9096e8acfa3321e820242d0c36278309807c5563e4008b5699fe36862d5b748dc04896ec52832eab23e95fb2f909c82a59ad66a6e9737ae590856c5e681c8e09a43133c134404b4d28f53abe4d4185e969742325f03"
	require.Equal(t, expected, data)

	ser := bcs.NewSerializer()
	abiPayload.Serialize(ser)
	checkPayloadFromJsonAndAbiV2(t, payload, abi, hex.EncodeToString(ser.GetBytes()))
	return
	const payload2 = "{\"type\":\"entry_function_payload\",\"function\":\"0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::batch_buy_script\",\"type_arguments\":[\"0x1::aptos_coin::AptosCoin\"],\"arguments\":[[\"0x2ba03b661d7691b41053dcf293caff2c17283b19cb4abe866b4855e8f6683771\"],[\"Lala Cat\"],[\"Lala is my daughter #11\"],[\"0\"],[\"1\"],[\"5000000\"],[\"0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4\"],[\"souffle\"]]}"
	const abi2 = "[{\"bytecode\":\"0xa11ceb0b050000000e010016021644035ac401049e022605c402f80207bc05b10708ed0c6006cd0d4610930e87040a9a12520bec12040cf012c9060db919100ec9190a0000010101020103010401050106010701080109020a000b06010001000c0400000d0600000e08010001000f0800001006000a1107000a130400061607000924070007260402030100010428040106010235040100010a36070000120001010000140201000015030401000017050101000018060101000019060100001a07010100001b000800001c090800052d060b00072e0e04020300032f0f0f00073010110203000a31120100073210150203000a33160100073417010203000a371a1b0002380b0f010003390f0f000a3a1b1c000a3b1d0f000a3c1d0f000a3d1d0b00023e1e1f0100023f20010100094001210100044123010106074201250203040143062701060a4400080003450f0f000846010f000a472b0f000a482c08000a0d0c0d0a140e141014120c0e0d180c190c1a0c1b221c0d1d261d221c14040c100d1b260c1403060c0806030004060c080608070302050806010108060c03050508080808030301060c08060c050808080803030303010807030508060305070b0a0208060b000109000806070b0a0208060b0001090005080701050109000208060b0001090002060b0a02090009010900010302070b0a0209000901090001090102060c080705070b0a020806080108060708070801070b0a020806080102080608010107090102070807080703070b0a02090009010900090101060b030109000e030b0c0109000b0c0109000503080d0303050806070b03010900070b000109000807030405080808080301080601080d0106080d02060c03010b0c01090002050b0c01090001080901080502070b0b010900090002050b03010900010b0a0209000901010802010b0b0109000205080407070b0a0208060b000109000806070b0b010802070b0a0208060b000109000b000109000807080606070b0a0208060801080608070708010807070b0a02080608010106080702070807030f746f6b656e5f636f696e5f73776170076163636f756e7404636f696e056572726f72056576656e74067369676e657206737472696e67057461626c650974696d657374616d7009747970655f696e666f05746f6b656e0d546f6b656e436f696e537761700b546f6b656e457363726f7711546f6b656e4c697374696e674576656e740d546f6b656e4c697374696e677310546f6b656e53746f7265457363726f770e546f6b656e537761704576656e7407546f6b656e49641463616e63656c5f746f6b656e5f6c697374696e6705546f6b656e176465706f7369745f746f6b656e5f746f5f657363726f7712646f65735f6c697374696e675f657869737406537472696e671765786368616e67655f636f696e5f666f725f746f6b656e18696e697469616c697a655f746f6b656e5f6c697374696e671d696e697469616c697a655f746f6b656e5f73746f72655f657363726f77136c6973745f746f6b656e5f666f725f737761701a77697468647261775f746f6b656e5f66726f6d5f657363726f772377697468647261775f746f6b656e5f66726f6d5f657363726f775f696e7465726e616c0c746f6b656e5f616d6f756e74136d696e5f70726963655f7065725f746f6b656e116c6f636b65645f756e74696c5f7365637308746f6b656e5f696406616d6f756e74096d696e5f70726963650e636f696e5f747970655f696e666f0854797065496e666f086c697374696e6773055461626c650e6c697374696e675f6576656e74730b4576656e7448616e646c650b737761705f6576656e74730d746f6b656e5f657363726f77730b746f6b656e5f62757965720b636f696e5f616d6f756e740a616464726573735f6f6608636f6e7461696e73096e6f745f666f756e640672656d6f76650d6465706f7369745f746f6b656e0a626f72726f775f6d7574056d657267650361646404436f696e07526f79616c7479136372656174655f746f6b656e5f69645f7261770762616c616e636510696e76616c69645f617267756d656e740b6765745f726f79616c7479176765745f726f79616c74795f64656e6f6d696e61746f72156765745f726f79616c74795f6e756d657261746f72116765745f726f79616c74795f7061796565087769746864726177076465706f73697407747970655f6f660a656d69745f6576656e74036e6577106e65775f6576656e745f68616e646c650e77697468647261775f746f6b656e0e616c72656164795f6578697374730b6e6f775f7365636f6e6473106765745f746f6b656e5f616d6f756e740573706c6974f6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d40000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000303080700000000000000030801000000000000000308060000000000000003080400000000000000030802000000000000000308050000000000000003080300000000000000126170746f733a3a6d657461646174615f7630f2030701000000000000001545544f4b454e5f414c52454144595f4c495354454414546f6b656e20616c7265616479206c697374656402000000000000001845544f4b454e5f4c495354494e475f4e4f545f45584953541e546f6b656e206c697374696e67206e6f206c6f6e6765722065786973747303000000000000001445544f4b454e5f4e4f545f494e5f455343524f5716546f6b656e206973206e6f7420696e20657363726f7704000000000000003345544f4b454e5f43414e4e4f545f4d4f56455f4f55545f4f465f455343524f575f4245464f52455f4c4f434b55505f54494d453a546f6b656e2063616e6e6f74206265206d6f766564206f7574206f6620657363726f77206265666f726520746865206c6f636b75702074696d6505000000000000001a45544f4b454e5f4d494e5f50524943455f4e4f545f4d415443482b546f6b656e2062757920707269636520646f65736e2774206d61746368206c697374696e6720707269636506000000000000001745544f4b454e5f414d4f554e545f4e4f545f4d415443482d546f6b656e2062757920616d6f756e7420646f65736e2774206d61746368206c697374696e6720616d6f756e74070000000000000010454e4f545f454e4f5547485f434f494e1c4e6f7420656e6f75676820636f696e20746f2062757920746f6b656e0002021d031e030102020a08071f03020205200806210322031f03230809030203250b0a0208060b00010900270b0b010802290b0b0108050402012a0b0a02080608010502052008062b051d032c03230809030c000c0001000203040a240a0011090c060b063c0036000c050a050a010c040c030b032e0b04380003170b00010b05010704110b270b050a013801010a000b010b0211070c070b000b07110d02010100010413210b0011092a040f010c080a080a010c050c040b042e0b053802030f05180b080b0138030f020c060b060b02110f05200b020b0312010c070b080b010b07380402020100010318080b003d000c020b0237000b0138000203010002030419a5010b030b040b050b0611110c110a0011090c0b0a023c000c120a1237000a11380003180b12010b00010704110b270a0b38050a012603240b12010b000107001113270a1236000a1138060c130a133701140a07180b0125033a0b13010b12010b000107051113270a133702140a072603490b13010b12010b000107021113270a020a110a0711080c140a000b14110d0a1111140c0d0a133701140a07180c150e0d11150c0e0b0e06000000000000000021036205650600000000000000000c08056d0a150e0d1116180e0d11151a0c080b080c0f0a150a0f170c0c0e0d11170c100a000b0f38070c090b100b0938080b000b0c38070c0a0b020b0a38080a133702140a0721038b010593010b13010a1236000a11380101059b010a133702140a07170b133602150b1236030b110b0b0b070b1538091205380a020400000024160a0011090c010b013b002003080513380b0a00380c0a00380d39000c020b000b023f0005150b0001020500000028120a0011090c010b012904200308050f380e12040c020b000b022d0405110b00010206010402030429400b010b020b030b0411110c0e0a0011050a000a0e0a05111e0c0d0a000a0e0b0d0a0711010a00380f0a050a0639010c0c0a0011093c0036000c0b0a0b0a0e0c090c080b082e0b09380020032e0b00010b0b010701111f270b0b0a0e0b0c38100b0011093c0036040c0a0b0a0b0e0b050b060b0738091202381102070100010401060b0011090b010b0211080208000001042a3e0b002a040f010c080a080a010c040c030b032e0b04380203120b08010706110b270a080a0138030c0611200a061007142403230b08010b060107031113270a020a061002112121032a05350b06010b080b0138121301010c070b070c05053c0b08010b060f020b0211220c050b050203000400010000010000030203010101000c030c040c050c060c00\",\"abi\":{\"address\":\"0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4\",\"name\":\"token_coin_swap\",\"friends\":[],\"exposed_functions\":[{\"name\":\"cancel_token_listing\",\"visibility\":\"public\",\"is_entry\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x3::token::TokenId\",\"u64\"],\"return\":[]},{\"name\":\"deposit_token_to_escrow\",\"visibility\":\"public\",\"is_entry\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x3::token::TokenId\",\"0x3::token::Token\",\"u64\"],\"return\":[]},{\"name\":\"does_listing_exist\",\"visibility\":\"public\",\"is_entry\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"address\",\"0x3::token::TokenId\"],\"return\":[\"bool\"]},{\"name\":\"exchange_coin_for_token\",\"visibility\":\"public\",\"is_entry\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"u64\",\"address\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"u64\"],\"return\":[]},{\"name\":\"list_token_for_swap\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"u64\",\"u64\",\"u64\"],\"return\":[]},{\"name\":\"withdraw_token_from_escrow\",\"visibility\":\"public\",\"is_entry\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x3::token::TokenId\",\"u64\"],\"return\":[\"0x3::token::Token\"]}],\"structs\":[{\"name\":\"TokenCoinSwap\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"token_amount\",\"type\":\"u64\"},{\"name\":\"min_price_per_token\",\"type\":\"u64\"}]},{\"name\":\"TokenEscrow\",\"is_native\":false,\"abilities\":[\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"token\",\"type\":\"0x3::token::Token\"},{\"name\":\"locked_until_secs\",\"type\":\"u64\"}]},{\"name\":\"TokenListingEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"token_id\",\"type\":\"0x3::token::TokenId\"},{\"name\":\"amount\",\"type\":\"u64\"},{\"name\":\"min_price\",\"type\":\"u64\"},{\"name\":\"locked_until_secs\",\"type\":\"u64\"},{\"name\":\"coin_type_info\",\"type\":\"0x1::type_info::TypeInfo\"}]},{\"name\":\"TokenListings\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"listings\",\"type\":\"0x1::table::Table<0x3::token::TokenId, 0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::token_coin_swap::TokenCoinSwap<T0>>\"},{\"name\":\"listing_events\",\"type\":\"0x1::event::EventHandle<0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::token_coin_swap::TokenListingEvent>\"},{\"name\":\"swap_events\",\"type\":\"0x1::event::EventHandle<0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::token_coin_swap::TokenSwapEvent>\"}]},{\"name\":\"TokenStoreEscrow\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"token_escrows\",\"type\":\"0x1::table::Table<0x3::token::TokenId, 0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::token_coin_swap::TokenEscrow>\"}]},{\"name\":\"TokenSwapEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"token_id\",\"type\":\"0x3::token::TokenId\"},{\"name\":\"token_buyer\",\"type\":\"address\"},{\"name\":\"token_amount\",\"type\":\"u64\"},{\"name\":\"coin_amount\",\"type\":\"u64\"},{\"name\":\"coin_type_info\",\"type\":\"0x1::type_info::TypeInfo\"}]}]}},{\"bytecode\":\"0xa11ceb0b050000000e01001a021a6a038401b40204b8034a058204df0507e1099a0a08fb136006db143710921580010a9216ac010bbe17120cd0178d0f0ddd261a0ef726160000010101020103010401050106010701080109020a020b000b000c0f00000d06010001000e06010001000f0601000100100601000100110701000100120701000100130801000100140800001506010001001608010001081807000a1f0700022e0700093a040203010001053c04010601014106000348040100010a4907000a5e04000017000100001902010100001a03010100001b04010100001c04010100001d05010100001e0601010000200701010000210801010000220901010000230a01010000240b0c010000250d0e010000260f1000002711120100002813010100002909010100002a14010100002b0a010100002c150101000744170f00024501180002461901000a471c1d000c4a23010100094b25260203000a4c1d27000a4d280e000a4e280e00034f292a010003502b01010009512c2d02030005522f0101060c53310101000a5432010001553738000a5617010003570f1201000658170101000959013a020304015a173c0106095b2512020300045c0e0e0009463e01020300015d4110000a5f3144000a604501000c61460101000b62111201000b533101010009632c4902030003640f0e010003654b0101000e1e061e0b1e071e091e0f1e181e19240c1e1d1e1e1e1f24202e051e211e2033251e261e2739283b283d2833282e272429392b39203b193929242f1e2b24203d301e311e3239331e341e02060c0a050009060c0a050a080b0a080b0a030a030a030a050a080b08060c0a050a080b0a080b0a030a030a050a080b0a060c0a050a080b0a080b0a030a030a030a030a050a080b08060c05080b080b0303030b0601090009060c05080b080b03030305080b04060c080c0b060109000308060c05080b080b030305080b0a060c05080b080b0303030305080b04060c0305080b0205080b010b0601090002050b0601090001030105010c0205080c010109060c05080b080b030303030b0601090007060c05080b080b03030b0601090003060c05080b0507080d050605030301060c01080d0207080d050b060306080b06050303060506080b06080b06030603080c01080b0405080b080b0301080c0109000b06080b0605030306050b0601090006080b06080b06030603080c0b060306080b060503030603060506080b06080b060306030c06080b06050303060306050b0601090006080b060306080b060306031103030b11010900030305070b0701090003030c08120303070b0a010900080c050308060c030505080b080b030302080c0b0901090002060b0e02090009010900010609010108120106081202060c03010b1101090002050b1101090002070b0e02090009010900010901010b0101090002070b0f01090009000405070b070109000c070b0a01090003060c080c0304060c060c080c03010b02010900020b06010900080c030b060109000b06010900080c060c08100b050109000b06010900070b070109000c02060c0a02020c0810020b060109000b05010900010b0e0209000901010b03010900010b0f010900010b0401090003070b0e0209000901090009010203060b07010900020608080c0106081001060b0a0109000605070b070109000c070b0a0109000813080c01081302060c081308060c05080b080b0303030304030c070b0a010900080c03070b050109000b06010900070b07010900010709010603060b050109000b06010900070b07010900050c03060c050310466978656450726963654d61726b6574076163636f756e740361636c04636f696e056572726f72056576656e740c6d616e616765645f636f696e067369676e657206737472696e67057461626c6505746f6b656e0f746f6b656e5f636f696e5f737761700641434c426f780d427579546f6b656e4576656e741443616e63656c4c697374546f6b656e4576656e74114372656174654d61726b65744576656e740e4c697374546f6b656e4576656e740c4d61726b6574436f6e666967084d61726b657449640d4d61726b65745265636f726473115265736f7572654163636f756e74436170065469636b65740a5469636b65745061636b076164645f61636c06537472696e671062617463685f6275795f7363726970741862617463685f63616e63656c5f6c6973745f7363726970741962617463685f6368616e67655f70726963655f7363726970741162617463685f6c6973745f736372697074036275790a6275795f73637269707407546f6b656e49640b63616e63656c5f6c6973741263616e63656c5f6c6973745f736372697074136368616e67655f70726963655f7363726970740d6372656174655f6d61726b6574146372656174655f6d61726b65745f69645f7261770e6765745f6665655f706f696e74731b6765745f7265736f757263655f6163636f756e745f7369676e65720f69735f7469636b65745f6578736974046c6973740b6c6973745f7363726970740f7472616e736665725f657363726f770d7570646174655f6d61726b65741577697468647261775f6665655f746f5f706179656503626f780341434c02696408746f6b656e5f69640c746f6b656e5f616d6f756e740562757965720b746f6b656e5f6f776e65720e636f696e5f7065725f746f6b656e106d61726b65745f6665655f706f696e74096665655f70617965650e6d61726b65745f61646472657373046e616d65077265636f726473055461626c65146372656174655f6d61726b65745f6576656e74730b4576656e7448616e646c65116c6973745f746f6b656e5f6576656e74731263616e63656c5f6c6973745f65766e657473106275795f746f6b656e5f6576656e747303636170105369676e65724361706162696c697479066d61726b6574077469636b6574730a616464726573735f6f6605656d70747903616464136372656174655f746f6b656e5f69645f72617704436f696e07526f79616c74791765786368616e67655f636f696e5f666f725f746f6b656e06626f72726f770b6765745f726f79616c7479176765745f726f79616c74795f64656e6f6d696e61746f72156765745f726f79616c74795f6e756d657261746f72087769746864726177076465706f7369740672656d6f76650a656d69745f6576656e741463616e63656c5f746f6b656e5f6c697374696e670f6469726563745f7472616e73666572176372656174655f7265736f757263655f6163636f756e7416696e697469616c697a655f746f6b656e5f73746f72651569735f6163636f756e745f72656769737465726564087265676973746572036e6577106e65775f6576656e745f68616e646c6508636f6e7461696e730e616c72656164795f6578697374731d6372656174655f7369676e65725f776974685f6361706162696c69747905546f6b656e0e77697468647261775f746f6b656e0d6465706f7369745f746f6b656e136c6973745f746f6b656e5f666f725f7377617012646f65735f6c697374696e675f65786973740a626f72726f775f6d75740762616c616e6365087472616e73666572f6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d40000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000303080000000000000000030802000000000000000308030000000000000003080100000000000000030810270000000000000a02020101126170746f733a3a6d657461646174615f76306c04000000000000000016454d41524b45545f414c52454144595f455849535453000100000000000000184553454c4c45525f43414e5f4e4f545f42455f42555945520002000000000000000a454e4f545f4f574e45520003000000000000000b4550524943455f5a45524f000002012d080d0102062f0b0601090030080c31033205330534030202032f0b0601090030080c31030302032f0b06010900350336050402052f0b0601090030080c33053103340305020235033605060202370538080b070205390b0e020b060109000b050109003b0b0f010b030109003d0b0f010b040109003e0b0f010b020109003f0b0f010b01010900080201400810090203420b06010900330534030a0201430b0e02080c0b090109000a1e071e011e021e061e051e031e091e041e000104010016290a0011140c030a032900200308050d0b00111512002d00050f0b00010b032a000f000c020e01410f0c060600000000000000000c050a050a0623031d05260e010a05420f0c040a020b0414111605180b0201020101040307080a1a650e01410f0c0d0600000000000000000c0c0a0c0a0d23030a05620e010a0c420f0c0b0e020a0c421b0c0a0e030a0c421b0c100e040a0c420e0c110e050a0c420e0c120e060a0c420e0c090e070a0c420f0c0e0e080a0c421b0c0f0a0b140a0a140a10140a111411170c130a0e140b133800033a054d0a000b0b140b0a140b10140b11140b09140b12140b0e140b0f143801055d0b12010b11010b10010b0f010b0e010b0b010b0a010b09010b0c060100000000000000160c0c05050b0001020201040307080a1f440e01410f0c0b0600000000000000000c0a0a0a0a0b23030a05410e010a0a420f0c090e020a0a421b0c080e030a0a421b0c0f0e040a0a420e0c100e050a0a420e0c110e060a0a420f0c0c0e070a0a421b0c0e0b09140b08140b0f140b101411170c120b0c140b0e1438020c0d0a000b120b0d0b111438030b0a060100000000000000160c0a05050b0001020301040307080a204a0e01410f0c0e0600000000000000000c0d0a0d0a0e23030a05470e010a0d420f0c0c0e020a0d421b0c0b0e030a0d421b0c120e040a0d420e0c130e050a0d420e0c140e060a0d420e0c0a0e070a0d420e0c0f0e080a0d420f0c100e090a0d421b0c110a000b0c140b0b140b12140b13140b14140b0a140b0f140b10140b111438040b0d060100000000000000160c0d05050b0001020401040307080a214d0e01410f0c0d0600000000000000000c0c0a0c0a0d23030a054a0e010a0c420f0c0b0e020a0c421b0c0a0e030a0c421b0c130e040a0c420e0c140e050a0c420e0c150e060a0c420e0c120e070a0c420e0c0e0e080a0c420f0c0f0e090a0c421b0c110b0f140b111438020c100a000b0b140b0a140b13140b14140b15140b12140b0e140b1038050b0c060100000000000000160c0c05050b0001020501000307080a2281010e073700140c0d0a010a020a030a0411170c160a0d110d0c110a000b050e1111140b010b020b030b040a0638060a0d3c000c150a1537010a1638073702140c170a170a00111422032c0b15010b00010703270a16111a0c120a1537010a1638073703140a06180c180e12111b0c130b1306000000000000000021034005430600000000000000000c08054b0a180e12111c180e12111b1a0c080b080c140a180b14170c0f0a1537010a1638073703140c090a0d0a0738080c0c0b180b0c1807041a0c0b0b0f0b0b170c100e110b1038090c0a0a170b0a380a0b1536010a16380b010b0d3c010c0e0b0e36040b070b160b060b0011140b170b093902380c020601040307080a0c0e0b070b0838020c090b000b010b020b030b040b050b060b09380d020701000307080a30330e023700140c040a043c000c070a0737010a0138073702140a0011142103170b00010b07010701270a04110d0c060e060a010a03380e0e060b000a010a0311220b0736010a01380b010b043c010c050b0536050b020b010b033903380f020801040307080a34100b010b020b030b0411170c090b060b0738020c080b000b090b080b053803020901040307080a351e0a010a020a030a0411170c0c0a080a0938020c0a0a000b0c0b0a0a0538030b080b0938020c0b0b000b010b020b030b040b050b060b070b0b3805020a0104020708365e0a001114290820030605110a00070511230c050c040a000b0512082d080e0411240a001114110d0c090e091114381020031b051d0e0938110a0011143b01200323052f0a0038120a0038130a0038140a0038150a00381639013f010a0011143b0020033505390a00381739003f000a0011143c010c080b0011140b0339040c070a0837060a07381820034d0b08010700112a270a010a0239050c060a0836060a070b0638190b0836070b070b010b023906381a020b01000001040b000b013904020c000001073f0c0b003d010c030b0337060b01381b3708140c020b02020d0000010840090b002b080c010b01100a112c0c020b02020e0100010a42080b003d000c020b0237010b01381c020f01000307080a43400e083700140c090a0606000000000000000022030c0b00010702270a010a020a030a0411170c0e0a000a0e0a05112d0c0d0a09110d0c0b0e0b0b0d112e0e0b0b010b020b030b040a050a060b07381d0a093c000c0c0b0c36010a0e0a080a0011140a063907381e0b093c010c0a0b0a36090b080b0e0b0011140b050b063908381f021001040307080a0c0f0b080b0938020c0a0b000b010b020b030b040b050b060b070b0a38050211010402080a472b0a010a020a030a0411170c0a0e06370014110d0c080e0811140a0a38200311052a0e080a0a0a0538210e063700143c000c090b0937010b0a38073703140c070e080b010b020b030b040b050b07060000000000000000381d02120104010748170a0011143c010c060b0011140b0339040c050b0636060b0538220c040b010a043608150b020b04360a15021301000207084a1c0a01110d0c080e0811140c070a013c010c060b010b0238020c050b0637060b05381b0c040b0738230c030e080b04370a140b03382402000006000a000901090207040703070007010500080007020501011e021e031e041e051e061e071e081e091e0b1e0c1e00\",\"abi\":{\"address\":\"0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4\",\"name\":\"FixedPriceMarket\",\"friends\":[],\"exposed_functions\":[{\"name\":\"add_acl\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[],\"params\":[\"&signer\",\"vector<address>\"],\"return\":[]},{\"name\":\"batch_buy_script\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\",\"vector<0x1::string::String>\",\"vector<0x1::string::String>\",\"vector<u64>\",\"vector<u64>\",\"vector<u64>\",\"vector<address>\",\"vector<0x1::string::String>\"],\"return\":[]},{\"name\":\"batch_cancel_list_script\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\",\"vector<0x1::string::String>\",\"vector<0x1::string::String>\",\"vector<u64>\",\"vector<u64>\",\"vector<address>\",\"vector<0x1::string::String>\"],\"return\":[]},{\"name\":\"batch_change_price_script\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\",\"vector<0x1::string::String>\",\"vector<0x1::string::String>\",\"vector<u64>\",\"vector<u64>\",\"vector<u64>\",\"vector<u64>\",\"vector<address>\",\"vector<0x1::string::String>\"],\"return\":[]},{\"name\":\"batch_list_script\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\",\"vector<0x1::string::String>\",\"vector<0x1::string::String>\",\"vector<u64>\",\"vector<u64>\",\"vector<u64>\",\"vector<u64>\",\"vector<address>\",\"vector<0x1::string::String>\"],\"return\":[]},{\"name\":\"buy\",\"visibility\":\"public\",\"is_entry\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"u64\",\"u64\",\"0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::MarketId<T0>\"],\"return\":[]},{\"name\":\"buy_script\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"u64\",\"u64\",\"address\",\"0x1::string::String\"],\"return\":[]},{\"name\":\"cancel_list\",\"visibility\":\"public\",\"is_entry\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x3::token::TokenId\",\"0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::MarketId<T0>\",\"u64\"],\"return\":[]},{\"name\":\"cancel_list_script\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"u64\",\"address\",\"0x1::string::String\"],\"return\":[]},{\"name\":\"change_price_script\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"u64\",\"u64\",\"u64\",\"address\",\"0x1::string::String\"],\"return\":[]},{\"name\":\"create_market\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"u64\",\"address\",\"0x1::string::String\"],\"return\":[]},{\"name\":\"create_market_id_raw\",\"visibility\":\"public\",\"is_entry\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"address\",\"0x1::string::String\"],\"return\":[\"0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::MarketId<T0>\"]},{\"name\":\"is_ticket_exsit\",\"visibility\":\"public\",\"is_entry\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"address\",\"0x3::token::TokenId\"],\"return\":[\"bool\"]},{\"name\":\"list\",\"visibility\":\"public\",\"is_entry\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"u64\",\"u64\",\"u64\",\"0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::MarketId<T0>\"],\"return\":[]},{\"name\":\"list_script\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"u64\",\"u64\",\"u64\",\"address\",\"0x1::string::String\"],\"return\":[]},{\"name\":\"transfer_escrow\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"u64\",\"0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::MarketId<T0>\"],\"return\":[]},{\"name\":\"update_market\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"u64\",\"address\",\"0x1::string::String\"],\"return\":[]},{\"name\":\"withdraw_fee_to_payee\",\"visibility\":\"public\",\"is_entry\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\"],\"return\":[]}],\"structs\":[{\"name\":\"ACLBox\",\"is_native\":false,\"abilities\":[\"copy\",\"drop\",\"store\",\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"box\",\"type\":\"0x1::acl::ACL\"}]},{\"name\":\"BuyTokenEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"id\",\"type\":\"0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::MarketId<T0>\"},{\"name\":\"token_id\",\"type\":\"0x3::token::TokenId\"},{\"name\":\"token_amount\",\"type\":\"u64\"},{\"name\":\"buyer\",\"type\":\"address\"},{\"name\":\"token_owner\",\"type\":\"address\"},{\"name\":\"coin_per_token\",\"type\":\"u64\"}]},{\"name\":\"CancelListTokenEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"id\",\"type\":\"0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::MarketId<T0>\"},{\"name\":\"token_id\",\"type\":\"0x3::token::TokenId\"},{\"name\":\"token_amount\",\"type\":\"u64\"}]},{\"name\":\"CreateMarketEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"id\",\"type\":\"0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::MarketId<T0>\"},{\"name\":\"market_fee_point\",\"type\":\"u64\"},{\"name\":\"fee_payee\",\"type\":\"address\"}]},{\"name\":\"ListTokenEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"id\",\"type\":\"0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::MarketId<T0>\"},{\"name\":\"token_id\",\"type\":\"0x3::token::TokenId\"},{\"name\":\"token_owner\",\"type\":\"address\"},{\"name\":\"token_amount\",\"type\":\"u64\"},{\"name\":\"coin_per_token\",\"type\":\"u64\"}]},{\"name\":\"MarketConfig\",\"is_native\":false,\"abilities\":[\"copy\",\"drop\",\"store\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"market_fee_point\",\"type\":\"u64\"},{\"name\":\"fee_payee\",\"type\":\"address\"}]},{\"name\":\"MarketId\",\"is_native\":false,\"abilities\":[\"copy\",\"drop\",\"store\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"market_address\",\"type\":\"address\"},{\"name\":\"name\",\"type\":\"0x1::string::String\"}]},{\"name\":\"MarketRecords\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"records\",\"type\":\"0x1::table::Table<0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::MarketId<T0>, 0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::MarketConfig<T0>>\"},{\"name\":\"create_market_events\",\"type\":\"0x1::event::EventHandle<0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::CreateMarketEvent<T0>>\"},{\"name\":\"list_token_events\",\"type\":\"0x1::event::EventHandle<0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::ListTokenEvent<T0>>\"},{\"name\":\"cancel_list_evnets\",\"type\":\"0x1::event::EventHandle<0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::CancelListTokenEvent<T0>>\"},{\"name\":\"buy_token_events\",\"type\":\"0x1::event::EventHandle<0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::BuyTokenEvent<T0>>\"}]},{\"name\":\"ResoureAccountCap\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"cap\",\"type\":\"0x1::account::SignerCapability\"}]},{\"name\":\"Ticket\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"market\",\"type\":\"0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::MarketId<T0>\"},{\"name\":\"token_owner\",\"type\":\"address\"},{\"name\":\"coin_per_token\",\"type\":\"u64\"}]},{\"name\":\"TicketPack\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"tickets\",\"type\":\"0x1::table::Table<0x3::token::TokenId, 0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4::FixedPriceMarket::Ticket<T0>>\"}]}]}},{\"bytecode\":\"0xa11ceb0b0500000008010008020812031a7c0496010e05a401980307bc04c30308ff07600cdf08a0080000010102020003010407000310070100010211070002170700000500010100000602010100000703010100000803010100000902010100000a040100000b05010100000c06010100000d07010100000e07010100000f08010002120f100003131112010003141301010003151601010003161801010002181a1b0002191c1000021a1d0100031b1e010100021c210100020f080100060d0c0d0d0d080d0e0d0f0d130d09060c0a050a08000a08000a030a030a030a050a08000008060c0a050a08000a08000a030a030a050a08000a060c0a050a08000a08000a030a030a030a030a050a080007060c050a050a08000a08000a030a0309060c050800080003030305080008060c050800080003030508000a060c05080008000303030305080002060c010a060306080006050303060506080006080006030603010501080001030109000b0608000605030306050b010109000608000608000603060308020405080008000301080202050800010b0101090004060c08020b01010900030b06030608000605030306030605060800060800060306030c06080006050303060306050b0101090006080006030608000603060309060c0508000800030303030b010109000a0608000605030306050b010109000608000608000603060307060c050800080003030b01010900090608000605030306080006030603080308020305080008000108030208030304060c0802050308060c05080008000303030b01010900020b010109000802030b010109000b01010900080201060c16466978656450726963654d61726b657453637269707406737472696e6705746f6b656e10466978656450726963654d61726b657406537472696e671062617463685f6275795f7363726970741862617463685f63616e63656c5f6c6973745f7363726970741962617463685f6368616e67655f70726963655f7363726970741162617463685f6c6973745f7363726970741562617463685f7472616e736665725f657363726f771562617463685f7472616e736665725f746f6b656e730a6275795f7363726970741263616e63656c5f6c6973745f736372697074136368616e67655f70726963655f7363726970740b6c6973745f736372697074166f70745f696e5f6469726563745f7472616e73666572084d61726b6574496407546f6b656e4964136372656174655f746f6b656e5f69645f726177146372656174655f6d61726b65745f69645f7261770b63616e63656c5f6c697374046c6973740f7472616e736665725f657363726f770b546f6b656e446174614964146372656174655f746f6b656e5f646174615f69640f6372656174655f746f6b656e5f6964087472616e736665720362757916696e697469616c697a655f746f6b656e5f73746f7265f6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000030001040009440e01410a0c0d0600000000000000000c0c0a0c0a0d23030a05410e010a0c420a0c0b0e020a0c420b0c0a0e030a0c420b0c100e040a0c420c0c110e050a0c420c0c120e060a0c420c0c090e070a0c420a0c0e0e080a0c420b0c0f0a000b0b140b0a140b10140b11140b09140b12140b0e140b0f1438000b0c060100000000000000160c0c05050b000102010104000e440e01410a0c0b0600000000000000000c0a0a0a0a0b23030a05410e010a0a420a0c090e020a0a420b0c080e030a0a420b0c0f0e040a0a420c0c100e050a0a420c0c110e060a0a420a0c0c0e070a0a420b0c0e0b09140b08140b0f140b1014110b0c120b0c140b0e1438010c0d0a000b120b0d0b111438020b0a060100000000000000160c0a05050b00010202010400144a0e01410a0c0e0600000000000000000c0d0a0d0a0e23030a05470e010a0d420a0c0c0e020a0d420b0c0b0e030a0d420b0c120e040a0d420c0c130e050a0d420c0c140e060a0d420c0c0a0e070a0d420c0c0f0e080a0d420a0c100e090a0d420b0c110a000b0c140b0b140b12140b13140b14140b0a140b0f140b10140b111438030b0d060100000000000000160c0d05050b00010203010400154d0e01410a0c0d0600000000000000000c0c0a0c0a0d23030a054a0e010a0c420a0c0b0e020a0c420b0c0a0e030a0c420b0c130e040a0c420c0c140e050a0c420c0c150e060a0c420c0c120e070a0c420c0c0e0e080a0c420a0c0f0e090a0c420b0c110b0f140b111438010c100a000b0b140b0a140b13140b14140b15140b12140b0e140b1038040b0c060100000000000000160c0c05050b0001020401040017410e01410a0c0b0600000000000000000c0a0a0a0a0b23030a053e0e010a0a420a0c090e020a0a420b0c080e030a0a420b0c0f0e040a0a420c0c100e050a0a420c0c110e060a0a420a0c0c0e070a0a420b0c0e0b0c140b0e1438010c0d0a000b09140b08140b0f140b10140b11140b0d38050b0a060100000000000000160c0a05050b0001020501040019390e02410a0c0a0600000000000000000c090a090a0a23030a05360e020a09420a0c080e030a09420b0c070e040a09420b0c0b0e050a09420c0c0c0e060a09420c0c0d0b08140b07140b0b1411100c0e0b0e0b0c1411110c0f0a000b0f0a010b0d1411120b09060100000000000000160c0905050b00010206010400120e0b070b0838010c090b000b010b020b030b040b050b060b09380602070104001f100b010b020b030b04110b0c090b060b0738010c080b000b090b080b0538020208010400201e0a010a020a030a04110b0c0c0a080a0938010c0a0a000b0c0b0a0a0538020b080b0938010c0b0b000b010b020b030b040b050b060b070b0b38040209010400120f0b080b0938010c0a0b000b010b020b030b040b050b060b070b0a3804020a01040001060a0011140b000b0111150200\",\"abi\":{\"address\":\"0xf6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4\",\"name\":\"FixedPriceMarketScript\",\"friends\":[],\"exposed_functions\":[{\"name\":\"batch_buy_script\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\",\"vector<0x1::string::String>\",\"vector<0x1::string::String>\",\"vector<u64>\",\"vector<u64>\",\"vector<u64>\",\"vector<address>\",\"vector<0x1::string::String>\"],\"return\":[]},{\"name\":\"batch_cancel_list_script\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\",\"vector<0x1::string::String>\",\"vector<0x1::string::String>\",\"vector<u64>\",\"vector<u64>\",\"vector<address>\",\"vector<0x1::string::String>\"],\"return\":[]},{\"name\":\"batch_change_price_script\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\",\"vector<0x1::string::String>\",\"vector<0x1::string::String>\",\"vector<u64>\",\"vector<u64>\",\"vector<u64>\",\"vector<u64>\",\"vector<address>\",\"vector<0x1::string::String>\"],\"return\":[]},{\"name\":\"batch_list_script\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\",\"vector<0x1::string::String>\",\"vector<0x1::string::String>\",\"vector<u64>\",\"vector<u64>\",\"vector<u64>\",\"vector<u64>\",\"vector<address>\",\"vector<0x1::string::String>\"],\"return\":[]},{\"name\":\"batch_transfer_escrow\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\",\"vector<0x1::string::String>\",\"vector<0x1::string::String>\",\"vector<u64>\",\"vector<u64>\",\"vector<address>\",\"vector<0x1::string::String>\"],\"return\":[]},{\"name\":\"batch_transfer_tokens\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[],\"params\":[\"&signer\",\"address\",\"vector<address>\",\"vector<0x1::string::String>\",\"vector<0x1::string::String>\",\"vector<u64>\",\"vector<u64>\"],\"return\":[]},{\"name\":\"buy_script\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"u64\",\"u64\",\"address\",\"0x1::string::String\"],\"return\":[]},{\"name\":\"cancel_list_script\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"u64\",\"address\",\"0x1::string::String\"],\"return\":[]},{\"name\":\"change_price_script\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"u64\",\"u64\",\"u64\",\"address\",\"0x1::string::String\"],\"return\":[]},{\"name\":\"list_script\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"u64\",\"u64\",\"u64\",\"address\",\"0x1::string::String\"],\"return\":[]},{\"name\":\"opt_in_direct_transfer\",\"visibility\":\"public\",\"is_entry\":true,\"generic_type_params\":[],\"params\":[\"&signer\",\"bool\"],\"return\":[]}],\"structs\":[]}}]"
	abiPayload2, err := PayloadFromJsonAndAbi(payload2, abi2)
	require.NoError(t, err)
	bytes, err := abiPayload2.BcsSerialize()
	require.NoError(t, err)
	expected = "02f6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d410466978656450726963654d61726b65741062617463685f6275795f736372697074010700000000000000000000000000000000000000000000000000000000000000010a6170746f735f636f696e094170746f73436f696e000821012ba03b661d7691b41053dcf293caff2c17283b19cb4abe866b4855e8f66837710a01084c616c61204361741901174c616c61206973206d792064617567687465722023313109010000000000000000090101000000000000000901404b4c00000000002101f6994988bd40261af9431cd6dd3fcf765569719e66322c7a05cc78a89cd366d4090107736f7566666c65"
	require.Equal(t, expected, hex.EncodeToString(bytes))
	checkPayloadFromJsonAndAbiV2(t, payload2, abi2, expected)
}

func checkPayloadFromJsonAndAbiV2(t *testing.T, payload, abiStr, expected string) {
	p22, err := PayloadFromJsonAndAbiV2(payload, abiStr)
	assert.Nil(t, err)
	p2Data2, err := bcs2.Serialize(p22)
	assert.Nil(t, err)
	assert.Equal(t, expected, hex.EncodeToString(p2Data2))
}

func TestConvertArgs(t *testing.T) {
	args := make([]interface{}, 0)
	types := make([]aptos_types.MoveType, 0)

	arrayNumber := make([]interface{}, 0)
	arrayNumber = append(arrayNumber, 1)
	arrayNumber = append(arrayNumber, 2)

	arrayBool := make([]interface{}, 0)
	arrayBool = append(arrayBool, "true")
	arrayBool = append(arrayBool, "false")

	arrayAddress := make([]interface{}, 0)
	arrayAddress = append(arrayAddress, "0x2ba03b661d7691b41053dcf293caff2c17283b19cb4abe866b4855e8f6683771")
	arrayAddress = append(arrayAddress, "0x2ba03b661d7691b41053dcf293caff2c17283b19cb4abe866b4855e8f6683771")

	arrayString := make([]interface{}, 0)
	arrayString = append(arrayString, "test1")
	arrayString = append(arrayString, "test2")

	args = append(args, "0x2ba03b661d7691b41053dcf293caff2c17283b19cb4abe866b4855e8f6683771")
	args = append(args, "1")
	args = append(args, "1")
	args = append(args, "true")
	args = append(args, "1")
	args = append(args, "0x2ba03b661d7691b41053dcf293caff2c17283b19cb4abe866b4855e8f6683771")
	arrayNumber = nil
	arrayNumber = append(arrayNumber, "1")
	arrayNumber = append(arrayNumber, "2")
	args = append(args, arrayNumber)
	args = append(args, arrayNumber)
	args = append(args, arrayNumber)
	args = append(args, arrayBool)
	args = append(args, arrayAddress)
	args = append(args, arrayString)
	args = append(args, "test")

	types = append(types, "address")
	types = append(types, "u64")
	types = append(types, "u8")
	types = append(types, "bool")
	types = append(types, "u128")
	types = append(types, "vector<u8>")
	types = append(types, "vector<u8>")
	types = append(types, "vector<u64>")
	types = append(types, "vector<u128>")
	types = append(types, "vector<bool>")
	types = append(types, "vector<address>")
	types = append(types, "vector<0x1::string::String>")
	types = append(types, "0x1::string::String")
	b, err := ConvertArgs(args, types)
	require.NoError(t, err)
	expected := []string{
		"2ba03b661d7691b41053dcf293caff2c17283b19cb4abe866b4855e8f6683771",
		"0100000000000000",
		"01",
		"01",
		"01000000000000000000000000000000",
		"202ba03b661d7691b41053dcf293caff2c17283b19cb4abe866b4855e8f6683771",
		"020102",
		"0201000000000000000200000000000000",
		"020100000000000000000000000000000002000000000000000000000000000000",
		"020100",
		"022ba03b661d7691b41053dcf293caff2c17283b19cb4abe866b4855e8f66837712ba03b661d7691b41053dcf293caff2c17283b19cb4abe866b4855e8f6683771",
		"02057465737431057465737432",
		"0474657374",
	}
	for i, bytes := range b {
		assert.Equal(t, expected[i], hex.EncodeToString(bytes))
	}
}

func TestU128(t *testing.T) {
	s, err := Interface2U128("123456789013454364576576")
	require.NoError(t, err)
	bytes, _ := aptos_types.BcsSerializeU128(*s)
	require.Equal(t, "408b678fa2111f9b241a000000000000", hex.EncodeToString(bytes))
}

func TestU128Hex(t *testing.T) {
	s, err := String2U128("0x12345678123456781234567812345678")
	require.NoError(t, err)
	bytes, _ := aptos_types.BcsSerializeU128(*s)
	require.Equal(t, "78563412785634127856341278563412", hex.EncodeToString(bytes))
	cc, err := strconv.ParseUint("12", 0, 64)
	require.NoError(t, err)
	require.Equal(t, uint64(12), cc)
}

func TestSimulate(t *testing.T) {
	from := "0xedc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd28"
	sequenceNumber := 11
	maxGasAmount := 0
	gasUnitPrice := 100
	expirationTimestampSecs := 1700312272
	chainId := 2
	seedHex := "a4d06f3f5a1585cf171b4982003306b4eef0670a2eb5d5483427e2c22b602c9e"

	payload := "{\"arguments\":[100000,1148684056.1,[3],[1148684056],[false]],\"function\":\"0x909adaa9f5756559b789db81c9ae0553683c060ca3537cdcb8fd2e5629583491::aggregator::unxswap\",\"type\":\"entry_function_payload\",\"type_arguments\":[\"0x1::aptos_coin::AptosCoin\",\"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDC\",\"0x1::aptos_coin::AptosCoin\",\"0x1::aptos_coin::AptosCoin\",\"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12::curves::Uncorrelated\",\"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12::curves::Uncorrelated\",\"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12::curves::Uncorrelated\"]}"
	abi := "[\n {\n \"abi\": {\n \"address\": \"0x909adaa9f5756559b789db81c9ae0553683c060ca3537cdcb8fd2e5629583491\",\n \"name\": \"aggregator\",\n \"friends\": [],\n \"exposed_functions\": [ \n {\n \"name\": \"unxswap\",\n \"visibility\": \"public\",\n \"is_entry\": true,\n \"generic_type_params\": [\n {\n \"constraints\": []\n },\n {\n \"constraints\": []\n },\n {\n \"constraints\": []\n },\n {\n \"constraints\": []\n },\n {\n \"constraints\": []\n },\n {\n \"constraints\": []\n },\n {\n \"constraints\": []\n }\n ],\n \"params\": [\n \"&signer\",\n \"u64\",\n \"u64\",\n \"vector<u8>\",\n \"vector<u64>\",\n \"vector<bool>\"\n ],\n \"return\": []\n }\n ],\n \"structs\": [\n ]\n }\n }\n]"
	p, err := PayloadFromJsonAndAbi(payload, abi)
	require.NoError(t, err)
	ser := bcs.NewSerializer()
	p.Serialize(ser)
	raw, err := MakeRawTransaction(from, uint64(sequenceNumber), uint64(maxGasAmount), uint64(gasUnitPrice), uint64(expirationTimestampSecs), uint8(chainId), p)
	require.NoError(t, err)
	tx, err := SimulateTransaction(raw, seedHex)
	require.NoError(t, err)
	expected := "0edc4410aa38b512e3173fcd1e119abb13872d6928dce0842664ad6ada1ccd280b0000000000000002909adaa9f5756559b789db81c9ae0553683c060ca3537cdcb8fd2e56295834910a61676772656761746f7207756e7873776170070700000000000000000000000000000000000000000000000000000000000000010a6170746f735f636f696e094170746f73436f696e0007f22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa0561737365740455534443000700000000000000000000000000000000000000000000000000000000000000010a6170746f735f636f696e094170746f73436f696e000700000000000000000000000000000000000000000000000000000000000000010a6170746f735f636f696e094170746f73436f696e0007190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12066375727665730c556e636f7272656c617465640007190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12066375727665730c556e636f7272656c617465640007190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12066375727665730c556e636f7272656c61746564000508a0860100000000000818877744000000000201030901188777440000000002010000000000000000006400000000000000d0b4586500000000020020d2e3180441b6f4c21f836ee9096e8acfa3321e820242d0c36278309807c5563e4000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
	require.Equal(t, expected, tx)
	payload = "{\"arguments\":[100000,1148684056,[3],[1148684056],[false]],\"function\":\"0x909adaa9f5756559b789db81c9ae0553683c060ca3537cdcb8fd2e5629583491::aggregator::unxswap\",\"type\":\"entry_function_payload\",\"type_arguments\":[\"0x1::aptos_coin::AptosCoin\",\"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDC\",\"0x1::aptos_coin::AptosCoin\",\"0x1::aptos_coin::AptosCoin\",\"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12::curves::Uncorrelated\",\"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12::curves::Uncorrelated\",\"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12::curves::Uncorrelated\"]}"
	checkPayloadFromJsonAndAbiV2(t, payload, abi, hex.EncodeToString(ser.GetBytes()))
}

// --Staking related
func TestTransferSign(t *testing.T) {
	from := "0xffb6fac50e85d7c6ae1b13347fac94c819bf68b1b45ae612a5d51e264e0a27fe"
	to := "0xd6d64011d498462e065d0c85648cb357e2f1c9df37d9179755ddf89c1e830c77"
	amount := 1000
	sequenceNumber := 18
	maxGasAmount := 10000
	gasUnitPrice := 100
	expirationTimestampSecs := 1700312272
	chainId := 2
	seedHex := "d1028d1c19e05b737a5ff9e2bfddee4821d329f1b1efd9e21c002aea04b83862"
	data, err := Transfer(from, uint64(sequenceNumber), uint64(maxGasAmount), uint64(gasUnitPrice), uint64(expirationTimestampSecs), uint8(chainId),
		to, uint64(amount), seedHex)
	require.NoError(t, err)
	expected := "ffb6fac50e85d7c6ae1b13347fac94c819bf68b1b45ae612a5d51e264e0a27fe12000000000000000200000000000000000000000000000000000000000000000000000000000000010d6170746f735f6163636f756e74087472616e73666572000220d6d64011d498462e065d0c85648cb357e2f1c9df37d9179755ddf89c1e830c7708e80300000000000010270000000000006400000000000000d0b4586500000000020020cb260546471c6e15c6b5ed0cc11ea65b72250971c25ecbba0e1a0d015ee9fe8940760eaae6aa93915ea1473d0ed0e3c5548ea65cf7d0395f1d81e114e4bee6c168c922ea0945798bc445c4f0283bf0468905e3eb529c231dca9594412b486fa205"
	require.Equal(t, expected, data)
}

// Staking operation
func TestAddStake(t *testing.T) {
	from := "0xffb6fac50e85d7c6ae1b13347fac94c819bf68b1b45ae612a5d51e264e0a27fe"
	poolAddress := "0xb1a373b3eddb7a715a807709a36b18aca67a005885b16476b6a5ebd5c25e14b5"
	//poolAddress := "0xfd47a2fb988c959839ea2fe4d7169b48536a42bf5e4933790701a08252ba2039"
	amount := 2000000000
	sequenceNumber := 59
	maxGasAmount := 10000
	gasUnitPrice := 100
	expirationTimestampSecs := 1700312272
	chainId := 2
	seedHex := "d1028d1c19e05b737a5ff9e2bfddee4821d329f1b1efd9e21c002aea04b83862"
	data, err := AddStake(from, uint64(sequenceNumber), uint64(maxGasAmount), uint64(gasUnitPrice), uint64(expirationTimestampSecs), uint8(chainId),
		poolAddress, uint64(amount), seedHex)
	require.NoError(t, err)
	expected := "ffb6fac50e85d7c6ae1b13347fac94c819bf68b1b45ae612a5d51e264e0a27fe3b000000000000000200000000000000000000000000000000000000000000000000000000000000010f64656c65676174696f6e5f706f6f6c096164645f7374616b65000220b1a373b3eddb7a715a807709a36b18aca67a005885b16476b6a5ebd5c25e14b508009435770000000010270000000000006400000000000000d0b4586500000000020020cb260546471c6e15c6b5ed0cc11ea65b72250971c25ecbba0e1a0d015ee9fe89405fdf45ca0f11426d7247f148e710793a7e2a19a27566e0bca6c479b8b08c9a9ed5d5fbc08ebfe3aeb6694c1a567dd09e7dac983eb60a800b426ec10d7471bb05"
	require.Equal(t, expected, data)
}

// Unstaking is divided into two steps: 1. unlock 2. withdraw
// After staking 10, calling unlock 1 will actually unlock 0.9999x, then pass 1.0000x to withdraw, when actually received it's 1.0000x, equivalent to directly withdrawing rewards
// You can't see rewards without calling unlock, unlock will slightly deduct some fees, unlock minimum amount is 10 (if set below 10, default is 10)
// Need to wait one cycle, about two hours, before you can continue to call withdraw
// Unlock
func TestUnlock(t *testing.T) {
	from := "0xffb6fac50e85d7c6ae1b13347fac94c819bf68b1b45ae612a5d51e264e0a27fe"
	poolAddress := "0xb1a373b3eddb7a715a807709a36b18aca67a005885b16476b6a5ebd5c25e14b5"
	//poolAddress := "0xfd47a2fb988c959839ea2fe4d7169b48536a42bf5e4933790701a08252ba2039"
	amount := 300000000
	sequenceNumber := 55
	maxGasAmount := 10000
	gasUnitPrice := 100
	expirationTimestampSecs := 1700312272
	chainId := 2
	seedHex := "d1028d1c19e05b737a5ff9e2bfddee4821d329f1b1efd9e21c002aea04b83862"
	data, err := Unlock(from, uint64(sequenceNumber), uint64(maxGasAmount), uint64(gasUnitPrice), uint64(expirationTimestampSecs), uint8(chainId),
		poolAddress, uint64(amount), seedHex)
	require.NoError(t, err)
	expected := "ffb6fac50e85d7c6ae1b13347fac94c819bf68b1b45ae612a5d51e264e0a27fe37000000000000000200000000000000000000000000000000000000000000000000000000000000010f64656c65676174696f6e5f706f6f6c06756e6c6f636b000220b1a373b3eddb7a715a807709a36b18aca67a005885b16476b6a5ebd5c25e14b50800a3e1110000000010270000000000006400000000000000d0b4586500000000020020cb260546471c6e15c6b5ed0cc11ea65b72250971c25ecbba0e1a0d015ee9fe894070f859cb6d90156a5661b5e4b226f7c241f75761dfaca261bdeb4bfff37f97f260d5fc72733646bd478e9305503ca0c3cc96cf50d64675e32bfd0d3b0992e30b"
	require.Equal(t, expected, data)
}

// Equivalent to unlocked, then re-stake by calling ReactivateStake
// Reactivate
func TestReactivateStake(t *testing.T) {
	from := "0xffb6fac50e85d7c6ae1b13347fac94c819bf68b1b45ae612a5d51e264e0a27fe"
	poolAddress := "0xb1a373b3eddb7a715a807709a36b18aca67a005885b16476b6a5ebd5c25e14b5"
	//poolAddress := "0xfd47a2fb988c959839ea2fe4d7169b48536a42bf5e4933790701a08252ba2039"
	amount := 1500000000
	sequenceNumber := 42
	maxGasAmount := 10000
	gasUnitPrice := 100
	expirationTimestampSecs := 1700312272
	chainId := 2
	seedHex := "d1028d1c19e05b737a5ff9e2bfddee4821d329f1b1efd9e21c002aea04b83862"
	data, err := ReactivateStake(from, uint64(sequenceNumber), uint64(maxGasAmount), uint64(gasUnitPrice), uint64(expirationTimestampSecs), uint8(chainId),
		poolAddress, uint64(amount), seedHex)
	require.NoError(t, err)
	expected := "ffb6fac50e85d7c6ae1b13347fac94c819bf68b1b45ae612a5d51e264e0a27fe2a000000000000000200000000000000000000000000000000000000000000000000000000000000010f64656c65676174696f6e5f706f6f6c10726561637469766174655f7374616b65000220b1a373b3eddb7a715a807709a36b18aca67a005885b16476b6a5ebd5c25e14b508002f68590000000010270000000000006400000000000000d0b4586500000000020020cb260546471c6e15c6b5ed0cc11ea65b72250971c25ecbba0e1a0d015ee9fe89406ae0d34d1357431756203489414829a6c45426c4a61a8675f343584670b2c50ea428c84163ed95884dcd79e2a3a76ab700dd3fc3c20b5543b4af18f4e456c20a"
	require.Equal(t, expected, data)
}

// Unstake
// After unlock, need to wait one cycle (2-3 hours)
func TestWithdraw(t *testing.T) {
	from := "0xffb6fac50e85d7c6ae1b13347fac94c819bf68b1b45ae612a5d51e264e0a27fe"
	poolAddress := "0xb1a373b3eddb7a715a807709a36b18aca67a005885b16476b6a5ebd5c25e14b5"
	//poolAddress := "0xfd47a2fb988c959839ea2fe4d7169b48536a42bf5e4933790701a08252ba2039"
	amount := 20224
	sequenceNumber := 58
	maxGasAmount := 10000
	gasUnitPrice := 100
	expirationTimestampSecs := 1700312272
	chainId := 2
	seedHex := "d1028d1c19e05b737a5ff9e2bfddee4821d329f1b1efd9e21c002aea04b83862"
	data, err := Withdraw(from, uint64(sequenceNumber), uint64(maxGasAmount), uint64(gasUnitPrice), uint64(expirationTimestampSecs), uint8(chainId),
		poolAddress, uint64(amount), seedHex)
	require.NoError(t, err)
	expected := "ffb6fac50e85d7c6ae1b13347fac94c819bf68b1b45ae612a5d51e264e0a27fe3a000000000000000200000000000000000000000000000000000000000000000000000000000000010f64656c65676174696f6e5f706f6f6c087769746864726177000220b1a373b3eddb7a715a807709a36b18aca67a005885b16476b6a5ebd5c25e14b508004f00000000000010270000000000006400000000000000d0b4586500000000020020cb260546471c6e15c6b5ed0cc11ea65b72250971c25ecbba0e1a0d015ee9fe894058ee23e378d1be38918b3f92e93ba45383490e89795a11f5fc34800ca1d6194aa103f20b125ce28e3819ff5b1d11d540cd5b2f45054c896239167a075d0d1409"
	require.Equal(t, expected, data)
}

func TestGetPubKey(t *testing.T) {
	publicKey, _ := ed25519.PublicKeyFromSeed("87625fc9d9fbd764aeb5e7ef8a65acc32bee52a16ecfd7ca4d6b7179639509aa")
	require.Equal(t, "b691b166e3d303f4d017f4675114780f8a709c7a46d9e5e328c5510aa49921d7", hex.EncodeToString(publicKey))
	//61f579fc779146304353027b425a216d8015889c5f3b715ad26135b862f3bf84
	b, _ := hex.DecodeString("1553b952532e23cb36b385b99cb15eb1d2fb34adc8cb8db54dbeb6de8f99e359")
	sig, _ := ed25519.Sign("c9c44cf555856d4c619d35daa1fe421c053234df8badabe4dce9d46aa923ec4f", b)
	require.Equal(t, "798a8005f7d2d053913a73d01cdb67b32b6774f080ac7c4190333bd1988fab003a94f664fca54e146c6275d5ef9f7ed133c7a18b0dd0a012039d008baa4a700c", hex.EncodeToString(sig))
}

func Test_PayloadFromJsonAndAbi(t *testing.T) {
	from := "d1028d1c19e05b737a5ff9e2bfddee4821d329f1b1efd9e21c002aea04b83862"
	sequenceNumber := 49
	maxGasAmount := 2000
	gasUnitPrice := 100
	//expirationTimestampSecs := time.Now().Unix() + 300
	expirationTimestampSecs := 1700312272
	chainId := 1
	seedHex := "d1028d1c19e05b737a5ff9e2bfddee4821d329f1b1efd9e21c002aea04b83862"
	payload := "{\"type\":\"entry_function_payload\",\"type_arguments\":[\"0x1::aptos_coin::AptosCoin\"],\"function\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::coin_listing::init_fixed_price\",\"arguments\":[\"0xffedd8fac12a876e1ae43272c447794af3496794046558005c56e8c07047ff1e\",\"0x71f7c94805c33d32a7f9560c95f02e9d3b5bc49884a883916f03abe6da11ac08\",200000000]}"
	abi := "[{\"bytecode\":\"0xa11ceb0b060000000d0100120212560368a1010489024205cb02dd0107a804a40b08cc0f800106cc100a10d610750acb1197020ce213a7050d8919140f9d190a00050106010701080109010a020b030c030b000d0600000e0600000f060000100600001106000012080000130600001406000015060000160600001706000018060000190600051a0700031c07010001071d0800041f07010000062b0700082d0800024104010601001b000100001e020100002003040108002105040108002206040108002305040108002407040108002508040108002607040108002709040108002806040108002909040108002a0a0400002c0b0c00002e0d0c00044e040e0100074f101101080750101201080451130e0100035215110108015316160002541804010603550a2301060656252600084f101101080837101201080857100201080850101201080f02100f110f1202131315171519151a151b151c151d151e151f152015211617161e161c161d161b1619161a1621161f16200f0d1216182719271a271b27120d0f160205080d010801010b0e01080f090b0e010900050503030b1001050b10010303080900060b0e010900050503030801080b0e0109000505050303030809060b0e010900080d0505030809090b0e010900080d0505050303030809050b0e010900050503080901060c010811010809010b0e010812010b1001090001080f010b0e010900010501080d01090002050b0e01090001060b0e010900010301080002070b13010900090001080201080301080401080601080701080801080a01080b01080c010805010b130109000203080d010608110405080d080d030108120c636f696e5f6c697374696e6710636f6c6c656374696f6e5f6f666665720c6665655f7363686564756c65076c697374696e670b746f6b656e5f6f66666572066576656e7473056572726f72056576656e74066f626a656374066f7074696f6e06737472696e6705746f6b656e0a636f6c6c656374696f6e0f41756374696f6e4269644576656e7412436f6c6c656374696f6e4d657461646174611c436f6c6c656374696f6e4f6666657243616e63656c65644576656e741a436f6c6c656374696f6e4f6666657246696c6c65644576656e741a436f6c6c656374696f6e4f66666572506c616365644576656e74084576656e74735631144c697374696e6743616e63656c65644576656e74124c697374696e6746696c6c65644576656e74124c697374696e67506c616365644576656e740d546f6b656e4d6574616461746117546f6b656e4f6666657243616e63656c65644576656e7415546f6b656e4f6666657246696c6c65644576656e7415546f6b656e4f66666572506c616365644576656e7406537472696e671f636f6c6c656374696f6e5f6d657461646174615f666f725f746f6b656e7631064f626a6563740a436f6c6c656374696f6e1f636f6c6c656374696f6e5f6d657461646174615f666f725f746f6b656e7632064f7074696f6e0e656d69745f6269645f6576656e741e656d69745f636f6c6c656374696f6e5f6f666665725f63616e63656c65641c656d69745f636f6c6c656374696f6e5f6f666665725f66696c6c65641c656d69745f636f6c6c656374696f6e5f6f666665725f706c6163656415656d69745f6c697374696e675f63616e63656c656413656d69745f6c697374696e675f66696c6c656413656d69745f6c697374696e675f706c6163656419656d69745f746f6b656e5f6f666665725f63616e63656c656417656d69745f746f6b656e5f6f666665725f66696c6c656417656d69745f746f6b656e5f6f666665725f706c6163656404696e697407546f6b656e49641a746f6b656e5f6d657461646174615f666f725f746f6b656e763105546f6b656e1a746f6b656e5f6d657461646174615f666f725f746f6b656e76320a6e65775f626964646572076e65775f6269640c6e65775f656e645f74696d650f70726576696f75735f6269646465720c70726576696f75735f6269641170726576696f75735f656e645f74696d650e746f6b656e5f6d657461646174610f63726561746f725f616464726573730f636f6c6c656374696f6e5f6e616d65097075726368617365720570726963651672656d61696e696e675f746f6b656e5f616d6f756e7413636f6c6c656374696f6e5f6d657461646174610673656c6c657209726f79616c746965730a636f6d6d697373696f6e0c746f6b656e5f616d6f756e741261756374696f6e5f6269645f6576656e74730b4576656e7448616e646c65156c697374696e675f706c616365645f6576656e7473176c697374696e675f63616e63656c65645f6576656e7473156c697374696e675f66696c6c65645f6576656e74731e636f6c6c656374696f6e5f6f666665725f706c616365645f6576656e747320636f6c6c656374696f6e5f6f666665725f63616e63656c65645f6576656e74731e636f6c6c656374696f6e5f6f666665725f66696c6c65645f6576656e747319746f6b656e5f6f666665725f706c616365645f6576656e74731b746f6b656e5f6f666665725f63616e63656c65645f6576656e747319746f6b656e5f6f666665725f66696c6c65645f6576656e747304747970650a746f6b656e5f6e616d651070726f70657274795f76657273696f6e046e6f6e650763726561746f72046e616d6504736f6d650e6f626a6563745f61646472657373096e6f745f666f756e640a656d69745f6576656e74106e65775f6576656e745f68616e646c65136765745f746f6b656e5f69645f6669656c647311636f6c6c656374696f6e5f6f626a656374584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c900000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000403080100000000000000126170746f733a3a6d657461646174615f7631610101000000000000000d454e4f5f4556454e54535f5631224d61726b6574706c61636520646f6573206e6f742068617665204576656e7473563101084576656e74735631010301183078313a3a6f626a6563743a3a4f626a65637447726f75700000020803052f0530033103320b100105330b1001033403350809010203360537080d0c0b10010b0e01080f0202050105380539033a033b0801030207010538053c0539033d033e033508090402050105380539033f033b080105020a400b13010800420b13010808430b13010806440b13010807450b13010804460b13010802470b13010803480b1301080c490b1301080a4a0b1301080b0602054b080d03053c0539033508090702084b080d03053c05380539033e033d033508090802054b080d03053c053903350809090206360537080d0c0b10010b0e01080f4c080d0b0b10010b0e0108124d0b1001030a02040405380539033508090b0207040538053c0539033d033e033508090c02040405380539033508090001000004050b000b0138001201020101000004080a0038010a0038020b0038031201020203000105141a0b000c0a0e0a38040c090a0929050409050c07001114270b092a050f000b010b020b030b040b050b060b070b081200380502030300010514170b000c070e0738040c060a0629050409050c07001114270b062a050f010b010b020b030b040b051202380602040300010514190b000c090e0938040c080a0829050409050c07001114270b082a050f020b010b020b030b040b050b060b071203380702050300010514170b000c070e0738040c060a0629050409050c07001114270b062a050f030b010b020b030b040b051204380802060300010514170b000c070e0738040c060a0629050409050c07001114270b062a050f040b010b020b030b040b0512063809020703000105141a0b000c0a0e0a38040c090a0929050409050c07001114270b092a050f050b010b020b030b040b050b060b070b081207380a02080300010514170b000c070e0738040c060a0629050409050c07001114270b062a050f060b010b020b030b040b051208380b02090300010514160b000c060e0638040c050a0529050409050c07001114270b052a050f070b010b020b030b04120a380c020a0300010514190b000c090e0938040c080a0829050409050c07001114270b082a050f080b010b020b030b040b050b060b07120b380d020b0300010514160b000c060e0638040c050a0529050409050c07001114270b052a050f090b010b020b030b04120c380e020c030000221a0a00380f0a0038100a0038110a0038120a0038130a0038140a0038150a0038160a0038170a00381812050c010b000b012d05020d010000240b0e0011170c010c0238000b0238190b01381a1209020e010000040e0a00381b0a00381c0a00381d38030a00381e0b00381f382012090205000505050605040502050305010508050905070000000100020003000400\",\"abi\":{\"address\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9\",\"name\":\"events\",\"friends\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::coin_listing\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer\"],\"exposed_functions\":[{\"name\":\"collection_metadata_for_tokenv1\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"address\",\"0x1::string::String\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionMetadata\"]},{\"name\":\"collection_metadata_for_tokenv2\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x4::collection::Collection>\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionMetadata\"]},{\"name\":\"emit_bid_event\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"address\",\"address\",\"u64\",\"u64\",\"0x1::option::Option<address>\",\"0x1::option::Option<u64>\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"],\"return\":[]},{\"name\":\"emit_collection_offer_canceled\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"address\",\"address\",\"u64\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionMetadata\"],\"return\":[]},{\"name\":\"emit_collection_offer_filled\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"address\",\"address\",\"address\",\"u64\",\"u64\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"],\"return\":[]},{\"name\":\"emit_collection_offer_placed\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"address\",\"address\",\"u64\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionMetadata\"],\"return\":[]},{\"name\":\"emit_listing_canceled\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"0x1::string::String\",\"address\",\"address\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"],\"return\":[]},{\"name\":\"emit_listing_filled\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"0x1::string::String\",\"address\",\"address\",\"address\",\"u64\",\"u64\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"],\"return\":[]},{\"name\":\"emit_listing_placed\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"0x1::string::String\",\"address\",\"address\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"],\"return\":[]},{\"name\":\"emit_token_offer_canceled\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"address\",\"address\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"],\"return\":[]},{\"name\":\"emit_token_offer_filled\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"address\",\"address\",\"address\",\"u64\",\"u64\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"],\"return\":[]},{\"name\":\"emit_token_offer_placed\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"address\",\"address\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"],\"return\":[]},{\"name\":\"init\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\"],\"return\":[]},{\"name\":\"token_metadata_for_tokenv1\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"0x3::token::TokenId\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"]},{\"name\":\"token_metadata_for_tokenv2\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x4::token::Token>\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"]}],\"structs\":[{\"name\":\"AuctionBidEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"listing\",\"type\":\"address\"},{\"name\":\"new_bidder\",\"type\":\"address\"},{\"name\":\"new_bid\",\"type\":\"u64\"},{\"name\":\"new_end_time\",\"type\":\"u64\"},{\"name\":\"previous_bidder\",\"type\":\"0x1::option::Option<address>\"},{\"name\":\"previous_bid\",\"type\":\"0x1::option::Option<u64>\"},{\"name\":\"previous_end_time\",\"type\":\"u64\"},{\"name\":\"token_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"}]},{\"name\":\"CollectionMetadata\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"creator_address\",\"type\":\"address\"},{\"name\":\"collection_name\",\"type\":\"0x1::string::String\"},{\"name\":\"collection\",\"type\":\"0x1::option::Option<0x1::object::Object<0x4::collection::Collection>>\"}]},{\"name\":\"CollectionOfferCanceledEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"collection_offer\",\"type\":\"address\"},{\"name\":\"purchaser\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"remaining_token_amount\",\"type\":\"u64\"},{\"name\":\"collection_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionMetadata\"}]},{\"name\":\"CollectionOfferFilledEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"collection_offer\",\"type\":\"address\"},{\"name\":\"purchaser\",\"type\":\"address\"},{\"name\":\"seller\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"royalties\",\"type\":\"u64\"},{\"name\":\"commission\",\"type\":\"u64\"},{\"name\":\"token_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"}]},{\"name\":\"CollectionOfferPlacedEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"collection_offer\",\"type\":\"address\"},{\"name\":\"purchaser\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"token_amount\",\"type\":\"u64\"},{\"name\":\"collection_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionMetadata\"}]},{\"name\":\"EventsV1\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"auction_bid_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::AuctionBidEvent>\"},{\"name\":\"listing_placed_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::ListingPlacedEvent>\"},{\"name\":\"listing_canceled_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::ListingCanceledEvent>\"},{\"name\":\"listing_filled_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::ListingFilledEvent>\"},{\"name\":\"collection_offer_placed_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionOfferPlacedEvent>\"},{\"name\":\"collection_offer_canceled_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionOfferCanceledEvent>\"},{\"name\":\"collection_offer_filled_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionOfferFilledEvent>\"},{\"name\":\"token_offer_placed_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenOfferPlacedEvent>\"},{\"name\":\"token_offer_canceled_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenOfferCanceledEvent>\"},{\"name\":\"token_offer_filled_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenOfferFilledEvent>\"}]},{\"name\":\"ListingCanceledEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"type\",\"type\":\"0x1::string::String\"},{\"name\":\"listing\",\"type\":\"address\"},{\"name\":\"seller\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"token_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"}]},{\"name\":\"ListingFilledEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"type\",\"type\":\"0x1::string::String\"},{\"name\":\"listing\",\"type\":\"address\"},{\"name\":\"seller\",\"type\":\"address\"},{\"name\":\"purchaser\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"commission\",\"type\":\"u64\"},{\"name\":\"royalties\",\"type\":\"u64\"},{\"name\":\"token_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"}]},{\"name\":\"ListingPlacedEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"type\",\"type\":\"0x1::string::String\"},{\"name\":\"listing\",\"type\":\"address\"},{\"name\":\"seller\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"token_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"}]},{\"name\":\"TokenMetadata\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"creator_address\",\"type\":\"address\"},{\"name\":\"collection_name\",\"type\":\"0x1::string::String\"},{\"name\":\"collection\",\"type\":\"0x1::option::Option<0x1::object::Object<0x4::collection::Collection>>\"},{\"name\":\"token_name\",\"type\":\"0x1::string::String\"},{\"name\":\"token\",\"type\":\"0x1::option::Option<0x1::object::Object<0x4::token::Token>>\"},{\"name\":\"property_version\",\"type\":\"0x1::option::Option<u64>\"}]},{\"name\":\"TokenOfferCanceledEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"token_offer\",\"type\":\"address\"},{\"name\":\"purchaser\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"token_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"}]},{\"name\":\"TokenOfferFilledEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"token_offer\",\"type\":\"address\"},{\"name\":\"purchaser\",\"type\":\"address\"},{\"name\":\"seller\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"royalties\",\"type\":\"u64\"},{\"name\":\"commission\",\"type\":\"u64\"},{\"name\":\"token_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"}]},{\"name\":\"TokenOfferPlacedEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"token_offer\",\"type\":\"address\"},{\"name\":\"purchaser\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"token_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"}]}]}},{\"bytecode\":\"0xa11ceb0b060000000d01001a021a480362f90104db021605f102f10207e205a40808860e800106860f4a10d00f99030ae912230c8c13e3060def19080ff71902000101020103010401050106010701080209030a0309000b000c000d0800000e0800030f070100010c1108000614070008160400031a0200031b08000b2006000323060003250600032706000830070004310701000009300b00083207000a160800001000010000120203000013040500001506070000170807000018090a000019090a00000c0b0c00001c0d0e00001d0b0f00001e0b1000001f0b010000210b11000328130101080129141400072a0a1400032b161700032c1a1b020808052d1c0100032e1d0a0108032f1e0a000833202100083421220008352301000836231400083723140002382414000a0a1a250108043927100100043a28290100093b2a0100093c2a1400093d2a1400083e2c2100083f2d2e0003401c300003413117000342311e0003433132000344311a01080845080a0003463610010801471414000348390a000349313a00034a3101000b4b2111000b4c3d11000d120d18111913181b181c261d2627330d332933113c01060b020108000105020b02010800060c02050b02010803020b020108000302050305060c050804080403010b0201080102060c080502060c0b0201080100010b02010800010b0201080303060c0b020108070b02010803020c0806010b02010807010101080801080001060b020109000103060809080a0b020108030c0b02010807050106080a010c0108070208070801010b02010900010b0201090101060c03060c0b02010900050108091e0305030503030303030303030303030306080003030305050b020108000505080c0b0d01080e080e03030106080501080f01080c0106080c020303010b0d01080e01080e01060b0d010900010b0d0109000109000106080e020805080f0405080408040303060c080f030108050408060c0809080b0108060106080601080b0108010208090805030809050805020b020109000502050b020108000508060800050c080b0106080b01080a05080806080005050b020108000208070810010b020108100c636f696e5f6c697374696e67076c697374696e67056572726f72066d6174683634066f626a656374066f7074696f6e067369676e657206737472696e670974696d657374616d7005746f6b656e07726f79616c7479066576656e74730c6665655f7363686564756c65074c697374696e6710546f6b656e5631436f6e7461696e6572064f626a6563740e6173736572745f737461727465640b4665655363686564756c6505636c6f73650f636f6d707574655f726f79616c747906537472696e67186372656174655f746f6b656e76315f636f6e7461696e657205546f6b656e236372656174655f746f6b656e76315f636f6e7461696e65725f776974685f746f6b656e1b657874726163745f6f725f7472616e736665725f746f6b656e76310f657874726163745f746f6b656e76310e436f6e7374727563746f725265660a4f626a656374436f726504696e69740d6c69737465645f6f626a6563740e6c697374696e675f6578697374730673656c6c65720d546f6b656e4d657461646174610e746f6b656e5f6d657461646174610a64656c6574655f7265660944656c6574655265660a657874656e645f72656609457874656e645265660c7472616e736665725f7265660b5472616e736665725265660e6f626a6563745f61646472657373096e6f745f666f756e640b6e6f775f7365636f6e64731d67656e65726174655f7369676e65725f666f725f657874656e64696e6707636f6e766572740a616464726573735f6f66087472616e736665720664656c65746507526f79616c7479064f7074696f6e07546f6b656e49640c6765745f746f6b656e5f69640b6765745f726f79616c7479116765745f726f79616c74795f7061796565156765745f726f79616c74795f6e756d657261746f72176765745f726f79616c74795f64656e6f6d696e61746f72036d696e0769735f736f6d650c64657374726f795f736f6d650d70617965655f61646472657373096e756d657261746f720b64656e6f6d696e61746f72136372656174655f746f6b656e5f69645f7261770e77697468647261775f746f6b656e1a6372656174655f6f626a6563745f66726f6d5f6163636f756e740f67656e65726174655f7369676e65721367656e65726174655f64656c6574655f7265661567656e65726174655f7472616e736665725f7265661b6f626a6563745f66726f6d5f636f6e7374727563746f725f7265660d6465706f7369745f746f6b656e0869735f6f776e6572117065726d697373696f6e5f64656e6965641864697361626c655f756e67617465645f7472616e736665721367656e65726174655f657874656e645f7265661c616464726573735f66726f6d5f636f6e7374727563746f725f7265661a746f6b656e5f6d657461646174615f666f725f746f6b656e76311a746f6b656e5f6d657461646174615f666f725f746f6b656e7632584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c90000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000040308020000000000000003080300000000000000030804000000000000000308010000000000000005200000000000000000000000000000000000000000000000000000000000000000126170746f733a3a6d657461646174615f763184030401000000000000000b454e4f5f4c495354494e4718546865726520657869737473206e6f206c697374696e672e020000000000000014454c495354494e475f4e4f545f535441525445441c546865206c697374696e67206973206e6f7420796574206c6976652e03000000000000000c454e4f545f43524541544f521e54686520656e74697479206973206e6f74207468652063726561746f722e04000000000000000a454e4f545f4f574e45523154686520656e74697479206973206e6f7420746865206f776e6572206f6620746865207772617070656420746f6b656e2e02074c697374696e67010301183078313a3a6f626a6563743a3a4f626a65637447726f757010546f6b656e5631436f6e7461696e6572010301183078313a3a6f626a6563743a3a4f626a65637447726f7570050673656c6c65720101000c6665655f7363686564756c650101000d6c69737465645f6f626a6563740101000e746f6b656e5f6d657461646174610101000f636f6d707574655f726f79616c7479010100000205040b020108071f050c0b0201080322080924080a01020309080522080926080b000300010001110b0038000c010a0129000407050a0703110e270a012b0001110f010b0102010300020001151f0e0038002c0013000c030c020c040c070c060e0311100c050e063801290104150b010b0638021105051a0e050b060b01111238030b0211140b070b04020201000200011f8a010b000c180e1838000c170a1729000409050c0703110e270b172b000c120a12100038010c160a162901044f0b12010b162b011001111511160c1b0e1b11170c190e1b11180c130e1b11190c0f0b010b130b0f0c110c150c0a0a110600000000000000002104340600000000000000000c0705480a0a0c020b0a0b150b110c0d0c0b0c090b020b09350b0b35180b0d351a34111a0c070b070c1e0b190b1e0c060c050587010b1210001438040c1c0e1c3805047f0b1c38060c1d0e1d111e0c1a0e1d111f0c140e1d11200c100a1006000000000000000021046a0600000000000000000c0805780b010b140b100c0e0c0c350b0c35180b0e351a340c080b080c1f0b1a0b1f0c040c0305830107040600000000000000000c040c030b030b040c060c050b050b0602030300002b0f0b010b020b030b0411210c060a000b0606010000000000000011220c050b000b05110402040100002f150b0011230c020e0211240c030e0211250c040e0211260c050e030b010b040b0512012d010e023807020503000101340d0e0138082c011301010c020c030b000b0311280b021114020601040101351a0e0138080c030b010a00111238090409050e0b00010702112a270b032c011301010c020c040b0211140b000b04112802070100010037110b000c020e0238000c010a0129000409050c0703110e270b012b00100214020803000038220a0011230c030e0311260c070e07112b0e0311240c060a010a0011120b020e0311250e03112c12000c040e060b042d000e03112d0c050b000b010b0538030b060b0302090100010037110b000c020e0238000c010a0129000409050c0703110e270b012b00100014020a0100000a040e0038002900020b0100010037110b000c020e0238000c010a0129000409050c0703110e270b012b00100314020c01000200013b270b000c050e0538000c040a0429000409050c0703110e270b042b000c020a02100038010c030a032901041f0b02010b032b0110011115112e0c0105250b02100014380a112f0c010b01020000010000020001000000\",\"abi\":{\"address\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9\",\"name\":\"listing\",\"friends\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::coin_listing\"],\"exposed_functions\":[{\"name\":\"assert_started\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[\"address\"]},{\"name\":\"close\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\",\"&signer\"],\"return\":[\"address\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"]},{\"name\":\"compute_royalty\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\",\"u64\"],\"return\":[\"address\",\"u64\"]},{\"name\":\"create_tokenv1_container\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::TokenV1Container>\"]},{\"name\":\"create_tokenv1_container_with_token\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x3::token::Token\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::TokenV1Container>\"]},{\"name\":\"extract_or_transfer_tokenv1\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::TokenV1Container>\"],\"return\":[]},{\"name\":\"extract_tokenv1\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::TokenV1Container>\"],\"return\":[]},{\"name\":\"fee_schedule\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"]},{\"name\":\"init\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x1::object::Object<0x1::object::ObjectCore>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"],\"return\":[\"signer\",\"0x1::object::ConstructorRef\"]},{\"name\":\"listed_object\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[\"0x1::object::Object<0x1::object::ObjectCore>\"]},{\"name\":\"listing_exists\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[\"bool\"]},{\"name\":\"seller\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[\"address\"]},{\"name\":\"token_metadata\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"]}],\"structs\":[{\"name\":\"Listing\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"object\",\"type\":\"0x1::object::Object<0x1::object::ObjectCore>\"},{\"name\":\"seller\",\"type\":\"address\"},{\"name\":\"fee_schedule\",\"type\":\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"},{\"name\":\"delete_ref\",\"type\":\"0x1::object::DeleteRef\"},{\"name\":\"extend_ref\",\"type\":\"0x1::object::ExtendRef\"}]},{\"name\":\"TokenV1Container\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"token\",\"type\":\"0x3::token::Token\"},{\"name\":\"delete_ref\",\"type\":\"0x1::object::DeleteRef\"},{\"name\":\"transfer_ref\",\"type\":\"0x1::object::TransferRef\"}]}]}},{\"bytecode\":\"0xa11ceb0b060000000e01001e021e580376d40204ca032c05f603af0407a508d90a08fe12800106fe133210b014ab040adb182f0b8a19020c8c19f90c0d8526120e9726020000010101020103010401050106010701080209030a0309000b000c000d000e08010001000f080000100b0000110b000412070100010d190800071a07000b1d08000521070100000e220800022704010001042a06000c2f060009360700043e0200043f0600094a0700094f0700091d04000a4f0b0000130001010000140203000015020400001602050000170206000018020500000c020700001b08020100001c08010100001e09020100001f09010100002002060000230a0b010000240a01010000250001010004300e0f010803310606000632100f0004331105010803340606000c3512130009371415000c381513000c3917010108043a190f0108013b1a010100043c1b0100083d0106000440101e0004411f2000044221010004431f220004441f1b000d452306000d46070f000147240101000248252601000949270100094b282900094c2a15000c4d17010108044e0f19010809502d2e0009510f050009522f01000553013101000e5432300004553401010805561831010009571535000958360f000959360600095a360600035b060600025c372601000d5d2306000c5e380101080b0a193b0108055f3d0501000560311801000a613e0f000a623e06000a633e06000f0d120d1716180d1918231824182816290d071809182d302f333030361838160c18183a2f3a393a3a3c3b3c02060c0b0401080100010b0401080101080201080301010103010b0401080508060c0508060806030b04010805030305060c0b040108070b04010805030304060c0b04010801080603010b08010b0401080909080c0b0a010900080b080c0b04010801050507080106080201080101060b04010900010501060c020b0401090005010b0401080701080c0405080608060301080d010805050b04010900050503080c010900010b0401090002050b0a01090001080b020b0401080105110b0a010900080e0303050b040108050b040108050308010c0c060c060c080d0503080f01080e0106080e01080f0106080f010c020b040108050303060c050302060c03010b0a01090002060c0103050806080601081002081003100b0a010900080e0303050b040108050b040108050308010c0c060c060c0503080f1c0b08010b04010809050b0a0109000b0a0109000b0a010900030b040108090b08010b04010809080b0b0401080503050b0a010900081103030305050812080d080c0b0401080105050507080107080203060c080d0301081202050812010b04010809010b0801090002060c081201080903060c0b04010900050108110106081102070b0a01090003080b04010900050505030303080c22050303050b0a0109000b0a0109000b0a01090003080b030b04010805030503050b0a0109000b0801081308130303030303050505050b04010807080c0b04010801050505070801010807010b0801081301081301060b08010900010608130b746f6b656e5f6f666665720d6170746f735f6163636f756e7404636f696e056572726f72066f626a656374066f7074696f6e067369676e657206737472696e670974696d657374616d7005746f6b656e07726f79616c7479066576656e74730c6665655f7363686564756c65076c697374696e6709436f696e4f666665720a546f6b656e4f6666657211546f6b656e4f66666572546f6b656e563111546f6b656e4f66666572546f6b656e5632064f626a6563740663616e63656c0c636f6c6c656374696f6e76310c636f6c6c656374696f6e7632096578697374735f61740f65787069726174696f6e5f74696d6507657870697265640b4665655363686564756c6506537472696e6710696e69745f666f725f746f6b656e763116696e69745f666f725f746f6b656e76315f656e74727905546f6b656e10696e69745f666f725f746f6b656e763216696e69745f666f725f746f6b656e76325f656e747279057072696365064f7074696f6e10546f6b656e5631436f6e7461696e65720c73656c6c5f746f6b656e76311273656c6c5f746f6b656e76315f656e7472790c73656c6c5f746f6b656e763205636f696e7304436f696e0a6974656d5f70726963650a64656c6574655f7265660944656c6574655265660f63726561746f725f616464726573730f636f6c6c656374696f6e5f6e616d650a746f6b656e5f6e616d651070726f70657274795f76657273696f6e0d546f6b656e4d657461646174610e6f626a6563745f61646472657373096e6f745f666f756e640a616464726573735f6f660869735f6f776e6572117065726d697373696f6e5f64656e6965641a746f6b656e5f6d657461646174615f666f725f746f6b656e763207546f6b656e4964136372656174655f746f6b656e5f69645f7261771a746f6b656e5f6d657461646174615f666f725f746f6b656e763119656d69745f746f6b656e5f6f666665725f63616e63656c6564056f776e65720d6465706f7369745f636f696e730664656c6574650b6e6f775f7365636f6e64730e436f6e7374727563746f725265660b5472616e736665725265661a6372656174655f6f626a6563745f66726f6d5f6163636f756e741567656e65726174655f7472616e736665725f7265661864697361626c655f756e67617465645f7472616e736665720f67656e65726174655f7369676e65721367656e65726174655f64656c6574655f7265660b6c697374696e675f6665650b6665655f616464726573730e7472616e736665725f636f696e73087769746864726177166f70745f696e5f6469726563745f7472616e736665720b546f6b656e446174614964146372656174655f746f6b656e5f646174615f69640f6372656174655f746f6b656e5f696417656d69745f746f6b656e5f6f666665725f706c6163656411616464726573735f746f5f6f626a65637407526f79616c74790e77697468647261775f746f6b656e136765745f6469726563745f7472616e736665721a6469726563745f6465706f7369745f776974685f6f70745f696e046e6f6e65236372656174655f746f6b656e76315f636f6e7461696e65725f776974685f746f6b656e087472616e7366657204736f6d650b6765745f726f79616c7479116765745f726f79616c74795f7061796565176765745f726f79616c74795f64656e6f6d696e61746f72156765745f726f79616c74795f6e756d657261746f720d696e76616c69645f737461746507657874726163740a636f6d6d697373696f6e17656d69745f746f6b656e5f6f666665725f66696c6c65640769735f736f6d650c64657374726f795f736f6d650d70617965655f616464726573730b64656e6f6d696e61746f72096e756d657261746f72584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c90000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000040308060000000000000003080400000000000000030803000000000000000308020000000000000003080100000000000000126170746f733a3a6d657461646174615f763196040501000000000000000f454e4f5f544f4b454e5f4f46464552174e6f20746f6b656e206f6666657220646566696e65642e02000000000000000e454e4f5f434f494e5f4f46464552164e6f20636f696e206f6666657220646566696e65642e030000000000000010454e4f545f544f4b454e5f4f574e45522354686973206973206e6f7420746865206f776e6572206f662074686520746f6b656e2e04000000000000000a454e4f545f4f574e45522954686973206973206e6f7420746865206f776e6572206f662074686520746f6b656e206f666665722e06000000000000000845455850495245441c54686520746f6b656e206f666665722068617320657870697265642e0409436f696e4f66666572010301183078313a3a6f626a6563743a3a4f626a65637447726f75700a546f6b656e4f66666572010301183078313a3a6f626a6563743a3a4f626a65637447726f757011546f6b656e4f66666572546f6b656e5631010301183078313a3a6f626a6563743a3a4f626a65637447726f757011546f6b656e4f66666572546f6b656e5632010301183078313a3a6f626a6563743a3a4f626a65637447726f7570070570726963650101000765787069726564010100096578697374735f61740101000c636f6c6c656374696f6e76310101000c636f6c6c656374696f6e76320101000c6665655f7363686564756c650101000f65787069726174696f6e5f74696d65010100000201260b0a0109000102040c0b040108052803170329080b0202042b052c08062d08062e03030201090b04010807001800010404000102030c670e0138000c070a0729010407050c0b000107041110270a010a0011113801041205170b000107011113270a072a010c090a07290304240a072b0310001411140c0205360a072b020c0a0a0a1001140a0a1002140a0a1003140b0a100414111511160c020b020c050a091005140b070b0011110b091006140b0538020b010c060e0638000c080a083e003a000c030b0638030b0338040a082c0113010c040101010b04111a0a08290304600b082c030105660a08290204660b082c02010201010001020f0e0e0038000c010a0129020407050a07041110270b012b02140202010001030f0e0e0038000c010a0129010407050a07041110270b012b0314020301000001040e00380029010204010001011c110b000c010e0138000c020a0229010409050c07041110270b022b011007140205010001011c130b000c010e0138000c020a0229010409050c07041110270b022b01100714111b230206010001011c110b000c010e0138000c020a0229010409050c07041110270b022b0110051402070100001d570a000a050a060b070c0a0c0f0c0d111c0c090e09111d0c180e18111e0e09111f0c120b0d0b0f0b0a0e09112012010c100e120b102d010b120c110a000e110a050a060c170c0e0c130c140a0e0a1711210c0b0b0e11220c0c0a140b0c0b0b38050b140b1738060c080b130b0839003f000e110a010a020a030a0412022d020a000811250b010b020b0311260b0411270c150e1111110c160b050a160b0011110b060b15111638070b1638080208010400010b0b000b010b020b030b040b050b060b0738090102090100002b4a0a000a020a030b040c070c0c0c0a111c0c060e06111d0c140e14111e0e06111f0c0f0b0a0b0c0b070e06112012010c0d0e0f0b0d2d010b0f0c0e0a000e0e0a020a030c130c0b0c100c110a0b0a1311210c080b0b11220c090a110b090b0838050b110b1338060c050b100b0539003f000e0e0a0112032d030e0e11110c120b020a120b0011110b030b01111438070b123808020a01040001080b000b010b020b030b04380a01020b010001011c110b000c010e0138000c020a0229010409050c07041110270b022b01100614020c010004000102032cc6010e0138000c1b0a1b29020407050c0b000107041110270a1b2a020c1f0a1f1001140b1f1002140b020b0311150c180a000a18060100000000000000112a0c170a0138030c0f0a0f112b042a0b0f0b17112c380b0c0405350a000b17112e0c0a0a000a0a0b0f380c0b0a380d0c040b040c0b0a1811310c110b0138030b0011110b1b0e1111320e1111330e1111340b1811160c190c140c130c150c1c0c160c050a1c29010452055507041110270a1c2a010c1e111b0a1e10071423045f05640b1e0107001135270a1e1006140c0e0a1c3b00046c05710b1e0107031110270a1c3c0036000a0e380e0c060a0e0b14180b131a0c120d060a12380e0c100b150b1038040b1e1005140c0d0a0d0a0e11370c090d060a09380e0c080a0d11220b0838040a160b0638040b0d0a1c0b050b160b0e0b120b090b19380f0b1c38080c1a0e1a38000c1d0a1d3e003a000c070b1a38030b0738040a1d2c0113010c0c0101010b0c111a0a1d290304be010b1d2c030105c4010a1d290204c4010b1d2c02010b0b020d0104040001020301070b000b010b020b03381001020e0104040001020339d5010e0138000c200a2029030407050c0b000107041110270a0011110c1c0a202b031000140c1d0a1c0a1d381121041a051f0b000107021113270a0138030c100a000a1d0b1038120a1d38130c120e12381404410b00010b1238150c130e13113c0c0e0e13113d0c0b0e13113e0c0d0b0e0b0b0b0d0c040c030c0205480b0011110601000000000000000600000000000000000c040c030c020b020b030b040c170c150c190b0138030b1c0b200b190b150b170b1d11140c1e0c180c160c1a0c210c1b0c050a2129010462056507041110270a212a010c23111b0a2310071423046f05740b230107001135270a231006140c0f0a213b00047c0581010b230107031110270a213c0036000a0f380e0c060a0f0b18180b161a0c140d060a14380e0c110b1a0b1138040b231005140c0c0a0c0a0f11370c090d060a09380e0c080a0c11220b0838040a1b0b0638040b0c0a210b050b1b0b0f0b140b090b1e380f0b2138080c1f0e1f38000c220a223e003a000c070b1f38030b0738040a222c0113010c0a0101010b0a111a0a22290304ce010b222c030105d4010a22290204d4010b222c020102030002000201020202030100010101020000081800\",\"abi\":{\"address\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9\",\"name\":\"token_offer\",\"friends\":[],\"exposed_functions\":[{\"name\":\"cancel\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[]},{\"name\":\"collectionv1\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOfferTokenV1\"]},{\"name\":\"collectionv2\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOfferTokenV2\"]},{\"name\":\"exists_at\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[\"bool\"]},{\"name\":\"expiration_time\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[\"u64\"]},{\"name\":\"expired\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[\"bool\"]},{\"name\":\"fee_schedule\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"]},{\"name\":\"init_for_tokenv1\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"]},{\"name\":\"init_for_tokenv1_entry\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\"],\"return\":[]},{\"name\":\"init_for_tokenv2\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x4::token::Token>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"]},{\"name\":\"init_for_tokenv2_entry\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x4::token::Token>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\"],\"return\":[]},{\"name\":\"price\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[\"u64\"]},{\"name\":\"sell_tokenv1\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\",\"0x1::string::String\",\"u64\"],\"return\":[\"0x1::option::Option<0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::TokenV1Container>>\"]},{\"name\":\"sell_tokenv1_entry\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\",\"0x1::string::String\",\"u64\"],\"return\":[]},{\"name\":\"sell_tokenv2\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[]}],\"structs\":[{\"name\":\"CoinOffer\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"coins\",\"type\":\"0x1::coin::Coin<T0>\"}]},{\"name\":\"TokenOffer\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"fee_schedule\",\"type\":\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"},{\"name\":\"item_price\",\"type\":\"u64\"},{\"name\":\"expiration_time\",\"type\":\"u64\"},{\"name\":\"delete_ref\",\"type\":\"0x1::object::DeleteRef\"}]},{\"name\":\"TokenOfferTokenV1\",\"is_native\":false,\"abilities\":[\"copy\",\"drop\",\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"creator_address\",\"type\":\"address\"},{\"name\":\"collection_name\",\"type\":\"0x1::string::String\"},{\"name\":\"token_name\",\"type\":\"0x1::string::String\"},{\"name\":\"property_version\",\"type\":\"u64\"}]},{\"name\":\"TokenOfferTokenV2\",\"is_native\":false,\"abilities\":[\"copy\",\"drop\",\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"token\",\"type\":\"0x1::object::Object<0x4::token::Token>\"}]}]}},{\"bytecode\":\"0xa11ceb0b060000000e0100180218380350f30104c3022805eb02d50307c006b30708f30d4006b30e4b10fe0e93030a9112100ba112020ca312c2070de519020ee719020000010101020103010401050106010701080009000a000b000c08010001000d0600050e070100010b0f0800051208000a13080008150700061d07010000092606000b2f080005320200023a04010001001000010100001102010100001403010100001604010100001704050100001806010100001903050100001a07010100001b08010100001c09010100001e050a0100001f0001010000200201010000210b01010000220c0101000b27050e0007280f10000b29111200032a131300052b15100108032c131300082d171800092e1a0101080b301c1b0005311e1f0208080a332110000a342213000135230101000b362425000537261e010809381a0101080639162801000b3b2a1000023c2b2c0100023d2d1301000b3e2e2f00023f302c01000140310101000a2422130004413213000942330101080b430510000b0a05210013141619001606160416181d1b161d141e1907160e1605161f13211622162416251628190b160d1602060c0b020108030002060c0a0b0201080304060c0b020108040b020108050307060c0508060806030b0201080503010b0201080307060c0508060a0806030b020108050a0304060c0a0b020108040b020108050a0307060c0a0b020108040b020108050a030a030a0b020108030a030a060c0508060a0806030b020108050a030a030a0b020108030a03010b07010303060c0b020108030303060c0a0b020108030a030605050b020108050503080801080801060c0105020b02010803060c02050b02010805010301080301060b02010900010900010a02010806010805060b0201090008060505030808010b0201080905060c0508060806030208090804010b02010900010b0201090108080a0b020108050b00010900030b020108030c0b02010804060c010b02010805020b020108050303060c050303060c0b020108040b02010805020c080a0106080a010b02010804010b0701090011030b0b0109000b0b0109000b0b010900030b02010805050b020108030303060c0b0b0109000503050808080601060b0201080302060c03010b0b01090001060b0b010900020b020108030302050302070b0b0109000302050b0b010900020303090b020109000806050505030303080804050505070b000109000c636f696e5f6c697374696e670d6170746f735f6163636f756e7404636f696e056572726f72066d6174683634066f626a656374066f7074696f6e067369676e657206737472696e67066576656e74730c6665655f7363686564756c65076c697374696e6711466978656450726963654c697374696e670d50757263686173654576656e74064f626a656374074c697374696e670f656e645f66697865645f707269636514656e645f66697865645f70726963655f6d616e790a4f626a656374436f72650b4665655363686564756c6510696e69745f66697865645f707269636506537472696e671c696e69745f66697865645f70726963655f666f725f746f6b656e763125696e69745f66697865645f70726963655f666f725f746f6b656e76315f696e7465726e616c21696e69745f66697865645f70726963655f666f725f746f6b656e76315f6d616e7919696e69745f66697865645f70726963655f696e7465726e616c15696e69745f66697865645f70726963655f6d616e79206c6973745f616e645f7570646174655f66697865645f70726963655f6d616e79286c6973745f616e645f7570646174655f66697865645f70726963655f746f6b656e76315f6d616e79064f7074696f6e0570726963650870757263686173650d70757263686173655f6d616e79127570646174655f66697865645f7072696365177570646174655f66697865645f70726963655f6d616e79097075726368617365720a636f6d6d697373696f6e09726f79616c746965730d546f6b656e4d657461646174610e746f6b656e5f6d657461646174610a616464726573735f6f6605636c6f7365117065726d697373696f6e5f64656e6965640e6f626a6563745f61646472657373096e6f745f666f756e64047574663815656d69745f6c697374696e675f63616e63656c656410546f6b656e5631436f6e7461696e6572186372656174655f746f6b656e76315f636f6e7461696e657207636f6e766572740e436f6e7374727563746f725265660b6665655f616464726573730b6c697374696e675f6665650e7472616e736665725f636f696e7304696e69741b6f626a6563745f66726f6d5f636f6e7374727563746f725f72656613656d69745f6c697374696e675f706c6163656404736f6d6504436f696e0e6173736572745f737461727465640877697468647261770576616c75650f636f6d707574655f726f79616c747907657874726163740d6465706f7369745f636f696e73036d696e13656d69745f6c697374696e675f66696c6c65640673656c6c6572584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c900000000000000000000000000000000000000000000000000000000000000010308050000000000000003080400000000000000030803000000000000000308060000000000000003080200000000000000030801000000000000000a020c0b6669786564207072696365126170746f733a3a6d657461646174615f7631fe020601000000000000000b454e4f5f4c495354494e4718546865726520657869737473206e6f206c697374696e672e02000000000000000e454e4f5f4255595f49545f4e4f57265468697320697320616e2061756374696f6e20776974686f757420627579206974206e6f772e03000000000000000c454249445f544f4f5f4c4f57215468652070726f706f7365642062696420697320696e73756666696369656e742e0400000000000000124541554354494f4e5f4e4f545f454e4445441e5468652061756374696f6e20686173206e6f742079657420656e6465642e05000000000000000e4541554354494f4e5f454e4445441e5468652061756374696f6e2068617320616c726561647920656e6465642e06000000000000000b454e4f545f53454c4c45521d54686520656e74697479206973206e6f74207468652073656c6c65722e0111466978656450726963654c697374696e67010301183078313a3a6f626a6563743a3a4f626a65637447726f7570010570726963650101000002011e0301020423051e0324032503001600010401000d2a0a01110f0c070a0011100c030a010b0011110c040c020b030a02210410051307031112270e0138000c050a053b00041a051d07051114270a053e003a000c060b04070611150b050b020b060b07380102010104010013160600000000000000000c020a020e01410523041305080a000e010a0242051438020b02060100000000000000160c0205020b0001020201040001070b000b010b020b033803010203010400010a0b000b010b020b030b040b050b0638040102040300001b0e0a000b010b020b030b0411170c070b000b0738050b050b0638030205010400131f0600000000000000000c070a070e06411323041c05080a000a010a020e030a074218140a040a050e060a074213143804010b07060100000000000000160c0705020b00010206030000202b0a000b010a020a030c070c050c0a0c0b0a0b0a0511190a050b07111a38060b0b0b0a0b05111c0c040c090a0339000c060e090b063f000e0438070c080b02070611150e0838000b0011100b030a08110f38080b080207010400131c0600000000000000000c040a040e03411323041905080a000e010a044227140a020e030a044213143803010b04060100000000000000160c0405020b0001020801040100010a0a000b010b020b0338090b000b050b06380a020901040100010d0a000b010b020b030b040b050b06380b0b000b080b09380a020a0100010010100e0038000c010a013b000407050a07051114270b013d00370014380c020b0104010029590e0111200c080a083b000407050c0b000107051114270b083e003a000c0a0a000b0a380d0c030b000b010b03070611150c120c040c090c0c0a09110f0c110e04380e0c0b0a090a0b11230c0f0c0e0a090a0c11110c070c100a0f0600000000000000002204380d040a0f380f0c0d0b0e0b0d38100a070a0b11260c060e04380e0a0611270c020d040b02380f0c050a0711190b0538100a100b0438100b070b120e0938000b100b0c11100b0b0b060b0f0b113811020c0104010013160600000000000000000c020a020e01410523041305080a000e010a0242051438120b02060100000000000000160c0205020b0001020d0104010034300a0011100c040a0111290c030b040b0321040b05100b000107031112270e0138000c050a053b000417051c0b000107051114270b053c000c060a020b063600150a01112a070611150e0138000b0011100b020b01110f3808020e01040100131a0600000000000000000c030a030e02411323041705080a000e010a034205140e020a0342131438130b03060100000000000000160c0305020b0001020000001600\",\"abi\":{\"address\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9\",\"name\":\"coin_listing\",\"friends\":[],\"exposed_functions\":[{\"name\":\"end_fixed_price\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[]},{\"name\":\"end_fixed_price_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>>\"],\"return\":[]},{\"name\":\"init_fixed_price\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x1::object::ObjectCore>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[]},{\"name\":\"init_fixed_price_for_tokenv1\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[]},{\"name\":\"init_fixed_price_for_tokenv1_internal\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"]},{\"name\":\"init_fixed_price_for_tokenv1_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"vector<0x1::string::String>\",\"u64\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"vector<u64>\"],\"return\":[]},{\"name\":\"init_fixed_price_internal\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x1::object::ObjectCore>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"]},{\"name\":\"init_fixed_price_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<0x1::object::Object<0x1::object::ObjectCore>>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"vector<u64>\"],\"return\":[]},{\"name\":\"list_and_update_fixed_price_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<0x1::object::Object<0x1::object::ObjectCore>>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"vector<u64>\",\"vector<u64>\",\"vector<0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>>\",\"vector<u64>\"],\"return\":[]},{\"name\":\"list_and_update_fixed_price_tokenv1_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"vector<0x1::string::String>\",\"u64\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"vector<u64>\",\"vector<u64>\",\"vector<0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>>\",\"vector<u64>\"],\"return\":[]},{\"name\":\"price\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[\"0x1::option::Option<u64>\"]},{\"name\":\"purchase\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[]},{\"name\":\"purchase_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>>\"],\"return\":[]},{\"name\":\"update_fixed_price\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\",\"u64\"],\"return\":[]},{\"name\":\"update_fixed_price_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>>\",\"vector<u64>\"],\"return\":[]}],\"structs\":[{\"name\":\"FixedPriceListing\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"price\",\"type\":\"u64\"}]},{\"name\":\"PurchaseEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"purchaser\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"commission\",\"type\":\"u64\"},{\"name\":\"royalties\",\"type\":\"u64\"}]}]}},{\"bytecode\":\"0xa11ceb0b060000000c01001002103003409c0104dc010c05e801c60107ae03f60508a4094006e40937109b0ae4040aff0e2a0ca90fed080d961810000001010102010301040105010600070008080000090a00000a0a00000b0a00000c0600000d0a00030e07010001031d0600021f040106010521070003260200000f0001000010020300001102030000120401000013050600001407050000150701000016020300001708010000180901000019090100001a090100001b0a010003240c0601080125030300032710110003281213000329121400032a101601060714100100012b030300012c030300032d12180108042e100600032f1a1b0108013003030005311c1d0002321e01010603332014000634011d01000d0b1215160b180b1b151d2101060b0601080000020b0601080003010302060c05010b06010800010506060c050303030303060c0b060108000503060c0b060108000304060c0b06010800030301080001060b06010900030305050703030303050506080505080a0807050c080001060c01080a0106080a010807010c010804010b08010900080805080a080a0807050c0c0800010b060109000405050708000809020b06010900050101010a0201080902070b08010900090009060c0505050c0c0b0601080008090809010608070108030c6665655f7363686564756c65056572726f72056576656e74066f626a656374067369676e657206737472696e6709747970655f696e666f066576656e74730b4665655363686564756c651346697865645261746542696464696e6746656513466978656452617465436f6d6d697373696f6e134669786564526174654c697374696e674665650d4d75746174696f6e4576656e741850657263656e7461676552617465436f6d6d697373696f6e064f626a6563740d6173736572745f6578697374730b62696464696e675f6665650a636f6d6d697373696f6e05656d7074790b6665655f6164647265737304696e69740a696e69745f656e7472790b6c697374696e675f6665650f7365745f6665655f616464726573731a7365745f66697865645f726174655f62696464696e675f666565197365745f66697865645f726174655f636f6d6d697373696f6e1a7365745f66697865645f726174655f6c697374696e675f6665651e7365745f70657263656e746167655f726174655f636f6d6d697373696f6e0a657874656e645f72656609457874656e645265660f6d75746174696f6e5f6576656e74730b4576656e7448616e646c6510757064617465645f7265736f7572636506537472696e670b64656e6f6d696e61746f72096e756d657261746f720e6f626a6563745f61646472657373096e6f745f666f756e640e436f6e7374727563746f725265661a6372656174655f6f626a6563745f66726f6d5f6163636f756e741367656e65726174655f657874656e645f7265660f67656e65726174655f7369676e6572106e65775f6576656e745f68616e646c6510696e76616c69645f617267756d656e740c6f75745f6f665f72616e67651b6f626a6563745f66726f6d5f636f6e7374727563746f725f7265660a616464726573735f6f660869735f6f776e6572117065726d697373696f6e5f64656e69656404757466380a656d69745f6576656e741d67656e65726174655f7369676e65725f666f725f657874656e64696e6709747970655f6e616d65584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c90000000000000000000000000000000000000000000000000000000000000001030802000000000000000308030000000000000003080400000000000000030801000000000000000a020c0b6665655f61646472657373126170746f733a3a6d657461646174615f7631cf0404010000000000000010454e4f5f4645455f5343484544554c451b4665655363686564756c6520646f6573206e6f742065786973742e0200000000000000144544454e4f4d494e41544f525f49535f5a45524f2d5468652064656e6f6d696e61746f7220696e2061206672616374696f6e2063616e6e6f74206265207a65726f2e03000000000000001045455843454544535f4d4158494d554d3d5468652076616c756520726570726573656e7465642062792061206672616374696f6e2063616e6e6f742062652067726561746572207468616e20312e04000000000000000a454e4f545f4f574e4552395468652070617373656420696e207369676e6572206973206e6f7420746865206f776e6572206f6620746865206d61726b6574706c6163652e050b4665655363686564756c65010301183078313a3a6f626a6563743a3a4f626a65637447726f75701346697865645261746542696464696e67466565010301183078313a3a6f626a6563743a3a4f626a65637447726f757013466978656452617465436f6d6d697373696f6e010301183078313a3a6f626a6563743a3a4f626a65637447726f7570134669786564526174654c697374696e67466565010301183078313a3a6f626a6563743a3a4f626a65637447726f75701850657263656e7461676552617465436f6d6d697373696f6e010301183078313a3a6f626a6563743a3a4f626a65637447726f7570040a636f6d6d697373696f6e0101000b62696464696e675f6665650101000b6665655f616464726573730101000b6c697374696e675f66656501010000020313051c08071e0b080108040102011003020201110303020116030402012008090502022203230300010000060d0b0038000c010a0129000407050a0703110e270b01010201010001010d190e0038000c040a0429000407050a0703110e270b040c030a03290104150b032b011000140c0205170600000000000000000c020b02020201000202050e340e0038000c070a0729000407050a0703110e270b070c060a06290204150b062b021001140c0305320a062905042e0b062b050c080b010a081002140b081003140c050c04350b0435180b05351a340c0205300600000000000000000c020b020c030b0302030104000f1b0b000b010c04110f0c020e0211100c030e0211110c050b040b030e05380112000c060e050b062d000e0511130b020b050101020401000100060f0e0038000c010a0129000407050a0703110e270b012b00100414020501000017400a050a04250405050a0b000107011114270a0406000000000000000022040f05140b000107001115270b000b010c0a110f0c080e0811100c090e0811110c0c0b0a0b090e0c380112000c0d0e0c0b0d2d000e0c11130b080b0c0c0b0c070e0b0b0212012d010e0b0b0312032d030b040b0512050c060e0b0b062d050e073802020601040001090b000b010b020b030b040b051105010207010001030d190e0038000c040a0429000407050a0703110e270b040c030a03290304150b032b031005140c0205170600000000000000000c020b0202080104010019270e0138000c040a0429000407050c0b00010703110e270b040c030b010b00111738030414051707021119270b032a000c050b020a050f04150704111a0c060b050f060b0612043804020901040200011f3a0b000b010c090c030e0938000c060a062900040b05100b03010703110e270b060c050b090b03111738030418051b07021119270a052b001007111c0b050c040c080a04290104280b042c01010b080c070e070b0212012d0138050c0a0e0711170b0a0c0b2a000f060b0b12043804020a0104030002051f410b000b010c090c030e0938000c060a062900040b05100b03010703110e270b060c050b090b03111738030418051b07021119270a052b001007111c0b050c040c080a04290204290b042c0201052f0a042905042f0b042c05010b080c070e070b0212022d0238050c0a0e0711170b0a0c0b2a000f060b0b12043804020b01040200031f3a0b000b010c090c030e0938000c060a062900040b05100b03010703110e270b060c050b090b03111738030418051b07021119270a052b001007111c0b050c040c080a04290304280b042c03010b080c070e070b0212032d0338050c0a0e0711170b0a0c0b2a000f060b0b12043804020c0104030002051f560a030a02250405050a0b000107011114270a0206000000000000000022040f05140b000107001115270b000b010c0a0c040e0a38000c070a072900041f05240b04010703110e270b070c060b0a0b0411173803042c052f07021119270a062b001007111c0b060c050c090a052902043d0b052c020105430a05290504430b052c05010b090c080e080b020b0312052d0538050c0b0e0811170b0b0c0c2a000f060b0c12043804020100020005010500000003000002000100\",\"abi\":{\"address\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9\",\"name\":\"fee_schedule\",\"friends\":[],\"exposed_functions\":[{\"name\":\"assert_exists\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"],\"return\":[]},{\"name\":\"bidding_fee\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[\"u64\"]},{\"name\":\"commission\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[\"u64\"]},{\"name\":\"empty\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"address\"],\"return\":[]},{\"name\":\"fee_address\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"],\"return\":[\"address\"]},{\"name\":\"init\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"address\",\"u64\",\"u64\",\"u64\",\"u64\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"]},{\"name\":\"init_entry\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"address\",\"u64\",\"u64\",\"u64\",\"u64\"],\"return\":[]},{\"name\":\"listing_fee\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[\"u64\"]},{\"name\":\"set_fee_address\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"address\"],\"return\":[]},{\"name\":\"set_fixed_rate_bidding_fee\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[]},{\"name\":\"set_fixed_rate_commission\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[]},{\"name\":\"set_fixed_rate_listing_fee\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[]},{\"name\":\"set_percentage_rate_commission\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\"],\"return\":[]}],\"structs\":[{\"name\":\"FeeSchedule\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"fee_address\",\"type\":\"address\"},{\"name\":\"extend_ref\",\"type\":\"0x1::object::ExtendRef\"},{\"name\":\"mutation_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::MutationEvent>\"}]},{\"name\":\"FixedRateBiddingFee\",\"is_native\":false,\"abilities\":[\"drop\",\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"bidding_fee\",\"type\":\"u64\"}]},{\"name\":\"FixedRateCommission\",\"is_native\":false,\"abilities\":[\"drop\",\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"commission\",\"type\":\"u64\"}]},{\"name\":\"FixedRateListingFee\",\"is_native\":false,\"abilities\":[\"drop\",\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"listing_fee\",\"type\":\"u64\"}]},{\"name\":\"MutationEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"updated_resource\",\"type\":\"0x1::string::String\"}]},{\"name\":\"PercentageRateCommission\",\"is_native\":false,\"abilities\":[\"drop\",\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"denominator\",\"type\":\"u64\"},{\"name\":\"numerator\",\"type\":\"u64\"}]}]}},{\"bytecode\":\"0xa11ceb0b060000000e01002202225c037eef0204ed032e059b04b20407cd08d60b08a314800106a3153c10df15a5050a841b2c0bb01b020cb21b830f0db52a100ec52a020000010101020103010401050106010701080109020a030b030c030a000d000e000f0010080100010011080000120b0000130b000514070100010f1b0800081c07000b1f0800062407010000102508000d280800022b04010001052e06000e310600053e0200053f06000a4c07000a2804000a4d07000e4e06000c4c0b000015000101000016020300001702040000180205000019020600001a020500000e020700001d08020100001e080101000020090201000021090101000022020600002302060000260a0b010000270a01010000290c01010005320f1001080333060600073411100005351205010803360606000e371314000e381514000e3917010108053a19100108013b1a010100053c1b0100093d0106000540111e0005411f2000054221010005431f220005441f1b000f452306000f460710000147240101000248252601000a492701000e4a17010108054b101901080a4f292a000a502b2c000a511005000a522d01000653012f01001054302e000555320101080656182f01000a572a33000a583410000a593406000a5a3406000e5b2a3500035c060600025d36260100045e3706000f5f2306000260380601000e61390101080d621913010803630606000d0c193c010806643e05010006652f1801000c663f10000c673f06000c683f06000e69403500100e130e1716180e1918231824182616270e071809182c2e2e312f2e361839183a160d183b3b2e3b3d3b3e3d3f3d02060c0b0401080100010b0401080101080201080301010103010b0401080507060c0508060b0401080503030306060c0b040108070b0401080503030304060c0b04010801080603010b08010b0401080903060c0b040108010b0401080a09080d0b0b010900080d0b040108010505070801080c06080201080101060b04010900010501060c020b0401090005010b0401080701080d02050806010805060b0401090005050303080d010900010b0401090002050b0b01090001080c020b040108010511030b0b01090005080e0303050b040108050b040108050308010c0c060c060c03080f01080e0106080e01080f0106080f010c020b040108050303060c050302060c03010b0b01090002060c01250b08010b0401080903030303030305030b0b0109000b0b0109000b040108010505050708010708020b0b010900030b040108090b08010b04010809080c030b040108050303050b0b010900081003030305050811081208130405080608060301081203060c08120301081102050811010b04010809010b0801090002060c081101080903060c0b04010900050108100106081001081302070b0b0109000302030301060b0b010900080b0401090005050503030308132a05030303030303030305030b0b0109000b0b0109000b040108010505050708010708030b0b01090003080c03030b0401080503030503050b0b0109000b0801081408140303030303050505081301080a010b0801081401081401060b0801090001060814010b0401080a10636f6c6c656374696f6e5f6f666665720d6170746f735f6163636f756e7404636f696e056572726f72066d6174683634066f626a656374066f7074696f6e067369676e657206737472696e670974696d657374616d7005746f6b656e0a636f6c6c656374696f6e07726f79616c7479066576656e74730c6665655f7363686564756c65076c697374696e6709436f696e4f666665720f436f6c6c656374696f6e4f6666657216436f6c6c656374696f6e4f66666572546f6b656e563116436f6c6c656374696f6e4f66666572546f6b656e5632064f626a6563740663616e63656c0c636f6c6c656374696f6e76310c636f6c6c656374696f6e7632096578697374735f61740f65787069726174696f6e5f74696d6507657870697265640b4665655363686564756c6506537472696e6710696e69745f666f725f746f6b656e763116696e69745f666f725f746f6b656e76315f656e7472790a436f6c6c656374696f6e10696e69745f666f725f746f6b656e763216696e69745f666f725f746f6b656e76325f656e7472790570726963650972656d61696e696e67064f7074696f6e10546f6b656e5631436f6e7461696e65720c73656c6c5f746f6b656e76311273656c6c5f746f6b656e76315f656e74727905546f6b656e0c73656c6c5f746f6b656e763205636f696e7304436f696e0a6974656d5f70726963650a64656c6574655f7265660944656c6574655265660f63726561746f725f616464726573730f636f6c6c656374696f6e5f6e616d6512436f6c6c656374696f6e4d657461646174610e6f626a6563745f61646472657373096e6f745f666f756e640a616464726573735f6f660869735f6f776e6572117065726d697373696f6e5f64656e6965641f636f6c6c656374696f6e5f6d657461646174615f666f725f746f6b656e76321f636f6c6c656374696f6e5f6d657461646174615f666f725f746f6b656e76311e656d69745f636f6c6c656374696f6e5f6f666665725f63616e63656c6564056f776e65720d6465706f7369745f636f696e730664656c6574650b6e6f775f7365636f6e64730e436f6e7374727563746f725265660b5472616e736665725265661a6372656174655f6f626a6563745f66726f6d5f6163636f756e741567656e65726174655f7472616e736665725f7265661864697361626c655f756e67617465645f7472616e736665720f67656e65726174655f7369676e65721367656e65726174655f64656c6574655f7265660b6c697374696e675f6665650b6665655f616464726573730e7472616e736665725f636f696e73087769746864726177166f70745f696e5f6469726563745f7472616e736665721c656d69745f636f6c6c656374696f6e5f6f666665725f706c6163656411616464726573735f746f5f6f626a65637407526f79616c747907546f6b656e49640d546f6b656e4d65746164617461136372656174655f746f6b656e5f69645f7261770e77697468647261775f746f6b656e136765745f6469726563745f7472616e736665721a6469726563745f6465706f7369745f776974685f6f70745f696e046e6f6e65236372656174655f746f6b656e76315f636f6e7461696e65725f776974685f746f6b656e087472616e7366657204736f6d650b6765745f726f79616c7479116765745f726f79616c74795f7061796565176765745f726f79616c74795f64656e6f6d696e61746f72156765745f726f79616c74795f6e756d657261746f721a746f6b656e5f6d657461646174615f666f725f746f6b656e76310d696e76616c69645f73746174650765787472616374036d696e0a636f6d6d697373696f6e0576616c75651c656d69745f636f6c6c656374696f6e5f6f666665725f66696c6c656411636f6c6c656374696f6e5f6f626a65637410696e76616c69645f617267756d656e740769735f736f6d650c64657374726f795f736f6d650d70617965655f616464726573730b64656e6f6d696e61746f72096e756d657261746f721a746f6b656e5f6d657461646174615f666f725f746f6b656e7632584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000004030806000000000000000308050000000000000003080400000000000000030802000000000000000308010000000000000003080300000000000000126170746f733a3a6d657461646174615f7631900506010000000000000014454e4f5f434f4c4c454354494f4e5f4f464645521c4e6f20636f6c6c656374696f6e206f6666657220646566696e65642e02000000000000000e454e4f5f434f494e5f4f46464552164e6f20636f696e206f6666657220646566696e65642e03000000000000000f454e4f5f544f4b454e5f4f46464552174e6f20746f6b656e206f6666657220646566696e65642e04000000000000000a454e4f545f4f574e45522e54686973206973206e6f7420746865206f776e6572206f662074686520636f6c6c656374696f6e206f666665722e05000000000000001545494e434f52524543545f434f4c4c454354494f4e38546865206f66666572656420746f6b656e206973206e6f742077697468696e2074686520657870656374656420636f6c6c656374696f6e2e06000000000000000845455850495245442154686520636f6c6c656374696f6e206f666665722068617320657870697265642e0409436f696e4f66666572010301183078313a3a6f626a6563743a3a4f626a65637447726f75700f436f6c6c656374696f6e4f66666572010301183078313a3a6f626a6563743a3a4f626a65637447726f757016436f6c6c656374696f6e4f66666572546f6b656e5631010301183078313a3a6f626a6563743a3a4f626a65637447726f757016436f6c6c656374696f6e4f66666572546f6b656e5632010301183078313a3a6f626a6563743a3a4f626a65637447726f7570080570726963650101000765787069726564010100096578697374735f61740101000972656d61696e696e670101000c636f6c6c656374696f6e76310101000c636f6c6c656374696f6e76320101000c6665655f7363686564756c650101000f65787069726174696f6e5f74696d650101000002012a0b0b0109000102050e0b040108052c03230319032d080c0202022f053008060302010b0b04010807001800010404000102030d640e0138000c060a0629010407050c0b000107041111270a010a0011123801041205170b000107021114270a062a010c080a06290304240a062b0310001411150c02052f0a062b020c0a0a0a1001140b0a10021411160c020b020c040a081003140b060b0011120a081004140b081005140b0438020b010c050e0538000c070a073e003a000c030b0538030b0338040a072c0113010c09010101010b09111a0a072903045d0b072c030105630a07290204630b072c0201020101000102100e0e0038000c010a0129020407050a07051111270b012b0214020201000103100e0e0038000c010a0129010407050a07041111270b012b0314020301000001040e00380029010204010001011c110b000c010e0138000c020a0229010409050c07041111270b022b011006140205010001011c130b000c010e0138000c020a0229010409050c07041111270b022b01100614111b230206010001011c110b000c010e0138000c020a0229010409050c07041111270b022b0110031402070100001d550a000a030a040a050b060c0b0c070c100c0e111c0c0a0e0a111d0c170e17111e0e0a111f0c130b0e0b100b070b0b0e0a112012010c110e130b112d010b130c120a000e120a030a040a05180c160c0f0c140c150a0f0a1611210c0c0b0f11220c0d0a150b0d0b0c38050b150b1638060c080b140b0839003f000e120a010a0212022d020a000811250e1211120c090b030a090b0011120b040b050b010b02111638070b0938080208010400010a0b000b010b020b030b040b050b0638090102090100001d500a000a020a030a040b050c0a0c060c0f0c0d111c0c090e09111d0c160e16111e0e09111f0c120b0d0b0f0b060b0a0e09112012010c100e120b102d010b120c110a000e110a020a030a04180c150c0e0c130c140a0e0a1511210c0b0b0e11220c0c0a140b0c0b0b38050b140b1538060c070b130b0739003f000e110a0112032d030e1111120c080b020a080b0011120b030b040b01111538070b083808020a01040001090b000b010b020b030b040b05380a01020b010001011c110b000c010e0138000c020a0229010409050c07041111270b022b01100414020c010001011c110b000c010e0138000c020a0229010409050c07041111270b022b01100514020d0100040001020328f7010e0138000c100a1029020407050c0b000107051111270a102a020c140a141001140b141002140b020b0311280c270a000a2706010000000000000011290c260a0138030c1e0a1e112a042a0b1e0b26112b380b0c0405350a000b26112d0c170a000a170b1e380c0b17380d0c040b040c180a2711300c200b0138030b0011120b100e2011310e2011320e2011330b2711340c280c230c220c240c110c250c0b0a1129010452055507041111270a112a010c13111b0a1310061423045f05640b130107001135270a131004140c1d0a113b00046c05710b130107031111270a113c0036000a1d380e0c0d0a1d0b230b220c1a0c1c0c090a1a060000000000000000210484010600000000000000000c060598010a090c050b090b1c0b1a0c0c0c0a0c070b050b07350b0a35180b0c351a3411370c060b060c210d0d0a21380e0c1f0b240b1f38040a131003140c1b0a1b0a1d11380c160a160e0d380f11370c080d0d0b08380e0c150a1b11220b1538040a250b0d38040b1b0a110b0b0b250b1d0b210b160b2838100a13100514060100000000000000170a130f05150b131005140600000000000000002104f5010b1138080c0f0e0f38000c120a123e003a000c0e0b0f38030b0e38040a122c0113010c19010101010b19111a0a12290304ef010b122c030105f5010a12290204f5010b122c02010b18020e0104040001020301070b000b010b020b03381101020f010404000102033a82020e0138000c110a1129030407050c0b000107051111270a112a030c150a0238120b15100014210417051c0b00010701113c270a0138030c200a000a020b2038130a0238140c220e223815043c0b2238160c230e2311400c1e0e2311410c190e2311420c1c0b1e0b190b1c0c050c040c0305430a0011120601000000000000000600000000000000000c050c040c030b030b040b050c270c250c290b0138030b0011120b110b290b250b270b0211430c2c0c280c260c2a0c120c2b0c0c0a122901045e056107041111270a122a010c14111b0a1410061423046b05700b140107001135270a141004140c1f0a123b000478057d0b140107031111270a123c0036000a1f380e0c0e0a1f0b280b260c1a0c1d0c0a0a1a060000000000000000210490010600000000000000000c0705a4010a0a0c060b0a0b1d0b1a0c0d0c0b0c080b060b08350b0b35180b0d351a3411370c070b070c240d0e0a24380e0c210b2a0b2138040a141003140c1b0a1b0a1f11380c170a170e0e380f11370c090d0e0b09380e0c160a1b11220b1638040a2b0b0e38040b1b0a120b0c0b2b0b1f0b240b170b2c38100a14100514060100000000000000170a140f05150b14100514060000000000000000210481020b1238080c100e1038000c130a133e003a000c0f0b1038030b0f38040a132c0113010c18010101010b18111a0a13290304fb010b132c03010581020a1329020481020b132c02010203000200020101000101010201030000071800\",\"abi\":{\"address\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9\",\"name\":\"collection_offer\",\"friends\":[],\"exposed_functions\":[{\"name\":\"cancel\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[]},{\"name\":\"collectionv1\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOfferTokenV1\"]},{\"name\":\"collectionv2\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOfferTokenV2\"]},{\"name\":\"exists_at\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[\"bool\"]},{\"name\":\"expiration_time\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[\"u64\"]},{\"name\":\"expired\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[\"bool\"]},{\"name\":\"fee_schedule\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"]},{\"name\":\"init_for_tokenv1\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\",\"u64\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"]},{\"name\":\"init_for_tokenv1_entry\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\",\"u64\"],\"return\":[]},{\"name\":\"init_for_tokenv2\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x4::collection::Collection>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\",\"u64\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"]},{\"name\":\"init_for_tokenv2_entry\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x4::collection::Collection>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\",\"u64\"],\"return\":[]},{\"name\":\"price\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[\"u64\"]},{\"name\":\"remaining\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[\"u64\"]},{\"name\":\"sell_tokenv1\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\",\"0x1::string::String\",\"u64\"],\"return\":[\"0x1::option::Option<0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::TokenV1Container>>\"]},{\"name\":\"sell_tokenv1_entry\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\",\"0x1::string::String\",\"u64\"],\"return\":[]},{\"name\":\"sell_tokenv2\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\",\"0x1::object::Object<0x4::token::Token>\"],\"return\":[]}],\"structs\":[{\"name\":\"CoinOffer\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"coins\",\"type\":\"0x1::coin::Coin<T0>\"}]},{\"name\":\"CollectionOffer\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"fee_schedule\",\"type\":\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"},{\"name\":\"item_price\",\"type\":\"u64\"},{\"name\":\"remaining\",\"type\":\"u64\"},{\"name\":\"expiration_time\",\"type\":\"u64\"},{\"name\":\"delete_ref\",\"type\":\"0x1::object::DeleteRef\"}]},{\"name\":\"CollectionOfferTokenV1\",\"is_native\":false,\"abilities\":[\"copy\",\"drop\",\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"creator_address\",\"type\":\"address\"},{\"name\":\"collection_name\",\"type\":\"0x1::string::String\"}]},{\"name\":\"CollectionOfferTokenV2\",\"is_native\":false,\"abilities\":[\"copy\",\"drop\",\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"collection\",\"type\":\"0x1::object::Object<0x4::collection::Collection>\"}]}]}},{\"bytecode\":\"0xa11ceb0b060000000801000c020c16032248046a12057c9301078f02fd02088c05400ccc05cc0200000101010200030004000501070701000104080800020b0700050f080001120800000600010100000902010100000a03010100000c04010100000d00010100000e0501010001100709010803110b01010003130f01010003141001010003150b0101000316110101000608070a060e080a010a050a090a0a0a0b0a02060c0a050004060c0a050b000108010a0307060c0a050b000108010a030a030a050a030a060c0508020a0802030b000108010a030a030a050a0303060c0a050a0302030b000108030105010803010b0001090001090002060c0b0001080302030b00010804010301080404060c0b000108040b000108010307060c0508020a0802030b000108010a0303060c0b0001080303136d61726b6574706c6163655f73637269707473066f626a65637406737472696e670c636f696e5f6c697374696e670c6665655f7363686564756c65076c697374696e6714656e645f66697865645f70726963655f6d616e79064f626a6563740b4665655363686564756c6515696e69745f66697865645f70726963655f6d616e79206c6973745f616e645f7570646174655f66697865645f70726963655f6d616e7906537472696e67286c6973745f616e645f7570646174655f66697865645f70726963655f746f6b656e76315f6d616e790d70757263686173655f6d616e79177570646174655f66697865645f70726963655f6d616e79074c697374696e6711616464726573735f746f5f6f626a6563740f656e645f66697865645f70726963650a4f626a656374436f726510696e69745f66697865645f707269636521696e69745f66697865645f70726963655f666f725f746f6b656e76315f6d616e79087075726368617365127570646174655f66697865645f7072696365584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c900000000000000000000000000000000000000000000000000000000000000010001040006190600000000000000000c020a020e01410723041605080e010a0242071438000c030a000b0338010b02060100000000000000160c0205020b000102010104000c1e0600000000000000000c040a040e03410d23041b05080e010a0442071438020c050a000b050a020e030a04420d1438030b04060100000000000000160c0405020b00010202010400010a0a000b010b020b0338040b000b050b0638050203010400010d0a000b010b020b030b040b050b0638060b000b080b093805020401040006190600000000000000000c020a020e01410723041605080e010a0242071438000c030a000b0338070b02060100000000000000160c0205020b00010205010400061d0600000000000000000c030a030e02410d23041a05080e010a0342071438000c040a000b040e020a03420d1438080b03060100000000000000160c0305020b00010200\",\"abi\":{\"address\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9\",\"name\":\"marketplace_scripts\",\"friends\":[],\"exposed_functions\":[{\"name\":\"end_fixed_price_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\"],\"return\":[]},{\"name\":\"init_fixed_price_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"vector<u64>\"],\"return\":[]},{\"name\":\"list_and_update_fixed_price_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"vector<u64>\",\"vector<u64>\",\"vector<address>\",\"vector<u64>\"],\"return\":[]},{\"name\":\"list_and_update_fixed_price_tokenv1_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"vector<0x1::string::String>\",\"u64\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"vector<u64>\",\"vector<u64>\",\"vector<address>\",\"vector<u64>\"],\"return\":[]},{\"name\":\"purchase_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\"],\"return\":[]},{\"name\":\"update_fixed_price_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\",\"vector<u64>\"],\"return\":[]}],\"structs\":[]}}]"
	p, err := PayloadFromJsonAndAbi(payload, abi)
	require.NoError(t, err)
	raw, err := MakeRawTransaction(from, uint64(sequenceNumber), uint64(maxGasAmount), uint64(gasUnitPrice), uint64(expirationTimestampSecs), uint8(chainId), p)
	require.NoError(t, err)
	tx, err := SignRawTransaction(raw, seedHex)
	require.NoError(t, err)
	expected := "d1028d1c19e05b737a5ff9e2bfddee4821d329f1b1efd9e21c002aea04b83862310000000000000002584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c90c636f696e5f6c697374696e6710696e69745f66697865645f7072696365010700000000000000000000000000000000000000000000000000000000000000010a6170746f735f636f696e094170746f73436f696e000320ffedd8fac12a876e1ae43272c447794af3496794046558005c56e8c07047ff1e2071f7c94805c33d32a7f9560c95f02e9d3b5bc49884a883916f03abe6da11ac080800c2eb0b00000000d0070000000000006400000000000000d0b4586500000000010020cb260546471c6e15c6b5ed0cc11ea65b72250971c25ecbba0e1a0d015ee9fe89402fffb81b22aec14a04087339321d231de4154dd633a588efc5b34734f675edc7102bc6ca0801ac5af15c77ac0f066a800490159e0e711770944d4d44ea1b190e"
	require.Equal(t, expected, tx)

	ser := bcs.NewSerializer()
	p.Serialize(ser)
	checkPayloadFromJsonAndAbiV2(t, payload, abi, hex.EncodeToString(ser.GetBytes()))
}

func Test_PayloadFromJsonAndAbi_V2(t *testing.T) {
	from := "d1028d1c19e05b737a5ff9e2bfddee4821d329f1b1efd9e21c002aea04b83862"
	sequenceNumber := 49
	maxGasAmount := 2000
	gasUnitPrice := 100
	//expirationTimestampSecs := time.Now().Unix() + 300
	expirationTimestampSecs := 1700312272
	chainId := 1
	seedHex := "d1028d1c19e05b737a5ff9e2bfddee4821d329f1b1efd9e21c002aea04b83862"
	payload := "{\"type\":\"entry_function_payload\",\"type_arguments\":[\"0x1::aptos_coin::AptosCoin\"],\"function\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::coin_listing::init_fixed_price\",\"arguments\":[\"0xffedd8fac12a876e1ae43272c447794af3496794046558005c56e8c07047ff1e\",\"0x71f7c94805c33d32a7f9560c95f02e9d3b5bc49884a883916f03abe6da11ac08\",200000000]}"
	abi := "[{\"bytecode\":\"0xa11ceb0b060000000d0100120212560368a1010489024205cb02dd0107a804a40b08cc0f800106cc100a10d610750acb1197020ce213a7050d8919140f9d190a00050106010701080109010a020b030c030b000d0600000e0600000f060000100600001106000012080000130600001406000015060000160600001706000018060000190600051a0700031c07010001071d0800041f07010000062b0700082d0800024104010601001b000100001e020100002003040108002105040108002206040108002305040108002407040108002508040108002607040108002709040108002806040108002909040108002a0a0400002c0b0c00002e0d0c00044e040e0100074f101101080750101201080451130e0100035215110108015316160002541804010603550a2301060656252600084f101101080837101201080857100201080850101201080f02100f110f1202131315171519151a151b151c151d151e151f152015211617161e161c161d161b1619161a1621161f16200f0d1216182719271a271b27120d0f160205080d010801010b0e01080f090b0e010900050503030b1001050b10010303080900060b0e010900050503030801080b0e0109000505050303030809060b0e010900080d0505030809090b0e010900080d0505050303030809050b0e010900050503080901060c010811010809010b0e010812010b1001090001080f010b0e010900010501080d01090002050b0e01090001060b0e010900010301080002070b13010900090001080201080301080401080601080701080801080a01080b01080c010805010b130109000203080d010608110405080d080d030108120c636f696e5f6c697374696e6710636f6c6c656374696f6e5f6f666665720c6665655f7363686564756c65076c697374696e670b746f6b656e5f6f66666572066576656e7473056572726f72056576656e74066f626a656374066f7074696f6e06737472696e6705746f6b656e0a636f6c6c656374696f6e0f41756374696f6e4269644576656e7412436f6c6c656374696f6e4d657461646174611c436f6c6c656374696f6e4f6666657243616e63656c65644576656e741a436f6c6c656374696f6e4f6666657246696c6c65644576656e741a436f6c6c656374696f6e4f66666572506c616365644576656e74084576656e74735631144c697374696e6743616e63656c65644576656e74124c697374696e6746696c6c65644576656e74124c697374696e67506c616365644576656e740d546f6b656e4d6574616461746117546f6b656e4f6666657243616e63656c65644576656e7415546f6b656e4f6666657246696c6c65644576656e7415546f6b656e4f66666572506c616365644576656e7406537472696e671f636f6c6c656374696f6e5f6d657461646174615f666f725f746f6b656e7631064f626a6563740a436f6c6c656374696f6e1f636f6c6c656374696f6e5f6d657461646174615f666f725f746f6b656e7632064f7074696f6e0e656d69745f6269645f6576656e741e656d69745f636f6c6c656374696f6e5f6f666665725f63616e63656c65641c656d69745f636f6c6c656374696f6e5f6f666665725f66696c6c65641c656d69745f636f6c6c656374696f6e5f6f666665725f706c6163656415656d69745f6c697374696e675f63616e63656c656413656d69745f6c697374696e675f66696c6c656413656d69745f6c697374696e675f706c6163656419656d69745f746f6b656e5f6f666665725f63616e63656c656417656d69745f746f6b656e5f6f666665725f66696c6c656417656d69745f746f6b656e5f6f666665725f706c6163656404696e697407546f6b656e49641a746f6b656e5f6d657461646174615f666f725f746f6b656e763105546f6b656e1a746f6b656e5f6d657461646174615f666f725f746f6b656e76320a6e65775f626964646572076e65775f6269640c6e65775f656e645f74696d650f70726576696f75735f6269646465720c70726576696f75735f6269641170726576696f75735f656e645f74696d650e746f6b656e5f6d657461646174610f63726561746f725f616464726573730f636f6c6c656374696f6e5f6e616d65097075726368617365720570726963651672656d61696e696e675f746f6b656e5f616d6f756e7413636f6c6c656374696f6e5f6d657461646174610673656c6c657209726f79616c746965730a636f6d6d697373696f6e0c746f6b656e5f616d6f756e741261756374696f6e5f6269645f6576656e74730b4576656e7448616e646c65156c697374696e675f706c616365645f6576656e7473176c697374696e675f63616e63656c65645f6576656e7473156c697374696e675f66696c6c65645f6576656e74731e636f6c6c656374696f6e5f6f666665725f706c616365645f6576656e747320636f6c6c656374696f6e5f6f666665725f63616e63656c65645f6576656e74731e636f6c6c656374696f6e5f6f666665725f66696c6c65645f6576656e747319746f6b656e5f6f666665725f706c616365645f6576656e74731b746f6b656e5f6f666665725f63616e63656c65645f6576656e747319746f6b656e5f6f666665725f66696c6c65645f6576656e747304747970650a746f6b656e5f6e616d651070726f70657274795f76657273696f6e046e6f6e650763726561746f72046e616d6504736f6d650e6f626a6563745f61646472657373096e6f745f666f756e640a656d69745f6576656e74106e65775f6576656e745f68616e646c65136765745f746f6b656e5f69645f6669656c647311636f6c6c656374696f6e5f6f626a656374584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c900000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000403080100000000000000126170746f733a3a6d657461646174615f7631610101000000000000000d454e4f5f4556454e54535f5631224d61726b6574706c61636520646f6573206e6f742068617665204576656e7473563101084576656e74735631010301183078313a3a6f626a6563743a3a4f626a65637447726f75700000020803052f0530033103320b100105330b1001033403350809010203360537080d0c0b10010b0e01080f0202050105380539033a033b0801030207010538053c0539033d033e033508090402050105380539033f033b080105020a400b13010800420b13010808430b13010806440b13010807450b13010804460b13010802470b13010803480b1301080c490b1301080a4a0b1301080b0602054b080d03053c0539033508090702084b080d03053c05380539033e033d033508090802054b080d03053c053903350809090206360537080d0c0b10010b0e01080f4c080d0b0b10010b0e0108124d0b1001030a02040405380539033508090b0207040538053c0539033d033e033508090c02040405380539033508090001000004050b000b0138001201020101000004080a0038010a0038020b0038031201020203000105141a0b000c0a0e0a38040c090a0929050409050c07001114270b092a050f000b010b020b030b040b050b060b070b081200380502030300010514170b000c070e0738040c060a0629050409050c07001114270b062a050f010b010b020b030b040b051202380602040300010514190b000c090e0938040c080a0829050409050c07001114270b082a050f020b010b020b030b040b050b060b071203380702050300010514170b000c070e0738040c060a0629050409050c07001114270b062a050f030b010b020b030b040b051204380802060300010514170b000c070e0738040c060a0629050409050c07001114270b062a050f040b010b020b030b040b0512063809020703000105141a0b000c0a0e0a38040c090a0929050409050c07001114270b092a050f050b010b020b030b040b050b060b070b081207380a02080300010514170b000c070e0738040c060a0629050409050c07001114270b062a050f060b010b020b030b040b051208380b02090300010514160b000c060e0638040c050a0529050409050c07001114270b052a050f070b010b020b030b04120a380c020a0300010514190b000c090e0938040c080a0829050409050c07001114270b082a050f080b010b020b030b040b050b060b07120b380d020b0300010514160b000c060e0638040c050a0529050409050c07001114270b052a050f090b010b020b030b04120c380e020c030000221a0a00380f0a0038100a0038110a0038120a0038130a0038140a0038150a0038160a0038170a00381812050c010b000b012d05020d010000240b0e0011170c010c0238000b0238190b01381a1209020e010000040e0a00381b0a00381c0a00381d38030a00381e0b00381f382012090205000505050605040502050305010508050905070000000100020003000400\",\"abi\":{\"address\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9\",\"name\":\"events\",\"friends\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::coin_listing\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer\"],\"exposed_functions\":[{\"name\":\"collection_metadata_for_tokenv1\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"address\",\"0x1::string::String\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionMetadata\"]},{\"name\":\"collection_metadata_for_tokenv2\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x4::collection::Collection>\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionMetadata\"]},{\"name\":\"emit_bid_event\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"address\",\"address\",\"u64\",\"u64\",\"0x1::option::Option<address>\",\"0x1::option::Option<u64>\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"],\"return\":[]},{\"name\":\"emit_collection_offer_canceled\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"address\",\"address\",\"u64\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionMetadata\"],\"return\":[]},{\"name\":\"emit_collection_offer_filled\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"address\",\"address\",\"address\",\"u64\",\"u64\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"],\"return\":[]},{\"name\":\"emit_collection_offer_placed\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"address\",\"address\",\"u64\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionMetadata\"],\"return\":[]},{\"name\":\"emit_listing_canceled\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"0x1::string::String\",\"address\",\"address\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"],\"return\":[]},{\"name\":\"emit_listing_filled\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"0x1::string::String\",\"address\",\"address\",\"address\",\"u64\",\"u64\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"],\"return\":[]},{\"name\":\"emit_listing_placed\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"0x1::string::String\",\"address\",\"address\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"],\"return\":[]},{\"name\":\"emit_token_offer_canceled\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"address\",\"address\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"],\"return\":[]},{\"name\":\"emit_token_offer_filled\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"address\",\"address\",\"address\",\"u64\",\"u64\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"],\"return\":[]},{\"name\":\"emit_token_offer_placed\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[\"key\"]}],\"params\":[\"0x1::object::Object<T0>\",\"address\",\"address\",\"u64\",\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"],\"return\":[]},{\"name\":\"init\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\"],\"return\":[]},{\"name\":\"token_metadata_for_tokenv1\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"0x3::token::TokenId\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"]},{\"name\":\"token_metadata_for_tokenv2\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x4::token::Token>\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"]}],\"structs\":[{\"name\":\"AuctionBidEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"listing\",\"type\":\"address\"},{\"name\":\"new_bidder\",\"type\":\"address\"},{\"name\":\"new_bid\",\"type\":\"u64\"},{\"name\":\"new_end_time\",\"type\":\"u64\"},{\"name\":\"previous_bidder\",\"type\":\"0x1::option::Option<address>\"},{\"name\":\"previous_bid\",\"type\":\"0x1::option::Option<u64>\"},{\"name\":\"previous_end_time\",\"type\":\"u64\"},{\"name\":\"token_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"}]},{\"name\":\"CollectionMetadata\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"creator_address\",\"type\":\"address\"},{\"name\":\"collection_name\",\"type\":\"0x1::string::String\"},{\"name\":\"collection\",\"type\":\"0x1::option::Option<0x1::object::Object<0x4::collection::Collection>>\"}]},{\"name\":\"CollectionOfferCanceledEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"collection_offer\",\"type\":\"address\"},{\"name\":\"purchaser\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"remaining_token_amount\",\"type\":\"u64\"},{\"name\":\"collection_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionMetadata\"}]},{\"name\":\"CollectionOfferFilledEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"collection_offer\",\"type\":\"address\"},{\"name\":\"purchaser\",\"type\":\"address\"},{\"name\":\"seller\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"royalties\",\"type\":\"u64\"},{\"name\":\"commission\",\"type\":\"u64\"},{\"name\":\"token_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"}]},{\"name\":\"CollectionOfferPlacedEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"collection_offer\",\"type\":\"address\"},{\"name\":\"purchaser\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"token_amount\",\"type\":\"u64\"},{\"name\":\"collection_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionMetadata\"}]},{\"name\":\"EventsV1\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"auction_bid_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::AuctionBidEvent>\"},{\"name\":\"listing_placed_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::ListingPlacedEvent>\"},{\"name\":\"listing_canceled_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::ListingCanceledEvent>\"},{\"name\":\"listing_filled_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::ListingFilledEvent>\"},{\"name\":\"collection_offer_placed_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionOfferPlacedEvent>\"},{\"name\":\"collection_offer_canceled_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionOfferCanceledEvent>\"},{\"name\":\"collection_offer_filled_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::CollectionOfferFilledEvent>\"},{\"name\":\"token_offer_placed_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenOfferPlacedEvent>\"},{\"name\":\"token_offer_canceled_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenOfferCanceledEvent>\"},{\"name\":\"token_offer_filled_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenOfferFilledEvent>\"}]},{\"name\":\"ListingCanceledEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"type\",\"type\":\"0x1::string::String\"},{\"name\":\"listing\",\"type\":\"address\"},{\"name\":\"seller\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"token_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"}]},{\"name\":\"ListingFilledEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"type\",\"type\":\"0x1::string::String\"},{\"name\":\"listing\",\"type\":\"address\"},{\"name\":\"seller\",\"type\":\"address\"},{\"name\":\"purchaser\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"commission\",\"type\":\"u64\"},{\"name\":\"royalties\",\"type\":\"u64\"},{\"name\":\"token_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"}]},{\"name\":\"ListingPlacedEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"type\",\"type\":\"0x1::string::String\"},{\"name\":\"listing\",\"type\":\"address\"},{\"name\":\"seller\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"token_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"}]},{\"name\":\"TokenMetadata\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"creator_address\",\"type\":\"address\"},{\"name\":\"collection_name\",\"type\":\"0x1::string::String\"},{\"name\":\"collection\",\"type\":\"0x1::option::Option<0x1::object::Object<0x4::collection::Collection>>\"},{\"name\":\"token_name\",\"type\":\"0x1::string::String\"},{\"name\":\"token\",\"type\":\"0x1::option::Option<0x1::object::Object<0x4::token::Token>>\"},{\"name\":\"property_version\",\"type\":\"0x1::option::Option<u64>\"}]},{\"name\":\"TokenOfferCanceledEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"token_offer\",\"type\":\"address\"},{\"name\":\"purchaser\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"token_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"}]},{\"name\":\"TokenOfferFilledEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"token_offer\",\"type\":\"address\"},{\"name\":\"purchaser\",\"type\":\"address\"},{\"name\":\"seller\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"royalties\",\"type\":\"u64\"},{\"name\":\"commission\",\"type\":\"u64\"},{\"name\":\"token_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"}]},{\"name\":\"TokenOfferPlacedEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"token_offer\",\"type\":\"address\"},{\"name\":\"purchaser\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"token_metadata\",\"type\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"}]}]}},{\"bytecode\":\"0xa11ceb0b060000000d01001a021a480362f90104db021605f102f10207e205a40808860e800106860f4a10d00f99030ae912230c8c13e3060def19080ff71902000101020103010401050106010701080209030a0309000b000c000d0800000e0800030f070100010c1108000614070008160400031a0200031b08000b2006000323060003250600032706000830070004310701000009300b00083207000a160800001000010000120203000013040500001506070000170807000018090a000019090a00000c0b0c00001c0d0e00001d0b0f00001e0b1000001f0b010000210b11000328130101080129141400072a0a1400032b161700032c1a1b020808052d1c0100032e1d0a0108032f1e0a000833202100083421220008352301000836231400083723140002382414000a0a1a250108043927100100043a28290100093b2a0100093c2a1400093d2a1400083e2c2100083f2d2e0003401c300003413117000342311e0003433132000344311a01080845080a0003463610010801471414000348390a000349313a00034a3101000b4b2111000b4c3d11000d120d18111913181b181c261d2627330d332933113c01060b020108000105020b02010800060c02050b02010803020b020108000302050305060c050804080403010b0201080102060c080502060c0b0201080100010b02010800010b0201080303060c0b020108070b02010803020c0806010b02010807010101080801080001060b020109000103060809080a0b020108030c0b02010807050106080a010c0108070208070801010b02010900010b0201090101060c03060c0b02010900050108091e0305030503030303030303030303030306080003030305050b020108000505080c0b0d01080e080e03030106080501080f01080c0106080c020303010b0d01080e01080e01060b0d010900010b0d0109000109000106080e020805080f0405080408040303060c080f030108050408060c0809080b0108060106080601080b0108010208090805030809050805020b020109000502050b020108000508060800050c080b0106080b01080a05080806080005050b020108000208070810010b020108100c636f696e5f6c697374696e67076c697374696e67056572726f72066d6174683634066f626a656374066f7074696f6e067369676e657206737472696e670974696d657374616d7005746f6b656e07726f79616c7479066576656e74730c6665655f7363686564756c65074c697374696e6710546f6b656e5631436f6e7461696e6572064f626a6563740e6173736572745f737461727465640b4665655363686564756c6505636c6f73650f636f6d707574655f726f79616c747906537472696e67186372656174655f746f6b656e76315f636f6e7461696e657205546f6b656e236372656174655f746f6b656e76315f636f6e7461696e65725f776974685f746f6b656e1b657874726163745f6f725f7472616e736665725f746f6b656e76310f657874726163745f746f6b656e76310e436f6e7374727563746f725265660a4f626a656374436f726504696e69740d6c69737465645f6f626a6563740e6c697374696e675f6578697374730673656c6c65720d546f6b656e4d657461646174610e746f6b656e5f6d657461646174610a64656c6574655f7265660944656c6574655265660a657874656e645f72656609457874656e645265660c7472616e736665725f7265660b5472616e736665725265660e6f626a6563745f61646472657373096e6f745f666f756e640b6e6f775f7365636f6e64731d67656e65726174655f7369676e65725f666f725f657874656e64696e6707636f6e766572740a616464726573735f6f66087472616e736665720664656c65746507526f79616c7479064f7074696f6e07546f6b656e49640c6765745f746f6b656e5f69640b6765745f726f79616c7479116765745f726f79616c74795f7061796565156765745f726f79616c74795f6e756d657261746f72176765745f726f79616c74795f64656e6f6d696e61746f72036d696e0769735f736f6d650c64657374726f795f736f6d650d70617965655f61646472657373096e756d657261746f720b64656e6f6d696e61746f72136372656174655f746f6b656e5f69645f7261770e77697468647261775f746f6b656e1a6372656174655f6f626a6563745f66726f6d5f6163636f756e740f67656e65726174655f7369676e65721367656e65726174655f64656c6574655f7265661567656e65726174655f7472616e736665725f7265661b6f626a6563745f66726f6d5f636f6e7374727563746f725f7265660d6465706f7369745f746f6b656e0869735f6f776e6572117065726d697373696f6e5f64656e6965641864697361626c655f756e67617465645f7472616e736665721367656e65726174655f657874656e645f7265661c616464726573735f66726f6d5f636f6e7374727563746f725f7265661a746f6b656e5f6d657461646174615f666f725f746f6b656e76311a746f6b656e5f6d657461646174615f666f725f746f6b656e7632584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c90000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000040308020000000000000003080300000000000000030804000000000000000308010000000000000005200000000000000000000000000000000000000000000000000000000000000000126170746f733a3a6d657461646174615f763184030401000000000000000b454e4f5f4c495354494e4718546865726520657869737473206e6f206c697374696e672e020000000000000014454c495354494e475f4e4f545f535441525445441c546865206c697374696e67206973206e6f7420796574206c6976652e03000000000000000c454e4f545f43524541544f521e54686520656e74697479206973206e6f74207468652063726561746f722e04000000000000000a454e4f545f4f574e45523154686520656e74697479206973206e6f7420746865206f776e6572206f6620746865207772617070656420746f6b656e2e02074c697374696e67010301183078313a3a6f626a6563743a3a4f626a65637447726f757010546f6b656e5631436f6e7461696e6572010301183078313a3a6f626a6563743a3a4f626a65637447726f7570050673656c6c65720101000c6665655f7363686564756c650101000d6c69737465645f6f626a6563740101000e746f6b656e5f6d657461646174610101000f636f6d707574655f726f79616c7479010100000205040b020108071f050c0b0201080322080924080a01020309080522080926080b000300010001110b0038000c010a0129000407050a0703110e270a012b0001110f010b0102010300020001151f0e0038002c0013000c030c020c040c070c060e0311100c050e063801290104150b010b0638021105051a0e050b060b01111238030b0211140b070b04020201000200011f8a010b000c180e1838000c170a1729000409050c0703110e270b172b000c120a12100038010c160a162901044f0b12010b162b011001111511160c1b0e1b11170c190e1b11180c130e1b11190c0f0b010b130b0f0c110c150c0a0a110600000000000000002104340600000000000000000c0705480a0a0c020b0a0b150b110c0d0c0b0c090b020b09350b0b35180b0d351a34111a0c070b070c1e0b190b1e0c060c050587010b1210001438040c1c0e1c3805047f0b1c38060c1d0e1d111e0c1a0e1d111f0c140e1d11200c100a1006000000000000000021046a0600000000000000000c0805780b010b140b100c0e0c0c350b0c35180b0e351a340c080b080c1f0b1a0b1f0c040c0305830107040600000000000000000c040c030b030b040c060c050b050b0602030300002b0f0b010b020b030b0411210c060a000b0606010000000000000011220c050b000b05110402040100002f150b0011230c020e0211240c030e0211250c040e0211260c050e030b010b040b0512012d010e023807020503000101340d0e0138082c011301010c020c030b000b0311280b021114020601040101351a0e0138080c030b010a00111238090409050e0b00010702112a270b032c011301010c020c040b0211140b000b04112802070100010037110b000c020e0238000c010a0129000409050c0703110e270b012b00100214020803000038220a0011230c030e0311260c070e07112b0e0311240c060a010a0011120b020e0311250e03112c12000c040e060b042d000e03112d0c050b000b010b0538030b060b0302090100010037110b000c020e0238000c010a0129000409050c0703110e270b012b00100014020a0100000a040e0038002900020b0100010037110b000c020e0238000c010a0129000409050c0703110e270b012b00100314020c01000200013b270b000c050e0538000c040a0429000409050c0703110e270b042b000c020a02100038010c030a032901041f0b02010b032b0110011115112e0c0105250b02100014380a112f0c010b01020000010000020001000000\",\"abi\":{\"address\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9\",\"name\":\"listing\",\"friends\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::coin_listing\"],\"exposed_functions\":[{\"name\":\"assert_started\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[\"address\"]},{\"name\":\"close\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\",\"&signer\"],\"return\":[\"address\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"]},{\"name\":\"compute_royalty\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\",\"u64\"],\"return\":[\"address\",\"u64\"]},{\"name\":\"create_tokenv1_container\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::TokenV1Container>\"]},{\"name\":\"create_tokenv1_container_with_token\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x3::token::Token\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::TokenV1Container>\"]},{\"name\":\"extract_or_transfer_tokenv1\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::TokenV1Container>\"],\"return\":[]},{\"name\":\"extract_tokenv1\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::TokenV1Container>\"],\"return\":[]},{\"name\":\"fee_schedule\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"]},{\"name\":\"init\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x1::object::Object<0x1::object::ObjectCore>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"],\"return\":[\"signer\",\"0x1::object::ConstructorRef\"]},{\"name\":\"listed_object\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[\"0x1::object::Object<0x1::object::ObjectCore>\"]},{\"name\":\"listing_exists\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[\"bool\"]},{\"name\":\"seller\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[\"address\"]},{\"name\":\"token_metadata\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::events::TokenMetadata\"]}],\"structs\":[{\"name\":\"Listing\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"object\",\"type\":\"0x1::object::Object<0x1::object::ObjectCore>\"},{\"name\":\"seller\",\"type\":\"address\"},{\"name\":\"fee_schedule\",\"type\":\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"},{\"name\":\"delete_ref\",\"type\":\"0x1::object::DeleteRef\"},{\"name\":\"extend_ref\",\"type\":\"0x1::object::ExtendRef\"}]},{\"name\":\"TokenV1Container\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"token\",\"type\":\"0x3::token::Token\"},{\"name\":\"delete_ref\",\"type\":\"0x1::object::DeleteRef\"},{\"name\":\"transfer_ref\",\"type\":\"0x1::object::TransferRef\"}]}]}},{\"bytecode\":\"0xa11ceb0b060000000e01001e021e580376d40204ca032c05f603af0407a508d90a08fe12800106fe133210b014ab040adb182f0b8a19020c8c19f90c0d8526120e9726020000010101020103010401050106010701080209030a0309000b000c000d000e08010001000f080000100b0000110b000412070100010d190800071a07000b1d08000521070100000e220800022704010001042a06000c2f060009360700043e0200043f0600094a0700094f0700091d04000a4f0b0000130001010000140203000015020400001602050000170206000018020500000c020700001b08020100001c08010100001e09020100001f09010100002002060000230a0b010000240a01010000250001010004300e0f010803310606000632100f0004331105010803340606000c3512130009371415000c381513000c3917010108043a190f0108013b1a010100043c1b0100083d0106000440101e0004411f2000044221010004431f220004441f1b000d452306000d46070f000147240101000248252601000949270100094b282900094c2a15000c4d17010108044e0f19010809502d2e0009510f050009522f01000553013101000e5432300004553401010805561831010009571535000958360f000959360600095a360600035b060600025c372601000d5d2306000c5e380101080b0a193b0108055f3d0501000560311801000a613e0f000a623e06000a633e06000f0d120d1716180d1918231824182816290d071809182d302f333030361838160c18183a2f3a393a3a3c3b3c02060c0b0401080100010b0401080101080201080301010103010b0401080508060c0508060806030b04010805030305060c0b040108070b04010805030304060c0b04010801080603010b08010b0401080909080c0b0a010900080b080c0b04010801050507080106080201080101060b04010900010501060c020b0401090005010b0401080701080c0405080608060301080d010805050b04010900050503080c010900010b0401090002050b0a01090001080b020b0401080105110b0a010900080e0303050b040108050b040108050308010c0c060c060c080d0503080f01080e0106080e01080f0106080f010c020b040108050303060c050302060c03010b0a01090002060c0103050806080601081002081003100b0a010900080e0303050b040108050b040108050308010c0c060c060c0503080f1c0b08010b04010809050b0a0109000b0a0109000b0a010900030b040108090b08010b04010809080b0b0401080503050b0a010900081103030305050812080d080c0b0401080105050507080107080203060c080d0301081202050812010b04010809010b0801090002060c081201080903060c0b04010900050108110106081102070b0a01090003080b04010900050505030303080c22050303050b0a0109000b0a0109000b0a01090003080b030b04010805030503050b0a0109000b0801081308130303030303050505050b04010807080c0b04010801050505070801010807010b0801081301081301060b08010900010608130b746f6b656e5f6f666665720d6170746f735f6163636f756e7404636f696e056572726f72066f626a656374066f7074696f6e067369676e657206737472696e670974696d657374616d7005746f6b656e07726f79616c7479066576656e74730c6665655f7363686564756c65076c697374696e6709436f696e4f666665720a546f6b656e4f6666657211546f6b656e4f66666572546f6b656e563111546f6b656e4f66666572546f6b656e5632064f626a6563740663616e63656c0c636f6c6c656374696f6e76310c636f6c6c656374696f6e7632096578697374735f61740f65787069726174696f6e5f74696d6507657870697265640b4665655363686564756c6506537472696e6710696e69745f666f725f746f6b656e763116696e69745f666f725f746f6b656e76315f656e74727905546f6b656e10696e69745f666f725f746f6b656e763216696e69745f666f725f746f6b656e76325f656e747279057072696365064f7074696f6e10546f6b656e5631436f6e7461696e65720c73656c6c5f746f6b656e76311273656c6c5f746f6b656e76315f656e7472790c73656c6c5f746f6b656e763205636f696e7304436f696e0a6974656d5f70726963650a64656c6574655f7265660944656c6574655265660f63726561746f725f616464726573730f636f6c6c656374696f6e5f6e616d650a746f6b656e5f6e616d651070726f70657274795f76657273696f6e0d546f6b656e4d657461646174610e6f626a6563745f61646472657373096e6f745f666f756e640a616464726573735f6f660869735f6f776e6572117065726d697373696f6e5f64656e6965641a746f6b656e5f6d657461646174615f666f725f746f6b656e763207546f6b656e4964136372656174655f746f6b656e5f69645f7261771a746f6b656e5f6d657461646174615f666f725f746f6b656e763119656d69745f746f6b656e5f6f666665725f63616e63656c6564056f776e65720d6465706f7369745f636f696e730664656c6574650b6e6f775f7365636f6e64730e436f6e7374727563746f725265660b5472616e736665725265661a6372656174655f6f626a6563745f66726f6d5f6163636f756e741567656e65726174655f7472616e736665725f7265661864697361626c655f756e67617465645f7472616e736665720f67656e65726174655f7369676e65721367656e65726174655f64656c6574655f7265660b6c697374696e675f6665650b6665655f616464726573730e7472616e736665725f636f696e73087769746864726177166f70745f696e5f6469726563745f7472616e736665720b546f6b656e446174614964146372656174655f746f6b656e5f646174615f69640f6372656174655f746f6b656e5f696417656d69745f746f6b656e5f6f666665725f706c6163656411616464726573735f746f5f6f626a65637407526f79616c74790e77697468647261775f746f6b656e136765745f6469726563745f7472616e736665721a6469726563745f6465706f7369745f776974685f6f70745f696e046e6f6e65236372656174655f746f6b656e76315f636f6e7461696e65725f776974685f746f6b656e087472616e7366657204736f6d650b6765745f726f79616c7479116765745f726f79616c74795f7061796565176765745f726f79616c74795f64656e6f6d696e61746f72156765745f726f79616c74795f6e756d657261746f720d696e76616c69645f737461746507657874726163740a636f6d6d697373696f6e17656d69745f746f6b656e5f6f666665725f66696c6c65640769735f736f6d650c64657374726f795f736f6d650d70617965655f616464726573730b64656e6f6d696e61746f72096e756d657261746f72584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c90000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000040308060000000000000003080400000000000000030803000000000000000308020000000000000003080100000000000000126170746f733a3a6d657461646174615f763196040501000000000000000f454e4f5f544f4b454e5f4f46464552174e6f20746f6b656e206f6666657220646566696e65642e02000000000000000e454e4f5f434f494e5f4f46464552164e6f20636f696e206f6666657220646566696e65642e030000000000000010454e4f545f544f4b454e5f4f574e45522354686973206973206e6f7420746865206f776e6572206f662074686520746f6b656e2e04000000000000000a454e4f545f4f574e45522954686973206973206e6f7420746865206f776e6572206f662074686520746f6b656e206f666665722e06000000000000000845455850495245441c54686520746f6b656e206f666665722068617320657870697265642e0409436f696e4f66666572010301183078313a3a6f626a6563743a3a4f626a65637447726f75700a546f6b656e4f66666572010301183078313a3a6f626a6563743a3a4f626a65637447726f757011546f6b656e4f66666572546f6b656e5631010301183078313a3a6f626a6563743a3a4f626a65637447726f757011546f6b656e4f66666572546f6b656e5632010301183078313a3a6f626a6563743a3a4f626a65637447726f7570070570726963650101000765787069726564010100096578697374735f61740101000c636f6c6c656374696f6e76310101000c636f6c6c656374696f6e76320101000c6665655f7363686564756c650101000f65787069726174696f6e5f74696d65010100000201260b0a0109000102040c0b040108052803170329080b0202042b052c08062d08062e03030201090b04010807001800010404000102030c670e0138000c070a0729010407050c0b000107041110270a010a0011113801041205170b000107011113270a072a010c090a07290304240a072b0310001411140c0205360a072b020c0a0a0a1001140a0a1002140a0a1003140b0a100414111511160c020b020c050a091005140b070b0011110b091006140b0538020b010c060e0638000c080a083e003a000c030b0638030b0338040a082c0113010c040101010b04111a0a08290304600b082c030105660a08290204660b082c02010201010001020f0e0e0038000c010a0129020407050a07041110270b012b02140202010001030f0e0e0038000c010a0129010407050a07041110270b012b0314020301000001040e00380029010204010001011c110b000c010e0138000c020a0229010409050c07041110270b022b011007140205010001011c130b000c010e0138000c020a0229010409050c07041110270b022b01100714111b230206010001011c110b000c010e0138000c020a0229010409050c07041110270b022b0110051402070100001d570a000a050a060b070c0a0c0f0c0d111c0c090e09111d0c180e18111e0e09111f0c120b0d0b0f0b0a0e09112012010c100e120b102d010b120c110a000e110a050a060c170c0e0c130c140a0e0a1711210c0b0b0e11220c0c0a140b0c0b0b38050b140b1738060c080b130b0839003f000e110a010a020a030a0412022d020a000811250b010b020b0311260b0411270c150e1111110c160b050a160b0011110b060b15111638070b1638080208010400010b0b000b010b020b030b040b050b060b0738090102090100002b4a0a000a020a030b040c070c0c0c0a111c0c060e06111d0c140e14111e0e06111f0c0f0b0a0b0c0b070e06112012010c0d0e0f0b0d2d010b0f0c0e0a000e0e0a020a030c130c0b0c100c110a0b0a1311210c080b0b11220c090a110b090b0838050b110b1338060c050b100b0539003f000e0e0a0112032d030e0e11110c120b020a120b0011110b030b01111438070b123808020a01040001080b000b010b020b030b04380a01020b010001011c110b000c010e0138000c020a0229010409050c07041110270b022b01100614020c010004000102032cc6010e0138000c1b0a1b29020407050c0b000107041110270a1b2a020c1f0a1f1001140b1f1002140b020b0311150c180a000a18060100000000000000112a0c170a0138030c0f0a0f112b042a0b0f0b17112c380b0c0405350a000b17112e0c0a0a000a0a0b0f380c0b0a380d0c040b040c0b0a1811310c110b0138030b0011110b1b0e1111320e1111330e1111340b1811160c190c140c130c150c1c0c160c050a1c29010452055507041110270a1c2a010c1e111b0a1e10071423045f05640b1e0107001135270a1e1006140c0e0a1c3b00046c05710b1e0107031110270a1c3c0036000a0e380e0c060a0e0b14180b131a0c120d060a12380e0c100b150b1038040b1e1005140c0d0a0d0a0e11370c090d060a09380e0c080a0d11220b0838040a160b0638040b0d0a1c0b050b160b0e0b120b090b19380f0b1c38080c1a0e1a38000c1d0a1d3e003a000c070b1a38030b0738040a1d2c0113010c0c0101010b0c111a0a1d290304be010b1d2c030105c4010a1d290204c4010b1d2c02010b0b020d0104040001020301070b000b010b020b03381001020e0104040001020339d5010e0138000c200a2029030407050c0b000107041110270a0011110c1c0a202b031000140c1d0a1c0a1d381121041a051f0b000107021113270a0138030c100a000a1d0b1038120a1d38130c120e12381404410b00010b1238150c130e13113c0c0e0e13113d0c0b0e13113e0c0d0b0e0b0b0b0d0c040c030c0205480b0011110601000000000000000600000000000000000c040c030c020b020b030b040c170c150c190b0138030b1c0b200b190b150b170b1d11140c1e0c180c160c1a0c210c1b0c050a2129010462056507041110270a212a010c23111b0a2310071423046f05740b230107001135270a231006140c0f0a213b00047c0581010b230107031110270a213c0036000a0f380e0c060a0f0b18180b161a0c140d060a14380e0c110b1a0b1138040b231005140c0c0a0c0a0f11370c090d060a09380e0c080a0c11220b0838040a1b0b0638040b0c0a210b050b1b0b0f0b140b090b1e380f0b2138080c1f0e1f38000c220a223e003a000c070b1f38030b0738040a222c0113010c0a0101010b0a111a0a22290304ce010b222c030105d4010a22290204d4010b222c020102030002000201020202030100010101020000081800\",\"abi\":{\"address\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9\",\"name\":\"token_offer\",\"friends\":[],\"exposed_functions\":[{\"name\":\"cancel\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[]},{\"name\":\"collectionv1\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOfferTokenV1\"]},{\"name\":\"collectionv2\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOfferTokenV2\"]},{\"name\":\"exists_at\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[\"bool\"]},{\"name\":\"expiration_time\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[\"u64\"]},{\"name\":\"expired\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[\"bool\"]},{\"name\":\"fee_schedule\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"]},{\"name\":\"init_for_tokenv1\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"]},{\"name\":\"init_for_tokenv1_entry\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\"],\"return\":[]},{\"name\":\"init_for_tokenv2\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x4::token::Token>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"]},{\"name\":\"init_for_tokenv2_entry\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x4::token::Token>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\"],\"return\":[]},{\"name\":\"price\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[\"u64\"]},{\"name\":\"sell_tokenv1\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\",\"0x1::string::String\",\"u64\"],\"return\":[\"0x1::option::Option<0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::TokenV1Container>>\"]},{\"name\":\"sell_tokenv1_entry\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\",\"0x1::string::String\",\"u64\"],\"return\":[]},{\"name\":\"sell_tokenv2\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::token_offer::TokenOffer>\"],\"return\":[]}],\"structs\":[{\"name\":\"CoinOffer\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"coins\",\"type\":\"0x1::coin::Coin<T0>\"}]},{\"name\":\"TokenOffer\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"fee_schedule\",\"type\":\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"},{\"name\":\"item_price\",\"type\":\"u64\"},{\"name\":\"expiration_time\",\"type\":\"u64\"},{\"name\":\"delete_ref\",\"type\":\"0x1::object::DeleteRef\"}]},{\"name\":\"TokenOfferTokenV1\",\"is_native\":false,\"abilities\":[\"copy\",\"drop\",\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"creator_address\",\"type\":\"address\"},{\"name\":\"collection_name\",\"type\":\"0x1::string::String\"},{\"name\":\"token_name\",\"type\":\"0x1::string::String\"},{\"name\":\"property_version\",\"type\":\"u64\"}]},{\"name\":\"TokenOfferTokenV2\",\"is_native\":false,\"abilities\":[\"copy\",\"drop\",\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"token\",\"type\":\"0x1::object::Object<0x4::token::Token>\"}]}]}},{\"bytecode\":\"0xa11ceb0b060000000e0100180218380350f30104c3022805eb02d50307c006b30708f30d4006b30e4b10fe0e93030a9112100ba112020ca312c2070de519020ee719020000010101020103010401050106010701080009000a000b000c08010001000d0600050e070100010b0f0800051208000a13080008150700061d07010000092606000b2f080005320200023a04010001001000010100001102010100001403010100001604010100001704050100001806010100001903050100001a07010100001b08010100001c09010100001e050a0100001f0001010000200201010000210b01010000220c0101000b27050e0007280f10000b29111200032a131300052b15100108032c131300082d171800092e1a0101080b301c1b0005311e1f0208080a332110000a342213000135230101000b362425000537261e010809381a0101080639162801000b3b2a1000023c2b2c0100023d2d1301000b3e2e2f00023f302c01000140310101000a2422130004413213000942330101080b430510000b0a05210013141619001606160416181d1b161d141e1907160e1605161f13211622162416251628190b160d1602060c0b020108030002060c0a0b0201080304060c0b020108040b020108050307060c0508060806030b0201080503010b0201080307060c0508060a0806030b020108050a0304060c0a0b020108040b020108050a0307060c0a0b020108040b020108050a030a030a0b020108030a030a060c0508060a0806030b020108050a030a030a0b020108030a03010b07010303060c0b020108030303060c0a0b020108030a030605050b020108050503080801080801060c0105020b02010803060c02050b02010805010301080301060b02010900010900010a02010806010805060b0201090008060505030808010b0201080905060c0508060806030208090804010b02010900010b0201090108080a0b020108050b00010900030b020108030c0b02010804060c010b02010805020b020108050303060c050303060c0b020108040b02010805020c080a0106080a010b02010804010b0701090011030b0b0109000b0b0109000b0b010900030b02010805050b020108030303060c0b0b0109000503050808080601060b0201080302060c03010b0b01090001060b0b010900020b020108030302050302070b0b0109000302050b0b010900020303090b020109000806050505030303080804050505070b000109000c636f696e5f6c697374696e670d6170746f735f6163636f756e7404636f696e056572726f72066d6174683634066f626a656374066f7074696f6e067369676e657206737472696e67066576656e74730c6665655f7363686564756c65076c697374696e6711466978656450726963654c697374696e670d50757263686173654576656e74064f626a656374074c697374696e670f656e645f66697865645f707269636514656e645f66697865645f70726963655f6d616e790a4f626a656374436f72650b4665655363686564756c6510696e69745f66697865645f707269636506537472696e671c696e69745f66697865645f70726963655f666f725f746f6b656e763125696e69745f66697865645f70726963655f666f725f746f6b656e76315f696e7465726e616c21696e69745f66697865645f70726963655f666f725f746f6b656e76315f6d616e7919696e69745f66697865645f70726963655f696e7465726e616c15696e69745f66697865645f70726963655f6d616e79206c6973745f616e645f7570646174655f66697865645f70726963655f6d616e79286c6973745f616e645f7570646174655f66697865645f70726963655f746f6b656e76315f6d616e79064f7074696f6e0570726963650870757263686173650d70757263686173655f6d616e79127570646174655f66697865645f7072696365177570646174655f66697865645f70726963655f6d616e79097075726368617365720a636f6d6d697373696f6e09726f79616c746965730d546f6b656e4d657461646174610e746f6b656e5f6d657461646174610a616464726573735f6f6605636c6f7365117065726d697373696f6e5f64656e6965640e6f626a6563745f61646472657373096e6f745f666f756e64047574663815656d69745f6c697374696e675f63616e63656c656410546f6b656e5631436f6e7461696e6572186372656174655f746f6b656e76315f636f6e7461696e657207636f6e766572740e436f6e7374727563746f725265660b6665655f616464726573730b6c697374696e675f6665650e7472616e736665725f636f696e7304696e69741b6f626a6563745f66726f6d5f636f6e7374727563746f725f72656613656d69745f6c697374696e675f706c6163656404736f6d6504436f696e0e6173736572745f737461727465640877697468647261770576616c75650f636f6d707574655f726f79616c747907657874726163740d6465706f7369745f636f696e73036d696e13656d69745f6c697374696e675f66696c6c65640673656c6c6572584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c900000000000000000000000000000000000000000000000000000000000000010308050000000000000003080400000000000000030803000000000000000308060000000000000003080200000000000000030801000000000000000a020c0b6669786564207072696365126170746f733a3a6d657461646174615f7631fe020601000000000000000b454e4f5f4c495354494e4718546865726520657869737473206e6f206c697374696e672e02000000000000000e454e4f5f4255595f49545f4e4f57265468697320697320616e2061756374696f6e20776974686f757420627579206974206e6f772e03000000000000000c454249445f544f4f5f4c4f57215468652070726f706f7365642062696420697320696e73756666696369656e742e0400000000000000124541554354494f4e5f4e4f545f454e4445441e5468652061756374696f6e20686173206e6f742079657420656e6465642e05000000000000000e4541554354494f4e5f454e4445441e5468652061756374696f6e2068617320616c726561647920656e6465642e06000000000000000b454e4f545f53454c4c45521d54686520656e74697479206973206e6f74207468652073656c6c65722e0111466978656450726963654c697374696e67010301183078313a3a6f626a6563743a3a4f626a65637447726f7570010570726963650101000002011e0301020423051e0324032503001600010401000d2a0a01110f0c070a0011100c030a010b0011110c040c020b030a02210410051307031112270e0138000c050a053b00041a051d07051114270a053e003a000c060b04070611150b050b020b060b07380102010104010013160600000000000000000c020a020e01410523041305080a000e010a0242051438020b02060100000000000000160c0205020b0001020201040001070b000b010b020b033803010203010400010a0b000b010b020b030b040b050b0638040102040300001b0e0a000b010b020b030b0411170c070b000b0738050b050b0638030205010400131f0600000000000000000c070a070e06411323041c05080a000a010a020e030a074218140a040a050e060a074213143804010b07060100000000000000160c0705020b00010206030000202b0a000b010a020a030c070c050c0a0c0b0a0b0a0511190a050b07111a38060b0b0b0a0b05111c0c040c090a0339000c060e090b063f000e0438070c080b02070611150e0838000b0011100b030a08110f38080b080207010400131c0600000000000000000c040a040e03411323041905080a000e010a044227140a020e030a044213143803010b04060100000000000000160c0405020b0001020801040100010a0a000b010b020b0338090b000b050b06380a020901040100010d0a000b010b020b030b040b050b06380b0b000b080b09380a020a0100010010100e0038000c010a013b000407050a07051114270b013d00370014380c020b0104010029590e0111200c080a083b000407050c0b000107051114270b083e003a000c0a0a000b0a380d0c030b000b010b03070611150c120c040c090c0c0a09110f0c110e04380e0c0b0a090a0b11230c0f0c0e0a090a0c11110c070c100a0f0600000000000000002204380d040a0f380f0c0d0b0e0b0d38100a070a0b11260c060e04380e0a0611270c020d040b02380f0c050a0711190b0538100a100b0438100b070b120e0938000b100b0c11100b0b0b060b0f0b113811020c0104010013160600000000000000000c020a020e01410523041305080a000e010a0242051438120b02060100000000000000160c0205020b0001020d0104010034300a0011100c040a0111290c030b040b0321040b05100b000107031112270e0138000c050a053b000417051c0b000107051114270b053c000c060a020b063600150a01112a070611150e0138000b0011100b020b01110f3808020e01040100131a0600000000000000000c030a030e02411323041705080a000e010a034205140e020a0342131438130b03060100000000000000160c0305020b0001020000001600\",\"abi\":{\"address\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9\",\"name\":\"coin_listing\",\"friends\":[],\"exposed_functions\":[{\"name\":\"end_fixed_price\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[]},{\"name\":\"end_fixed_price_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>>\"],\"return\":[]},{\"name\":\"init_fixed_price\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x1::object::ObjectCore>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[]},{\"name\":\"init_fixed_price_for_tokenv1\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[]},{\"name\":\"init_fixed_price_for_tokenv1_internal\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::string::String\",\"u64\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"]},{\"name\":\"init_fixed_price_for_tokenv1_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"vector<0x1::string::String>\",\"u64\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"vector<u64>\"],\"return\":[]},{\"name\":\"init_fixed_price_internal\",\"visibility\":\"friend\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x1::object::ObjectCore>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"]},{\"name\":\"init_fixed_price_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<0x1::object::Object<0x1::object::ObjectCore>>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"vector<u64>\"],\"return\":[]},{\"name\":\"list_and_update_fixed_price_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<0x1::object::Object<0x1::object::ObjectCore>>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"vector<u64>\",\"vector<u64>\",\"vector<0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>>\",\"vector<u64>\"],\"return\":[]},{\"name\":\"list_and_update_fixed_price_tokenv1_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"vector<0x1::string::String>\",\"u64\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"vector<u64>\",\"vector<u64>\",\"vector<0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>>\",\"vector<u64>\"],\"return\":[]},{\"name\":\"price\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[\"0x1::option::Option<u64>\"]},{\"name\":\"purchase\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\"],\"return\":[]},{\"name\":\"purchase_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>>\"],\"return\":[]},{\"name\":\"update_fixed_price\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>\",\"u64\"],\"return\":[]},{\"name\":\"update_fixed_price_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::Listing>>\",\"vector<u64>\"],\"return\":[]}],\"structs\":[{\"name\":\"FixedPriceListing\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"price\",\"type\":\"u64\"}]},{\"name\":\"PurchaseEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"purchaser\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"u64\"},{\"name\":\"commission\",\"type\":\"u64\"},{\"name\":\"royalties\",\"type\":\"u64\"}]}]}},{\"bytecode\":\"0xa11ceb0b060000000c01001002103003409c0104dc010c05e801c60107ae03f60508a4094006e40937109b0ae4040aff0e2a0ca90fed080d961810000001010102010301040105010600070008080000090a00000a0a00000b0a00000c0600000d0a00030e07010001031d0600021f040106010521070003260200000f0001000010020300001102030000120401000013050600001407050000150701000016020300001708010000180901000019090100001a090100001b0a010003240c0601080125030300032710110003281213000329121400032a101601060714100100012b030300012c030300032d12180108042e100600032f1a1b0108013003030005311c1d0002321e01010603332014000634011d01000d0b1215160b180b1b151d2101060b0601080000020b0601080003010302060c05010b06010800010506060c050303030303060c0b060108000503060c0b060108000304060c0b06010800030301080001060b06010900030305050703030303050506080505080a0807050c080001060c01080a0106080a010807010c010804010b08010900080805080a080a0807050c0c0800010b060109000405050708000809020b06010900050101010a0201080902070b08010900090009060c0505050c0c0b0601080008090809010608070108030c6665655f7363686564756c65056572726f72056576656e74066f626a656374067369676e657206737472696e6709747970655f696e666f066576656e74730b4665655363686564756c651346697865645261746542696464696e6746656513466978656452617465436f6d6d697373696f6e134669786564526174654c697374696e674665650d4d75746174696f6e4576656e741850657263656e7461676552617465436f6d6d697373696f6e064f626a6563740d6173736572745f6578697374730b62696464696e675f6665650a636f6d6d697373696f6e05656d7074790b6665655f6164647265737304696e69740a696e69745f656e7472790b6c697374696e675f6665650f7365745f6665655f616464726573731a7365745f66697865645f726174655f62696464696e675f666565197365745f66697865645f726174655f636f6d6d697373696f6e1a7365745f66697865645f726174655f6c697374696e675f6665651e7365745f70657263656e746167655f726174655f636f6d6d697373696f6e0a657874656e645f72656609457874656e645265660f6d75746174696f6e5f6576656e74730b4576656e7448616e646c6510757064617465645f7265736f7572636506537472696e670b64656e6f6d696e61746f72096e756d657261746f720e6f626a6563745f61646472657373096e6f745f666f756e640e436f6e7374727563746f725265661a6372656174655f6f626a6563745f66726f6d5f6163636f756e741367656e65726174655f657874656e645f7265660f67656e65726174655f7369676e6572106e65775f6576656e745f68616e646c6510696e76616c69645f617267756d656e740c6f75745f6f665f72616e67651b6f626a6563745f66726f6d5f636f6e7374727563746f725f7265660a616464726573735f6f660869735f6f776e6572117065726d697373696f6e5f64656e69656404757466380a656d69745f6576656e741d67656e65726174655f7369676e65725f666f725f657874656e64696e6709747970655f6e616d65584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c90000000000000000000000000000000000000000000000000000000000000001030802000000000000000308030000000000000003080400000000000000030801000000000000000a020c0b6665655f61646472657373126170746f733a3a6d657461646174615f7631cf0404010000000000000010454e4f5f4645455f5343484544554c451b4665655363686564756c6520646f6573206e6f742065786973742e0200000000000000144544454e4f4d494e41544f525f49535f5a45524f2d5468652064656e6f6d696e61746f7220696e2061206672616374696f6e2063616e6e6f74206265207a65726f2e03000000000000001045455843454544535f4d4158494d554d3d5468652076616c756520726570726573656e7465642062792061206672616374696f6e2063616e6e6f742062652067726561746572207468616e20312e04000000000000000a454e4f545f4f574e4552395468652070617373656420696e207369676e6572206973206e6f7420746865206f776e6572206f6620746865206d61726b6574706c6163652e050b4665655363686564756c65010301183078313a3a6f626a6563743a3a4f626a65637447726f75701346697865645261746542696464696e67466565010301183078313a3a6f626a6563743a3a4f626a65637447726f757013466978656452617465436f6d6d697373696f6e010301183078313a3a6f626a6563743a3a4f626a65637447726f7570134669786564526174654c697374696e67466565010301183078313a3a6f626a6563743a3a4f626a65637447726f75701850657263656e7461676552617465436f6d6d697373696f6e010301183078313a3a6f626a6563743a3a4f626a65637447726f7570040a636f6d6d697373696f6e0101000b62696464696e675f6665650101000b6665655f616464726573730101000b6c697374696e675f66656501010000020313051c08071e0b080108040102011003020201110303020116030402012008090502022203230300010000060d0b0038000c010a0129000407050a0703110e270b01010201010001010d190e0038000c040a0429000407050a0703110e270b040c030a03290104150b032b011000140c0205170600000000000000000c020b02020201000202050e340e0038000c070a0729000407050a0703110e270b070c060a06290204150b062b021001140c0305320a062905042e0b062b050c080b010a081002140b081003140c050c04350b0435180b05351a340c0205300600000000000000000c020b020c030b0302030104000f1b0b000b010c04110f0c020e0211100c030e0211110c050b040b030e05380112000c060e050b062d000e0511130b020b050101020401000100060f0e0038000c010a0129000407050a0703110e270b012b00100414020501000017400a050a04250405050a0b000107011114270a0406000000000000000022040f05140b000107001115270b000b010c0a110f0c080e0811100c090e0811110c0c0b0a0b090e0c380112000c0d0e0c0b0d2d000e0c11130b080b0c0c0b0c070e0b0b0212012d010e0b0b0312032d030b040b0512050c060e0b0b062d050e073802020601040001090b000b010b020b030b040b051105010207010001030d190e0038000c040a0429000407050a0703110e270b040c030a03290304150b032b031005140c0205170600000000000000000c020b0202080104010019270e0138000c040a0429000407050c0b00010703110e270b040c030b010b00111738030414051707021119270b032a000c050b020a050f04150704111a0c060b050f060b0612043804020901040200011f3a0b000b010c090c030e0938000c060a062900040b05100b03010703110e270b060c050b090b03111738030418051b07021119270a052b001007111c0b050c040c080a04290104280b042c01010b080c070e070b0212012d0138050c0a0e0711170b0a0c0b2a000f060b0b12043804020a0104030002051f410b000b010c090c030e0938000c060a062900040b05100b03010703110e270b060c050b090b03111738030418051b07021119270a052b001007111c0b050c040c080a04290204290b042c0201052f0a042905042f0b042c05010b080c070e070b0212022d0238050c0a0e0711170b0a0c0b2a000f060b0b12043804020b01040200031f3a0b000b010c090c030e0938000c060a062900040b05100b03010703110e270b060c050b090b03111738030418051b07021119270a052b001007111c0b050c040c080a04290304280b042c03010b080c070e070b0212032d0338050c0a0e0711170b0a0c0b2a000f060b0b12043804020c0104030002051f560a030a02250405050a0b000107011114270a0206000000000000000022040f05140b000107001115270b000b010c0a0c040e0a38000c070a072900041f05240b04010703110e270b070c060b0a0b0411173803042c052f07021119270a062b001007111c0b060c050c090a052902043d0b052c020105430a05290504430b052c05010b090c080e080b020b0312052d0538050c0b0e0811170b0b0c0c2a000f060b0c12043804020100020005010500000003000002000100\",\"abi\":{\"address\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9\",\"name\":\"fee_schedule\",\"friends\":[],\"exposed_functions\":[{\"name\":\"assert_exists\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"],\"return\":[]},{\"name\":\"bidding_fee\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[\"u64\"]},{\"name\":\"commission\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[\"u64\"]},{\"name\":\"empty\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"address\"],\"return\":[]},{\"name\":\"fee_address\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"],\"return\":[\"address\"]},{\"name\":\"init\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"address\",\"u64\",\"u64\",\"u64\",\"u64\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"]},{\"name\":\"init_entry\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"address\",\"u64\",\"u64\",\"u64\",\"u64\"],\"return\":[]},{\"name\":\"listing_fee\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[\"u64\"]},{\"name\":\"set_fee_address\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"address\"],\"return\":[]},{\"name\":\"set_fixed_rate_bidding_fee\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[]},{\"name\":\"set_fixed_rate_commission\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[]},{\"name\":\"set_fixed_rate_listing_fee\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\"],\"return\":[]},{\"name\":\"set_percentage_rate_commission\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\"],\"return\":[]}],\"structs\":[{\"name\":\"FeeSchedule\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"fee_address\",\"type\":\"address\"},{\"name\":\"extend_ref\",\"type\":\"0x1::object::ExtendRef\"},{\"name\":\"mutation_events\",\"type\":\"0x1::event::EventHandle<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::MutationEvent>\"}]},{\"name\":\"FixedRateBiddingFee\",\"is_native\":false,\"abilities\":[\"drop\",\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"bidding_fee\",\"type\":\"u64\"}]},{\"name\":\"FixedRateCommission\",\"is_native\":false,\"abilities\":[\"drop\",\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"commission\",\"type\":\"u64\"}]},{\"name\":\"FixedRateListingFee\",\"is_native\":false,\"abilities\":[\"drop\",\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"listing_fee\",\"type\":\"u64\"}]},{\"name\":\"MutationEvent\",\"is_native\":false,\"abilities\":[\"drop\",\"store\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"updated_resource\",\"type\":\"0x1::string::String\"}]},{\"name\":\"PercentageRateCommission\",\"is_native\":false,\"abilities\":[\"drop\",\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"denominator\",\"type\":\"u64\"},{\"name\":\"numerator\",\"type\":\"u64\"}]}]}},{\"bytecode\":\"0xa11ceb0b060000000e01002202225c037eef0204ed032e059b04b20407cd08d60b08a314800106a3153c10df15a5050a841b2c0bb01b020cb21b830f0db52a100ec52a020000010101020103010401050106010701080109020a030b030c030a000d000e000f0010080100010011080000120b0000130b000514070100010f1b0800081c07000b1f0800062407010000102508000d280800022b04010001052e06000e310600053e0200053f06000a4c07000a2804000a4d07000e4e06000c4c0b000015000101000016020300001702040000180205000019020600001a020500000e020700001d08020100001e080101000020090201000021090101000022020600002302060000260a0b010000270a01010000290c01010005320f1001080333060600073411100005351205010803360606000e371314000e381514000e3917010108053a19100108013b1a010100053c1b0100093d0106000540111e0005411f2000054221010005431f220005441f1b000f452306000f460710000147240101000248252601000a492701000e4a17010108054b101901080a4f292a000a502b2c000a511005000a522d01000653012f01001054302e000555320101080656182f01000a572a33000a583410000a593406000a5a3406000e5b2a3500035c060600025d36260100045e3706000f5f2306000260380601000e61390101080d621913010803630606000d0c193c010806643e05010006652f1801000c663f10000c673f06000c683f06000e69403500100e130e1716180e1918231824182616270e071809182c2e2e312f2e361839183a160d183b3b2e3b3d3b3e3d3f3d02060c0b0401080100010b0401080101080201080301010103010b0401080507060c0508060b0401080503030306060c0b040108070b0401080503030304060c0b04010801080603010b08010b0401080903060c0b040108010b0401080a09080d0b0b010900080d0b040108010505070801080c06080201080101060b04010900010501060c020b0401090005010b0401080701080d02050806010805060b0401090005050303080d010900010b0401090002050b0b01090001080c020b040108010511030b0b01090005080e0303050b040108050b040108050308010c0c060c060c03080f01080e0106080e01080f0106080f010c020b040108050303060c050302060c03010b0b01090002060c01250b08010b0401080903030303030305030b0b0109000b0b0109000b040108010505050708010708020b0b010900030b040108090b08010b04010809080c030b040108050303050b0b010900081003030305050811081208130405080608060301081203060c08120301081102050811010b04010809010b0801090002060c081101080903060c0b04010900050108100106081001081302070b0b0109000302030301060b0b010900080b0401090005050503030308132a05030303030303030305030b0b0109000b0b0109000b040108010505050708010708030b0b01090003080c03030b0401080503030503050b0b0109000b0801081408140303030303050505081301080a010b0801081401081401060b0801090001060814010b0401080a10636f6c6c656374696f6e5f6f666665720d6170746f735f6163636f756e7404636f696e056572726f72066d6174683634066f626a656374066f7074696f6e067369676e657206737472696e670974696d657374616d7005746f6b656e0a636f6c6c656374696f6e07726f79616c7479066576656e74730c6665655f7363686564756c65076c697374696e6709436f696e4f666665720f436f6c6c656374696f6e4f6666657216436f6c6c656374696f6e4f66666572546f6b656e563116436f6c6c656374696f6e4f66666572546f6b656e5632064f626a6563740663616e63656c0c636f6c6c656374696f6e76310c636f6c6c656374696f6e7632096578697374735f61740f65787069726174696f6e5f74696d6507657870697265640b4665655363686564756c6506537472696e6710696e69745f666f725f746f6b656e763116696e69745f666f725f746f6b656e76315f656e7472790a436f6c6c656374696f6e10696e69745f666f725f746f6b656e763216696e69745f666f725f746f6b656e76325f656e7472790570726963650972656d61696e696e67064f7074696f6e10546f6b656e5631436f6e7461696e65720c73656c6c5f746f6b656e76311273656c6c5f746f6b656e76315f656e74727905546f6b656e0c73656c6c5f746f6b656e763205636f696e7304436f696e0a6974656d5f70726963650a64656c6574655f7265660944656c6574655265660f63726561746f725f616464726573730f636f6c6c656374696f6e5f6e616d6512436f6c6c656374696f6e4d657461646174610e6f626a6563745f61646472657373096e6f745f666f756e640a616464726573735f6f660869735f6f776e6572117065726d697373696f6e5f64656e6965641f636f6c6c656374696f6e5f6d657461646174615f666f725f746f6b656e76321f636f6c6c656374696f6e5f6d657461646174615f666f725f746f6b656e76311e656d69745f636f6c6c656374696f6e5f6f666665725f63616e63656c6564056f776e65720d6465706f7369745f636f696e730664656c6574650b6e6f775f7365636f6e64730e436f6e7374727563746f725265660b5472616e736665725265661a6372656174655f6f626a6563745f66726f6d5f6163636f756e741567656e65726174655f7472616e736665725f7265661864697361626c655f756e67617465645f7472616e736665720f67656e65726174655f7369676e65721367656e65726174655f64656c6574655f7265660b6c697374696e675f6665650b6665655f616464726573730e7472616e736665725f636f696e73087769746864726177166f70745f696e5f6469726563745f7472616e736665721c656d69745f636f6c6c656374696f6e5f6f666665725f706c6163656411616464726573735f746f5f6f626a65637407526f79616c747907546f6b656e49640d546f6b656e4d65746164617461136372656174655f746f6b656e5f69645f7261770e77697468647261775f746f6b656e136765745f6469726563745f7472616e736665721a6469726563745f6465706f7369745f776974685f6f70745f696e046e6f6e65236372656174655f746f6b656e76315f636f6e7461696e65725f776974685f746f6b656e087472616e7366657204736f6d650b6765745f726f79616c7479116765745f726f79616c74795f7061796565176765745f726f79616c74795f64656e6f6d696e61746f72156765745f726f79616c74795f6e756d657261746f721a746f6b656e5f6d657461646174615f666f725f746f6b656e76310d696e76616c69645f73746174650765787472616374036d696e0a636f6d6d697373696f6e0576616c75651c656d69745f636f6c6c656374696f6e5f6f666665725f66696c6c656411636f6c6c656374696f6e5f6f626a65637410696e76616c69645f617267756d656e740769735f736f6d650c64657374726f795f736f6d650d70617965655f616464726573730b64656e6f6d696e61746f72096e756d657261746f721a746f6b656e5f6d657461646174615f666f725f746f6b656e7632584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000004030806000000000000000308050000000000000003080400000000000000030802000000000000000308010000000000000003080300000000000000126170746f733a3a6d657461646174615f7631900506010000000000000014454e4f5f434f4c4c454354494f4e5f4f464645521c4e6f20636f6c6c656374696f6e206f6666657220646566696e65642e02000000000000000e454e4f5f434f494e5f4f46464552164e6f20636f696e206f6666657220646566696e65642e03000000000000000f454e4f5f544f4b454e5f4f46464552174e6f20746f6b656e206f6666657220646566696e65642e04000000000000000a454e4f545f4f574e45522e54686973206973206e6f7420746865206f776e6572206f662074686520636f6c6c656374696f6e206f666665722e05000000000000001545494e434f52524543545f434f4c4c454354494f4e38546865206f66666572656420746f6b656e206973206e6f742077697468696e2074686520657870656374656420636f6c6c656374696f6e2e06000000000000000845455850495245442154686520636f6c6c656374696f6e206f666665722068617320657870697265642e0409436f696e4f66666572010301183078313a3a6f626a6563743a3a4f626a65637447726f75700f436f6c6c656374696f6e4f66666572010301183078313a3a6f626a6563743a3a4f626a65637447726f757016436f6c6c656374696f6e4f66666572546f6b656e5631010301183078313a3a6f626a6563743a3a4f626a65637447726f757016436f6c6c656374696f6e4f66666572546f6b656e5632010301183078313a3a6f626a6563743a3a4f626a65637447726f7570080570726963650101000765787069726564010100096578697374735f61740101000972656d61696e696e670101000c636f6c6c656374696f6e76310101000c636f6c6c656374696f6e76320101000c6665655f7363686564756c650101000f65787069726174696f6e5f74696d650101000002012a0b0b0109000102050e0b040108052c03230319032d080c0202022f053008060302010b0b04010807001800010404000102030d640e0138000c060a0629010407050c0b000107041111270a010a0011123801041205170b000107021114270a062a010c080a06290304240a062b0310001411150c02052f0a062b020c0a0a0a1001140b0a10021411160c020b020c040a081003140b060b0011120a081004140b081005140b0438020b010c050e0538000c070a073e003a000c030b0538030b0338040a072c0113010c09010101010b09111a0a072903045d0b072c030105630a07290204630b072c0201020101000102100e0e0038000c010a0129020407050a07051111270b012b0214020201000103100e0e0038000c010a0129010407050a07041111270b012b0314020301000001040e00380029010204010001011c110b000c010e0138000c020a0229010409050c07041111270b022b011006140205010001011c130b000c010e0138000c020a0229010409050c07041111270b022b01100614111b230206010001011c110b000c010e0138000c020a0229010409050c07041111270b022b0110031402070100001d550a000a030a040a050b060c0b0c070c100c0e111c0c0a0e0a111d0c170e17111e0e0a111f0c130b0e0b100b070b0b0e0a112012010c110e130b112d010b130c120a000e120a030a040a05180c160c0f0c140c150a0f0a1611210c0c0b0f11220c0d0a150b0d0b0c38050b150b1638060c080b140b0839003f000e120a010a0212022d020a000811250e1211120c090b030a090b0011120b040b050b010b02111638070b0938080208010400010a0b000b010b020b030b040b050b0638090102090100001d500a000a020a030a040b050c0a0c060c0f0c0d111c0c090e09111d0c160e16111e0e09111f0c120b0d0b0f0b060b0a0e09112012010c100e120b102d010b120c110a000e110a020a030a04180c150c0e0c130c140a0e0a1511210c0b0b0e11220c0c0a140b0c0b0b38050b140b1538060c070b130b0739003f000e110a0112032d030e1111120c080b020a080b0011120b030b040b01111538070b083808020a01040001090b000b010b020b030b040b05380a01020b010001011c110b000c010e0138000c020a0229010409050c07041111270b022b01100414020c010001011c110b000c010e0138000c020a0229010409050c07041111270b022b01100514020d0100040001020328f7010e0138000c100a1029020407050c0b000107051111270a102a020c140a141001140b141002140b020b0311280c270a000a2706010000000000000011290c260a0138030c1e0a1e112a042a0b1e0b26112b380b0c0405350a000b26112d0c170a000a170b1e380c0b17380d0c040b040c180a2711300c200b0138030b0011120b100e2011310e2011320e2011330b2711340c280c230c220c240c110c250c0b0a1129010452055507041111270a112a010c13111b0a1310061423045f05640b130107001135270a131004140c1d0a113b00046c05710b130107031111270a113c0036000a1d380e0c0d0a1d0b230b220c1a0c1c0c090a1a060000000000000000210484010600000000000000000c060598010a090c050b090b1c0b1a0c0c0c0a0c070b050b07350b0a35180b0c351a3411370c060b060c210d0d0a21380e0c1f0b240b1f38040a131003140c1b0a1b0a1d11380c160a160e0d380f11370c080d0d0b08380e0c150a1b11220b1538040a250b0d38040b1b0a110b0b0b250b1d0b210b160b2838100a13100514060100000000000000170a130f05150b131005140600000000000000002104f5010b1138080c0f0e0f38000c120a123e003a000c0e0b0f38030b0e38040a122c0113010c19010101010b19111a0a12290304ef010b122c030105f5010a12290204f5010b122c02010b18020e0104040001020301070b000b010b020b03381101020f010404000102033a82020e0138000c110a1129030407050c0b000107051111270a112a030c150a0238120b15100014210417051c0b00010701113c270a0138030c200a000a020b2038130a0238140c220e223815043c0b2238160c230e2311400c1e0e2311410c190e2311420c1c0b1e0b190b1c0c050c040c0305430a0011120601000000000000000600000000000000000c050c040c030b030b040b050c270c250c290b0138030b0011120b110b290b250b270b0211430c2c0c280c260c2a0c120c2b0c0c0a122901045e056107041111270a122a010c14111b0a1410061423046b05700b140107001135270a141004140c1f0a123b000478057d0b140107031111270a123c0036000a1f380e0c0e0a1f0b280b260c1a0c1d0c0a0a1a060000000000000000210490010600000000000000000c0705a4010a0a0c060b0a0b1d0b1a0c0d0c0b0c080b060b08350b0b35180b0d351a3411370c070b070c240d0e0a24380e0c210b2a0b2138040a141003140c1b0a1b0a1f11380c170a170e0e380f11370c090d0e0b09380e0c160a1b11220b1638040a2b0b0e38040b1b0a120b0c0b2b0b1f0b240b170b2c38100a14100514060100000000000000170a140f05150b14100514060000000000000000210481020b1238080c100e1038000c130a133e003a000c0f0b1038030b0f38040a132c0113010c18010101010b18111a0a13290304fb010b132c03010581020a1329020481020b132c02010203000200020101000101010201030000071800\",\"abi\":{\"address\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9\",\"name\":\"collection_offer\",\"friends\":[],\"exposed_functions\":[{\"name\":\"cancel\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[]},{\"name\":\"collectionv1\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOfferTokenV1\"]},{\"name\":\"collectionv2\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOfferTokenV2\"]},{\"name\":\"exists_at\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[\"bool\"]},{\"name\":\"expiration_time\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[\"u64\"]},{\"name\":\"expired\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[\"bool\"]},{\"name\":\"fee_schedule\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"]},{\"name\":\"init_for_tokenv1\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\",\"u64\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"]},{\"name\":\"init_for_tokenv1_entry\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\",\"u64\"],\"return\":[]},{\"name\":\"init_for_tokenv2\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x4::collection::Collection>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\",\"u64\"],\"return\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"]},{\"name\":\"init_for_tokenv2_entry\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x4::collection::Collection>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"u64\",\"u64\",\"u64\"],\"return\":[]},{\"name\":\"price\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[\"u64\"]},{\"name\":\"remaining\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":true,\"generic_type_params\":[],\"params\":[\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\"],\"return\":[\"u64\"]},{\"name\":\"sell_tokenv1\",\"visibility\":\"public\",\"is_entry\":false,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\",\"0x1::string::String\",\"u64\"],\"return\":[\"0x1::option::Option<0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::listing::TokenV1Container>>\"]},{\"name\":\"sell_tokenv1_entry\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\",\"0x1::string::String\",\"u64\"],\"return\":[]},{\"name\":\"sell_tokenv2\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::collection_offer::CollectionOffer>\",\"0x1::object::Object<0x4::token::Token>\"],\"return\":[]}],\"structs\":[{\"name\":\"CoinOffer\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[{\"constraints\":[]}],\"fields\":[{\"name\":\"coins\",\"type\":\"0x1::coin::Coin<T0>\"}]},{\"name\":\"CollectionOffer\",\"is_native\":false,\"abilities\":[\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"fee_schedule\",\"type\":\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\"},{\"name\":\"item_price\",\"type\":\"u64\"},{\"name\":\"remaining\",\"type\":\"u64\"},{\"name\":\"expiration_time\",\"type\":\"u64\"},{\"name\":\"delete_ref\",\"type\":\"0x1::object::DeleteRef\"}]},{\"name\":\"CollectionOfferTokenV1\",\"is_native\":false,\"abilities\":[\"copy\",\"drop\",\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"creator_address\",\"type\":\"address\"},{\"name\":\"collection_name\",\"type\":\"0x1::string::String\"}]},{\"name\":\"CollectionOfferTokenV2\",\"is_native\":false,\"abilities\":[\"copy\",\"drop\",\"key\"],\"generic_type_params\":[],\"fields\":[{\"name\":\"collection\",\"type\":\"0x1::object::Object<0x4::collection::Collection>\"}]}]}},{\"bytecode\":\"0xa11ceb0b060000000801000c020c16032248046a12057c9301078f02fd02088c05400ccc05cc0200000101010200030004000501070701000104080800020b0700050f080001120800000600010100000902010100000a03010100000c04010100000d00010100000e0501010001100709010803110b01010003130f01010003141001010003150b0101000316110101000608070a060e080a010a050a090a0a0a0b0a02060c0a050004060c0a050b000108010a0307060c0a050b000108010a030a030a050a030a060c0508020a0802030b000108010a030a030a050a0303060c0a050a0302030b000108030105010803010b0001090001090002060c0b0001080302030b00010804010301080404060c0b000108040b000108010307060c0508020a0802030b000108010a0303060c0b0001080303136d61726b6574706c6163655f73637269707473066f626a65637406737472696e670c636f696e5f6c697374696e670c6665655f7363686564756c65076c697374696e6714656e645f66697865645f70726963655f6d616e79064f626a6563740b4665655363686564756c6515696e69745f66697865645f70726963655f6d616e79206c6973745f616e645f7570646174655f66697865645f70726963655f6d616e7906537472696e67286c6973745f616e645f7570646174655f66697865645f70726963655f746f6b656e76315f6d616e790d70757263686173655f6d616e79177570646174655f66697865645f70726963655f6d616e79074c697374696e6711616464726573735f746f5f6f626a6563740f656e645f66697865645f70726963650a4f626a656374436f726510696e69745f66697865645f707269636521696e69745f66697865645f70726963655f666f725f746f6b656e76315f6d616e79087075726368617365127570646174655f66697865645f7072696365584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c900000000000000000000000000000000000000000000000000000000000000010001040006190600000000000000000c020a020e01410723041605080e010a0242071438000c030a000b0338010b02060100000000000000160c0205020b000102010104000c1e0600000000000000000c040a040e03410d23041b05080e010a0442071438020c050a000b050a020e030a04420d1438030b04060100000000000000160c0405020b00010202010400010a0a000b010b020b0338040b000b050b0638050203010400010d0a000b010b020b030b040b050b0638060b000b080b093805020401040006190600000000000000000c020a020e01410723041605080e010a0242071438000c030a000b0338070b02060100000000000000160c0205020b00010205010400061d0600000000000000000c030a030e02410d23041a05080e010a0342071438000c040a000b040e020a03420d1438080b03060100000000000000160c0305020b00010200\",\"abi\":{\"address\":\"0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9\",\"name\":\"marketplace_scripts\",\"friends\":[],\"exposed_functions\":[{\"name\":\"end_fixed_price_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\"],\"return\":[]},{\"name\":\"init_fixed_price_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"vector<u64>\"],\"return\":[]},{\"name\":\"list_and_update_fixed_price_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"vector<u64>\",\"vector<u64>\",\"vector<address>\",\"vector<u64>\"],\"return\":[]},{\"name\":\"list_and_update_fixed_price_tokenv1_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"address\",\"0x1::string::String\",\"vector<0x1::string::String>\",\"u64\",\"0x1::object::Object<0x584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c9::fee_schedule::FeeSchedule>\",\"vector<u64>\",\"vector<u64>\",\"vector<address>\",\"vector<u64>\"],\"return\":[]},{\"name\":\"purchase_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\"],\"return\":[]},{\"name\":\"update_fixed_price_many\",\"visibility\":\"public\",\"is_entry\":true,\"is_view\":false,\"generic_type_params\":[{\"constraints\":[]}],\"params\":[\"&signer\",\"vector<address>\",\"vector<u64>\"],\"return\":[]}],\"structs\":[]}}]"
	p, err := PayloadFromJsonAndAbi(payload, abi)
	require.NoError(t, err)
	raw, err := MakeRawTransaction(from, uint64(sequenceNumber), uint64(maxGasAmount), uint64(gasUnitPrice), uint64(expirationTimestampSecs), uint8(chainId), p)
	require.NoError(t, err)
	tx, err := SignRawTransaction(raw, seedHex)
	require.NoError(t, err)
	expected := "d1028d1c19e05b737a5ff9e2bfddee4821d329f1b1efd9e21c002aea04b83862310000000000000002584b50b999c78ade62f8359c91b5165ff390338d45f8e55969a04e65d76258c90c636f696e5f6c697374696e6710696e69745f66697865645f7072696365010700000000000000000000000000000000000000000000000000000000000000010a6170746f735f636f696e094170746f73436f696e000320ffedd8fac12a876e1ae43272c447794af3496794046558005c56e8c07047ff1e2071f7c94805c33d32a7f9560c95f02e9d3b5bc49884a883916f03abe6da11ac080800c2eb0b00000000d0070000000000006400000000000000d0b4586500000000010020cb260546471c6e15c6b5ed0cc11ea65b72250971c25ecbba0e1a0d015ee9fe89402fffb81b22aec14a04087339321d231de4154dd633a588efc5b34734f675edc7102bc6ca0801ac5af15c77ac0f066a800490159e0e711770944d4d44ea1b190e"
	require.Equal(t, expected, tx)

	ser := bcs.NewSerializer()
	p.Serialize(ser)
	checkPayloadFromJsonAndAbiV2(t, payload, abi, hex.EncodeToString(ser.GetBytes()))
}

func TestSignMessage(t *testing.T) {
	priKey := "be06243a511f303c1f6e1250c58ebe166081398f56467ca58bc06209502a23c2"
	message := "APTOS\naddress: 0xcb95e54bf4baa46bfc6748ef979edca6199a923df3d0757d896a7dc93514a19b\napplication: dapp\nchainId: 1\nmessage: Welcome to dApp!\nnonce: 9999"
	signature, err := SignMessage(priKey, message)
	require.NoError(t, err)
	expected := "0xf731756c76517cbf91e41a5f2a05ea99de22ef3959993ee65a6da7ac8a59542cfe5fb90798d5f08f6a51bb056420d5ee0e37fa0d05b7e0ffc8cd51265a757104"
	require.Equal(t, expected, signature)
	pubKey, _ := ed25519.PublicKeyFromSeed(priKey)
	signB, err := hex.DecodeString(signature[2:])
	require.NoError(t, err)
	ok := ed255192.Verify(pubKey, []byte(message), signB)
	require.True(t, ok)
}

func TestGetTransactionHash(t *testing.T) {
	signedList := []string{
		"834d639b10d20dcb894728aa4b9b572b2ea2d97073b10eacb111f338b20ea5d7996d0f00000000000200000000000000000000000000000000000000000000000000000000000000010d6170746f735f6163636f756e74087472616e7366657200022092d6bab0dabd67bb65c2f98c24dc438f51087de78ff1a225d97edbb54f3e783708b04e790000000000d007000000000000c8000000000000007aeb1e66000000000100206006bb15e3c0c19f249001c250f21df557626509517c56b3bce9cde02da2001940d674449df6d580a9b5a4584e9531a7feb9b8b11d6ebaa4e08d08ed2a6b7bc75e14fa535e22861f0eea43211210d9a1f9cbf3c82994e091ca8d62889227de0600",
		"834d639b10d20dcb894728aa4b9b572b2ea2d97073b10eacb111f338b20ea5d7986d0f00000000000200000000000000000000000000000000000000000000000000000000000000010d6170746f735f6163636f756e74087472616e73666572000220b0d555be810aff171402e62c97cc580461f71fa1fbadc85362543c057e7d22d708302eeb0100000000d007000000000000c8000000000000005ceb1e66000000000100206006bb15e3c0c19f249001c250f21df557626509517c56b3bce9cde02da200194035b9b66e3e91d1dd4e892c1a928da15023e0c404884482249feafd7262bcedc438c1920ebd0faebdbace9d059e9ed20eccdf7dfc8b6358347898d5a7300c5304",
	}
	hashList := []string{
		"0x2fb21dc4639883ae5cb5b509fe0567ca728f4be915df79272297f51ac5202e4a",
		"0xaba5dc5d6b81c4ae457734660783e2a00ed9e986e91ce62ed0137f4db3854c48",
	}

	for i := 0; i < len(hashList); i++ {
		signed := signedList[i]
		hash := hashList[i]

		txHash := GetTransactionHash(signed)
		assert.Equal(t, hash, txHash)
	}
}

// https://explorer.aptoslabs.com/txn/1999660350?network=mainnet
func TestCoinTransferV2(t *testing.T) {
	from := "0xd1028d1c19e05b737a5ff9e2bfddee4821d329f1b1efd9e21c002aea04b83862"
	to := "0x00ca226de86c2da6716aaeddfddc2a16c76d35c67a0da2148c408d2ea1e5ad38"
	amount := 100
	sequenceNumber := 15
	maxGasAmount := 200000
	gasUnitPrice := 100
	expirationTimestampSecs := 1722564321
	chainId := 1
	seedHex := "d1028d1c19e05b737a5ff9e2bfddee4821d329f1b1efd9e21c002aea04b83862"
	payload, err := CoinTransferPayloadV2(to, uint64(amount), "0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT")
	require.NoError(t, err)
	data, err := BuildSignedTransaction(from, uint64(sequenceNumber), uint64(maxGasAmount), uint64(gasUnitPrice), uint64(expirationTimestampSecs), uint8(chainId), payload, seedHex)
	require.NoError(t, err)
	expected := "d1028d1c19e05b737a5ff9e2bfddee4821d329f1b1efd9e21c002aea04b838620f000000000000000200000000000000000000000000000000000000000000000000000000000000010d6170746f735f6163636f756e740e7472616e736665725f636f696e730107f22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa056173736574045553445400022000ca226de86c2da6716aaeddfddc2a16c76d35c67a0da2148c408d2ea1e5ad38086400000000000000400d0300000000006400000000000000e13eac6600000000010020cb260546471c6e15c6b5ed0cc11ea65b72250971c25ecbba0e1a0d015ee9fe89403bfb66aec78652c4a6bb1743497761e64f42d97bab245b17ce2fd7d544c01cfead0ec2c9b6fa5cb57f6fd916eafbf4a79ab4d54fbc631ed73e58b1dc8265c606"
	require.Equal(t, expected, data)
}

func TestCoinTransferCoins(t *testing.T) {
	from := "0xd1028d1c19e05b737a5ff9e2bfddee4821d329f1b1efd9e21c002aea04b83862"
	to := "0x00ca226de86c2da6716aaeddfddc2a16c76d35c67a0da2148c408d2ea1e5ad38"
	amount := uint64(100)
	sequenceNumber := uint64(15)
	maxGasAmount := uint64(200000)
	gasUnitPrice := uint64(100)
	expirationTimestampSecs := uint64(1722564321)
	chainId := uint8(1)
	seedHex := "d1028d1c19e05b737a5ff9e2bfddee4821d329f1b1efd9e21c002aea04b83862"
	tyArgs := "0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT"

	data, err := TransferCoins(from, sequenceNumber, maxGasAmount, gasUnitPrice, expirationTimestampSecs, chainId, to, amount, seedHex, tyArgs)
	require.NoError(t, err)
	expected := "d1028d1c19e05b737a5ff9e2bfddee4821d329f1b1efd9e21c002aea04b838620f000000000000000200000000000000000000000000000000000000000000000000000000000000010d6170746f735f6163636f756e740e7472616e736665725f636f696e730107f22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa056173736574045553445400022000ca226de86c2da6716aaeddfddc2a16c76d35c67a0da2148c408d2ea1e5ad38086400000000000000400d0300000000006400000000000000e13eac6600000000010020cb260546471c6e15c6b5ed0cc11ea65b72250971c25ecbba0e1a0d015ee9fe89403bfb66aec78652c4a6bb1743497761e64f42d97bab245b17ce2fd7d544c01cfead0ec2c9b6fa5cb57f6fd916eafbf4a79ab4d54fbc631ed73e58b1dc8265c606"
	require.Equal(t, expected, data)
}

func TestVerifyMessage(t *testing.T) {

	data := "APTOS\naddress: 0x34c1e7efa0808b7b0113d71b722f483585e4c4b47ba2b0e703b090937f0c63a1\napplication: main.d3c4qcdwu8dzdc.amplifyapp.com\nchainId: 25\nmessage: This is a sample message\nnonce: 12345"
	valid := VerifyMessage("0x64dfb3f1af9a00af3fa1c182c12e6feb08490d5a562d91f78d67d0a9727f969e", data, "0xd743662ad3648113fd0738e4bc120d8fd206e3c52b5a5268a53fd35f887564e05ba2ef74515738610ef070acc4f4889b7c1b0ba496dffe4630b9faf4685b8905")
	assert.Equal(t, nil, valid)
}
